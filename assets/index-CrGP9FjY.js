(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ST=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rv={exports:{}},ch={},Lv={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=Symbol.for("react.element"),xT=Symbol.for("react.portal"),AT=Symbol.for("react.fragment"),kT=Symbol.for("react.strict_mode"),CT=Symbol.for("react.profiler"),RT=Symbol.for("react.provider"),LT=Symbol.for("react.context"),NT=Symbol.for("react.forward_ref"),bT=Symbol.for("react.suspense"),OT=Symbol.for("react.memo"),MT=Symbol.for("react.lazy"),lg=Symbol.iterator;function DT(t){return t===null||typeof t!="object"?null:(t=lg&&t[lg]||t["@@iterator"],typeof t=="function"?t:null)}var Nv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bv=Object.assign,Ov={};function Vo(t,e,n){this.props=t,this.context=e,this.refs=Ov,this.updater=n||Nv}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mv(){}Mv.prototype=Vo.prototype;function ep(t,e,n){this.props=t,this.context=e,this.refs=Ov,this.updater=n||Nv}var tp=ep.prototype=new Mv;tp.constructor=ep;bv(tp,Vo.prototype);tp.isPureReactComponent=!0;var ug=Array.isArray,Dv=Object.prototype.hasOwnProperty,np={current:null},Vv={key:!0,ref:!0,__self:!0,__source:!0};function Fv(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Dv.call(e,i)&&!Vv.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Ml,type:t,key:o,ref:l,props:s,_owner:np.current}}function VT(t,e){return{$$typeof:Ml,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ml}function FT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cg=/\/+/g;function Xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FT(""+t.key):e.toString(36)}function ic(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ml:case xT:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Xh(l,0):i,ug(s)?(n="",t!=null&&(n=t.replace(cg,"$&/")+"/"),ic(s,e,n,"",function(m){return m})):s!=null&&(ip(s)&&(s=VT(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(cg,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",ug(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Xh(o,h);l+=ic(o,e,n,d,s)}else if(d=DT(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Xh(o,h++),l+=ic(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Ou(t,e,n){if(t==null)return t;var i=[],s=0;return ic(t,i,"","",function(o){return e.call(n,o,s++)}),i}function zT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},rc={transition:null},UT={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:rc,ReactCurrentOwner:np};function zv(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Ou,forEach:function(t,e,n){Ou(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ou(t,function(){e++}),e},toArray:function(t){return Ou(t,function(e){return e})||[]},only:function(t){if(!ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Vo;Te.Fragment=AT;Te.Profiler=CT;Te.PureComponent=ep;Te.StrictMode=kT;Te.Suspense=bT;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UT;Te.act=zv;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=bv({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=np.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)Dv.call(e,d)&&!Vv.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Ml,type:t.type,key:s,ref:o,props:i,_owner:l}};Te.createContext=function(t){return t={$$typeof:LT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RT,_context:t},t.Consumer=t};Te.createElement=Fv;Te.createFactory=function(t){var e=Fv.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:NT,render:t}};Te.isValidElement=ip;Te.lazy=function(t){return{$$typeof:MT,_payload:{_status:-1,_result:t},_init:zT}};Te.memo=function(t,e){return{$$typeof:OT,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};Te.unstable_act=zv;Te.useCallback=function(t,e){return jt.current.useCallback(t,e)};Te.useContext=function(t){return jt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return jt.current.useEffect(t,e)};Te.useId=function(){return jt.current.useId()};Te.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return jt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};Te.useRef=function(t){return jt.current.useRef(t)};Te.useState=function(t){return jt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return jt.current.useTransition()};Te.version="18.3.1";Lv.exports=Te;var ve=Lv.exports;const BT=Cv(ve);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT=ve,HT=Symbol.for("react.element"),WT=Symbol.for("react.fragment"),$T=Object.prototype.hasOwnProperty,qT=jT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function Uv(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)$T.call(e,i)&&!ZT.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:HT,type:t,key:o,ref:l,props:s,_owner:qT.current}}ch.Fragment=WT;ch.jsx=Uv;ch.jsxs=Uv;Rv.exports=ch;var O=Rv.exports,Md={},Bv={exports:{}},un={},jv={exports:{}},Hv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var X=$.length;$.push(le);e:for(;0<X;){var ce=X-1>>>1,_e=$[ce];if(0<s(_e,le))$[ce]=le,$[X]=_e,X=ce;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],X=$.pop();if(X!==le){$[0]=X;e:for(var ce=0,_e=$.length,Ie=_e>>>1;ce<Ie;){var Le=2*(ce+1)-1,ye=$[Le],fe=Le+1,ut=$[fe];if(0>s(ye,X))fe<_e&&0>s(ut,ye)?($[ce]=ut,$[fe]=X,ce=fe):($[ce]=ye,$[Le]=X,ce=Le);else if(fe<_e&&0>s(ut,X))$[ce]=ut,$[fe]=X,ce=fe;else break e}}return le}function s($,le){var X=$.sortIndex-le.sortIndex;return X!==0?X:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],v=1,T=null,I=3,M=!1,F=!1,V=!1,W=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var le=n(m);le!==null;){if(le.callback===null)i(m);else if(le.startTime<=$)i(m),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(m)}}function H($){if(V=!1,N($),!F)if(n(d)!==null)F=!0,lt(Y);else{var le=n(m);le!==null&&Vt(H,le.startTime-$)}}function Y($,le){F=!1,V&&(V=!1,b(w),w=-1),M=!0;var X=I;try{for(N(le),T=n(d);T!==null&&(!(T.expirationTime>le)||$&&!R());){var ce=T.callback;if(typeof ce=="function"){T.callback=null,I=T.priorityLevel;var _e=ce(T.expirationTime<=le);le=t.unstable_now(),typeof _e=="function"?T.callback=_e:T===n(d)&&i(d),N(le)}else i(d);T=n(d)}if(T!==null)var Ie=!0;else{var Le=n(m);Le!==null&&Vt(H,Le.startTime-le),Ie=!1}return Ie}finally{T=null,I=X,M=!1}}var q=!1,P=null,w=-1,S=5,x=-1;function R(){return!(t.unstable_now()-x<S)}function D(){if(P!==null){var $=t.unstable_now();x=$;var le=!0;try{le=P(!0,$)}finally{le?C():(q=!1,P=null)}}else q=!1}var C;if(typeof A=="function")C=function(){A(D)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,ni=Qe.port2;Qe.port1.onmessage=D,C=function(){ni.postMessage(null)}}else C=function(){W(D,0)};function lt($){P=$,q||(q=!0,C())}function Vt($,le){w=W(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){F||M||(F=!0,lt(Y))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function($){switch(I){case 1:case 2:case 3:var le=3;break;default:le=I}var X=I;I=le;try{return $()}finally{I=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=I;I=$;try{return le()}finally{I=X}},t.unstable_scheduleCallback=function($,le,X){var ce=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,$){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=X+_e,$={id:v++,callback:le,priorityLevel:$,startTime:X,expirationTime:_e,sortIndex:-1},X>ce?($.sortIndex=X,e(m,$),n(d)===null&&$===n(m)&&(V?(b(w),w=-1):V=!0,Vt(H,X-ce))):($.sortIndex=_e,e(d,$),F||M||(F=!0,lt(Y))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var le=I;return function(){var X=I;I=le;try{return $.apply(this,arguments)}finally{I=X}}}})(Hv);jv.exports=Hv;var GT=jv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=ve,ln=GT;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wv=new Set,ul={};function fs(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(ul[t]=e,t=0;t<e.length;t++)Wv.add(e[t])}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=Object.prototype.hasOwnProperty,QT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hg={},dg={};function YT(t){return Dd.call(dg,t)?!0:Dd.call(hg,t)?!1:QT.test(t)?dg[t]=!0:(hg[t]=!0,!1)}function XT(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JT(t,e,n,i){if(e===null||typeof e>"u"||XT(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var rp=/[\-:]([a-z])/g;function sp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rp,sp);xt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rp,sp);xt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rp,sp);xt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function op(t,e,n,i){var s=xt.hasOwnProperty(e)?xt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JT(e,n,s,i)&&(n=null),i||s===null?YT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mi=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mu=Symbol.for("react.element"),Xs=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),Vd=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),qv=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),Fd=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),up=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),Zv=Symbol.for("react.offscreen"),fg=Symbol.iterator;function Aa(t){return t===null||typeof t!="object"?null:(t=fg&&t[fg]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Jh;function za(t){if(Jh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jh=e&&e[1]||""}return`
`+Jh+t}var ed=!1;function td(t,e){if(!t||ed)return"";ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{ed=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?za(t):""}function eI(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=td(t.type,!1),t;case 11:return t=td(t.type.render,!1),t;case 1:return t=td(t.type,!0),t;default:return""}}function Ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Js:return"Fragment";case Xs:return"Portal";case Vd:return"Profiler";case ap:return"StrictMode";case Fd:return"Suspense";case zd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qv:return(t.displayName||"Context")+".Consumer";case $v:return(t._context.displayName||"Context")+".Provider";case lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case up:return e=t.displayName||null,e!==null?e:Ud(t.type)||"Memo";case Yi:e=t._payload,t=t._init;try{return Ud(t(e))}catch{}}return null}function tI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ud(e);case 8:return e===ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nI(t){var e=Gv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Du(t){t._valueTracker||(t._valueTracker=nI(t))}function Kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Gv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ic(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bd(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qv(t,e){e=e.checked,e!=null&&op(t,"checked",e,!1)}function jd(t,e){Qv(t,e);var n=yr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hd(t,e.type,yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hd(t,e,n){(e!=="number"||Ic(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ua=Array.isArray;function co(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Ua(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yr(n)}}function Yv(t,e){var n=yr(e.value),i=yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function _g(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,Jv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iI=["Webkit","ms","Moz","O"];Object.keys(Ga).forEach(function(t){iI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ga[e]=Ga[t]})});function ey(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ga.hasOwnProperty(t)&&Ga[t]?(""+e).trim():e+"px"}function ty(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=ey(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var rI=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qd(t,e){if(e){if(rI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gd=null;function cp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kd=null,ho=null,fo=null;function vg(t){if(t=Fl(t)){if(typeof Kd!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=mh(e),Kd(t.stateNode,t.type,e))}}function ny(t){ho?fo?fo.push(t):fo=[t]:ho=t}function iy(){if(ho){var t=ho,e=fo;if(fo=ho=null,vg(t),e)for(t=0;t<e.length;t++)vg(e[t])}}function ry(t,e){return t(e)}function sy(){}var nd=!1;function oy(t,e,n){if(nd)return t(e,n);nd=!0;try{return ry(t,e,n)}finally{nd=!1,(ho!==null||fo!==null)&&(sy(),iy())}}function hl(t,e){var n=t.stateNode;if(n===null)return null;var i=mh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Qd=!1;if(Ai)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Qd=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Qd=!1}function sI(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var Ka=!1,Pc=null,Sc=!1,Yd=null,oI={onError:function(t){Ka=!0,Pc=t}};function aI(t,e,n,i,s,o,l,h,d){Ka=!1,Pc=null,sI.apply(oI,arguments)}function lI(t,e,n,i,s,o,l,h,d){if(aI.apply(this,arguments),Ka){if(Ka){var m=Pc;Ka=!1,Pc=null}else throw Error(Q(198));Sc||(Sc=!0,Yd=m)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ay(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yg(t){if(ps(t)!==t)throw Error(Q(188))}function uI(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return yg(s),t;if(o===i)return yg(s),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function ly(t){return t=uI(t),t!==null?uy(t):null}function uy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uy(t);if(e!==null)return e;t=t.sibling}return null}var cy=ln.unstable_scheduleCallback,wg=ln.unstable_cancelCallback,cI=ln.unstable_shouldYield,hI=ln.unstable_requestPaint,nt=ln.unstable_now,dI=ln.unstable_getCurrentPriorityLevel,hp=ln.unstable_ImmediatePriority,hy=ln.unstable_UserBlockingPriority,xc=ln.unstable_NormalPriority,fI=ln.unstable_LowPriority,dy=ln.unstable_IdlePriority,hh=null,Gn=null;function pI(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:_I,mI=Math.log,gI=Math.LN2;function _I(t){return t>>>=0,t===0?32:31-(mI(t)/gI|0)|0}var Fu=64,zu=4194304;function Ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ac(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=Ba(h):(o&=l,o!==0&&(i=Ba(o)))}else l=n&~s,l!==0?i=Ba(l):o!==0&&(i=Ba(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Dn(e),s=1<<n,i|=t[n],e&=~s;return i}function vI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Dn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=vI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Xd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fy(){var t=Fu;return Fu<<=1,!(Fu&4194240)&&(Fu=64),t}function id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dn(e),t[e]=n}function wI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Dn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function dp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Dn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var be=0;function py(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var my,fp,gy,_y,vy,Jd=!1,Uu=[],ar=null,lr=null,ur=null,dl=new Map,fl=new Map,Ji=[],EI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eg(t,e){switch(t){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(e.pointerId)}}function Ca(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Fl(e),e!==null&&fp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function TI(t,e,n,i,s){switch(e){case"focusin":return ar=Ca(ar,t,e,n,i,s),!0;case"dragenter":return lr=Ca(lr,t,e,n,i,s),!0;case"mouseover":return ur=Ca(ur,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return dl.set(o,Ca(dl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,fl.set(o,Ca(fl.get(o)||null,t,e,n,i,s)),!0}return!1}function yy(t){var e=Zr(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=ay(n),e!==null){t.blockedOn=e,vy(t.priority,function(){gy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Gd=i,n.target.dispatchEvent(i),Gd=null}else return e=Fl(n),e!==null&&fp(e),t.blockedOn=n,!1;e.shift()}return!0}function Tg(t,e,n){sc(t)&&n.delete(e)}function II(){Jd=!1,ar!==null&&sc(ar)&&(ar=null),lr!==null&&sc(lr)&&(lr=null),ur!==null&&sc(ur)&&(ur=null),dl.forEach(Tg),fl.forEach(Tg)}function Ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Jd||(Jd=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,II)))}function pl(t){function e(s){return Ra(s,t)}if(0<Uu.length){Ra(Uu[0],t);for(var n=1;n<Uu.length;n++){var i=Uu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ar!==null&&Ra(ar,t),lr!==null&&Ra(lr,t),ur!==null&&Ra(ur,t),dl.forEach(e),fl.forEach(e),n=0;n<Ji.length;n++)i=Ji[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ji.length&&(n=Ji[0],n.blockedOn===null);)yy(n),n.blockedOn===null&&Ji.shift()}var po=Mi.ReactCurrentBatchConfig,kc=!0;function PI(t,e,n,i){var s=be,o=po.transition;po.transition=null;try{be=1,pp(t,e,n,i)}finally{be=s,po.transition=o}}function SI(t,e,n,i){var s=be,o=po.transition;po.transition=null;try{be=4,pp(t,e,n,i)}finally{be=s,po.transition=o}}function pp(t,e,n,i){if(kc){var s=ef(t,e,n,i);if(s===null)fd(t,e,i,Cc,n),Eg(t,i);else if(TI(s,t,e,n,i))i.stopPropagation();else if(Eg(t,i),e&4&&-1<EI.indexOf(t)){for(;s!==null;){var o=Fl(s);if(o!==null&&my(o),o=ef(t,e,n,i),o===null&&fd(t,e,i,Cc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else fd(t,e,i,null,n)}}var Cc=null;function ef(t,e,n,i){if(Cc=null,t=cp(i),t=Zr(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ay(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function wy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dI()){case hp:return 1;case hy:return 4;case xc:case fI:return 16;case dy:return 536870912;default:return 16}default:return 16}}var rr=null,mp=null,oc=null;function Ey(){if(oc)return oc;var t,e=mp,n=e.length,i,s="value"in rr?rr.value:rr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return oc=s.slice(t,1<i?1-i:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bu(){return!0}function Ig(){return!1}function cn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bu:Ig,this.isPropagationStopped=Ig,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),e}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gp=cn(Fo),Vl=Ge({},Fo,{view:0,detail:0}),xI=cn(Vl),rd,sd,La,dh=Ge({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==La&&(La&&t.type==="mousemove"?(rd=t.screenX-La.screenX,sd=t.screenY-La.screenY):sd=rd=0,La=t),rd)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),Pg=cn(dh),AI=Ge({},dh,{dataTransfer:0}),kI=cn(AI),CI=Ge({},Vl,{relatedTarget:0}),od=cn(CI),RI=Ge({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),LI=cn(RI),NI=Ge({},Fo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bI=cn(NI),OI=Ge({},Fo,{data:0}),Sg=cn(OI),MI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VI[t])?!!e[t]:!1}function _p(){return FI}var zI=Ge({},Vl,{key:function(t){if(t.key){var e=MI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UI=cn(zI),BI=Ge({},dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=cn(BI),jI=Ge({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),HI=cn(jI),WI=Ge({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$I=cn(WI),qI=Ge({},dh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZI=cn(qI),GI=[9,13,27,32],vp=Ai&&"CompositionEvent"in window,Qa=null;Ai&&"documentMode"in document&&(Qa=document.documentMode);var KI=Ai&&"TextEvent"in window&&!Qa,Ty=Ai&&(!vp||Qa&&8<Qa&&11>=Qa),Ag=" ",kg=!1;function Iy(t,e){switch(t){case"keyup":return GI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Py(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function QI(t,e){switch(t){case"compositionend":return Py(e);case"keypress":return e.which!==32?null:(kg=!0,Ag);case"textInput":return t=e.data,t===Ag&&kg?null:t;default:return null}}function YI(t,e){if(eo)return t==="compositionend"||!vp&&Iy(t,e)?(t=Ey(),oc=mp=rr=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ty&&e.locale!=="ko"?null:e.data;default:return null}}var XI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XI[t.type]:e==="textarea"}function Sy(t,e,n,i){ny(i),e=Rc(e,"onChange"),0<e.length&&(n=new gp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ya=null,ml=null;function JI(t){Dy(t,0)}function fh(t){var e=io(t);if(Kv(e))return t}function eP(t,e){if(t==="change")return e}var xy=!1;if(Ai){var ad;if(Ai){var ld="oninput"in document;if(!ld){var Rg=document.createElement("div");Rg.setAttribute("oninput","return;"),ld=typeof Rg.oninput=="function"}ad=ld}else ad=!1;xy=ad&&(!document.documentMode||9<document.documentMode)}function Lg(){Ya&&(Ya.detachEvent("onpropertychange",Ay),ml=Ya=null)}function Ay(t){if(t.propertyName==="value"&&fh(ml)){var e=[];Sy(e,ml,t,cp(t)),oy(JI,e)}}function tP(t,e,n){t==="focusin"?(Lg(),Ya=e,ml=n,Ya.attachEvent("onpropertychange",Ay)):t==="focusout"&&Lg()}function nP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fh(ml)}function iP(t,e){if(t==="click")return fh(e)}function rP(t,e){if(t==="input"||t==="change")return fh(e)}function sP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:sP;function gl(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Dd.call(e,s)||!zn(t[s],e[s]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bg(t,e){var n=Ng(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ng(n)}}function ky(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ky(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cy(){for(var t=window,e=Ic();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ic(t.document)}return e}function yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oP(t){var e=Cy(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ky(n.ownerDocument.documentElement,n)){if(i!==null&&yp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=bg(n,o);var l=bg(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aP=Ai&&"documentMode"in document&&11>=document.documentMode,to=null,tf=null,Xa=null,nf=!1;function Og(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nf||to==null||to!==Ic(i)||(i=to,"selectionStart"in i&&yp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xa&&gl(Xa,i)||(Xa=i,i=Rc(tf,"onSelect"),0<i.length&&(e=new gp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=to)))}function ju(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var no={animationend:ju("Animation","AnimationEnd"),animationiteration:ju("Animation","AnimationIteration"),animationstart:ju("Animation","AnimationStart"),transitionend:ju("Transition","TransitionEnd")},ud={},Ry={};Ai&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function ph(t){if(ud[t])return ud[t];if(!no[t])return t;var e=no[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ry)return ud[t]=e[n];return t}var Ly=ph("animationend"),Ny=ph("animationiteration"),by=ph("animationstart"),Oy=ph("transitionend"),My=new Map,Mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){My.set(t,e),fs(e,[t])}for(var cd=0;cd<Mg.length;cd++){var hd=Mg[cd],lP=hd.toLowerCase(),uP=hd[0].toUpperCase()+hd.slice(1);Pr(lP,"on"+uP)}Pr(Ly,"onAnimationEnd");Pr(Ny,"onAnimationIteration");Pr(by,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(Oy,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function Dg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,lI(i,e,void 0,t),t.currentTarget=null}function Dy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;Dg(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;Dg(s,h,m),o=d}}}if(Sc)throw t=Yd,Sc=!1,Yd=null,t}function ze(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var i=t+"__bubble";n.has(i)||(Vy(e,t,2,!1),n.add(i))}function dd(t,e,n){var i=0;e&&(i|=4),Vy(n,t,i,e)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function _l(t){if(!t[Hu]){t[Hu]=!0,Wv.forEach(function(n){n!=="selectionchange"&&(cP.has(n)||dd(n,!1,t),dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hu]||(e[Hu]=!0,dd("selectionchange",!1,e))}}function Vy(t,e,n,i){switch(wy(e)){case 1:var s=PI;break;case 4:s=SI;break;default:s=pp}n=s.bind(null,e,n,t),s=void 0,!Qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Zr(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}oy(function(){var m=o,v=cp(n),T=[];e:{var I=My.get(t);if(I!==void 0){var M=gp,F=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":M=UI;break;case"focusin":F="focus",M=od;break;case"focusout":F="blur",M=od;break;case"beforeblur":case"afterblur":M=od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=kI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=HI;break;case Ly:case Ny:case by:M=LI;break;case Oy:M=$I;break;case"scroll":M=xI;break;case"wheel":M=ZI;break;case"copy":case"cut":case"paste":M=bI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=xg}var V=(e&4)!==0,W=!V&&t==="scroll",b=V?I!==null?I+"Capture":null:I;V=[];for(var A=m,N;A!==null;){N=A;var H=N.stateNode;if(N.tag===5&&H!==null&&(N=H,b!==null&&(H=hl(A,b),H!=null&&V.push(vl(A,H,N)))),W)break;A=A.return}0<V.length&&(I=new M(I,F,null,n,v),T.push({event:I,listeners:V}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",I&&n!==Gd&&(F=n.relatedTarget||n.fromElement)&&(Zr(F)||F[ki]))break e;if((M||I)&&(I=v.window===v?v:(I=v.ownerDocument)?I.defaultView||I.parentWindow:window,M?(F=n.relatedTarget||n.toElement,M=m,F=F?Zr(F):null,F!==null&&(W=ps(F),F!==W||F.tag!==5&&F.tag!==6)&&(F=null)):(M=null,F=m),M!==F)){if(V=Pg,H="onMouseLeave",b="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(V=xg,H="onPointerLeave",b="onPointerEnter",A="pointer"),W=M==null?I:io(M),N=F==null?I:io(F),I=new V(H,A+"leave",M,n,v),I.target=W,I.relatedTarget=N,H=null,Zr(v)===m&&(V=new V(b,A+"enter",F,n,v),V.target=N,V.relatedTarget=W,H=V),W=H,M&&F)t:{for(V=M,b=F,A=0,N=V;N;N=Gs(N))A++;for(N=0,H=b;H;H=Gs(H))N++;for(;0<A-N;)V=Gs(V),A--;for(;0<N-A;)b=Gs(b),N--;for(;A--;){if(V===b||b!==null&&V===b.alternate)break t;V=Gs(V),b=Gs(b)}V=null}else V=null;M!==null&&Vg(T,I,M,V,!1),F!==null&&W!==null&&Vg(T,W,F,V,!0)}}e:{if(I=m?io(m):window,M=I.nodeName&&I.nodeName.toLowerCase(),M==="select"||M==="input"&&I.type==="file")var Y=eP;else if(Cg(I))if(xy)Y=rP;else{Y=nP;var q=tP}else(M=I.nodeName)&&M.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(Y=iP);if(Y&&(Y=Y(t,m))){Sy(T,Y,n,v);break e}q&&q(t,I,m),t==="focusout"&&(q=I._wrapperState)&&q.controlled&&I.type==="number"&&Hd(I,"number",I.value)}switch(q=m?io(m):window,t){case"focusin":(Cg(q)||q.contentEditable==="true")&&(to=q,tf=m,Xa=null);break;case"focusout":Xa=tf=to=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Og(T,n,v);break;case"selectionchange":if(aP)break;case"keydown":case"keyup":Og(T,n,v)}var P;if(vp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else eo?Iy(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Ty&&n.locale!=="ko"&&(eo||w!=="onCompositionStart"?w==="onCompositionEnd"&&eo&&(P=Ey()):(rr=v,mp="value"in rr?rr.value:rr.textContent,eo=!0)),q=Rc(m,w),0<q.length&&(w=new Sg(w,t,null,n,v),T.push({event:w,listeners:q}),P?w.data=P:(P=Py(n),P!==null&&(w.data=P)))),(P=KI?QI(t,n):YI(t,n))&&(m=Rc(m,"onBeforeInput"),0<m.length&&(v=new Sg("onBeforeInput","beforeinput",null,n,v),T.push({event:v,listeners:m}),v.data=P))}Dy(T,e)})}function vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=hl(t,n),o!=null&&i.unshift(vl(t,o,s)),o=hl(t,e),o!=null&&i.push(vl(t,o,s))),t=t.return}return i}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vg(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=hl(n,o),d!=null&&l.unshift(vl(n,d,h))):s||(d=hl(n,o),d!=null&&l.push(vl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var hP=/\r\n?/g,dP=/\u0000|\uFFFD/g;function Fg(t){return(typeof t=="string"?t:""+t).replace(hP,`
`).replace(dP,"")}function Wu(t,e,n){if(e=Fg(e),Fg(t)!==e&&n)throw Error(Q(425))}function Lc(){}var rf=null,sf=null;function of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,fP=typeof clearTimeout=="function"?clearTimeout:void 0,zg=typeof Promise=="function"?Promise:void 0,pP=typeof queueMicrotask=="function"?queueMicrotask:typeof zg<"u"?function(t){return zg.resolve(null).then(t).catch(mP)}:af;function mP(t){setTimeout(function(){throw t})}function pd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),pl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);pl(e)}function cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Zn="__reactFiber$"+zo,yl="__reactProps$"+zo,ki="__reactContainer$"+zo,lf="__reactEvents$"+zo,gP="__reactListeners$"+zo,_P="__reactHandles$"+zo;function Zr(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ug(t);t!==null;){if(n=t[Zn])return n;t=Ug(t)}return e}t=n,n=t.parentNode}return null}function Fl(t){return t=t[Zn]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function mh(t){return t[yl]||null}var uf=[],ro=-1;function Sr(t){return{current:t}}function Ue(t){0>ro||(t.current=uf[ro],uf[ro]=null,ro--)}function Fe(t,e){ro++,uf[ro]=t.current,t.current=e}var wr={},Mt=Sr(wr),Qt=Sr(!1),ts=wr;function To(t,e){var n=t.type.contextTypes;if(!n)return wr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(t){return t=t.childContextTypes,t!=null}function Nc(){Ue(Qt),Ue(Mt)}function Bg(t,e,n){if(Mt.current!==wr)throw Error(Q(168));Fe(Mt,e),Fe(Qt,n)}function Fy(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,tI(t)||"Unknown",s));return Ge({},n,i)}function bc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wr,ts=Mt.current,Fe(Mt,t),Fe(Qt,Qt.current),!0}function jg(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=Fy(t,e,ts),i.__reactInternalMemoizedMergedChildContext=t,Ue(Qt),Ue(Mt),Fe(Mt,t)):Ue(Qt),Fe(Qt,n)}var gi=null,gh=!1,md=!1;function zy(t){gi===null?gi=[t]:gi.push(t)}function vP(t){gh=!0,zy(t)}function xr(){if(!md&&gi!==null){md=!0;var t=0,e=be;try{var n=gi;for(be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}gi=null,gh=!1}catch(s){throw gi!==null&&(gi=gi.slice(t+1)),cy(hp,xr),s}finally{be=e,md=!1}}return null}var so=[],oo=0,Oc=null,Mc=0,yn=[],wn=0,ns=null,vi=1,yi="";function Wr(t,e){so[oo++]=Mc,so[oo++]=Oc,Oc=t,Mc=e}function Uy(t,e,n){yn[wn++]=vi,yn[wn++]=yi,yn[wn++]=ns,ns=t;var i=vi;t=yi;var s=32-Dn(i)-1;i&=~(1<<s),n+=1;var o=32-Dn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,vi=1<<32-Dn(e)+s|n<<s|i,yi=o+t}else vi=1<<o|n<<s|i,yi=t}function wp(t){t.return!==null&&(Wr(t,1),Uy(t,1,0))}function Ep(t){for(;t===Oc;)Oc=so[--oo],so[oo]=null,Mc=so[--oo],so[oo]=null;for(;t===ns;)ns=yn[--wn],yn[wn]=null,yi=yn[--wn],yn[wn]=null,vi=yn[--wn],yn[wn]=null}var on=null,rn=null,He=!1,On=null;function By(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,rn=cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:vi,overflow:yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,rn=null,!0):!1;default:return!1}}function cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hf(t){if(He){var e=rn;if(e){var n=e;if(!Hg(t,e)){if(cf(t))throw Error(Q(418));e=cr(n.nextSibling);var i=on;e&&Hg(t,e)?By(i,n):(t.flags=t.flags&-4097|2,He=!1,on=t)}}else{if(cf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,He=!1,on=t}}}function Wg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function $u(t){if(t!==on)return!1;if(!He)return Wg(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!of(t.type,t.memoizedProps)),e&&(e=rn)){if(cf(t))throw jy(),Error(Q(418));for(;e;)By(t,e),e=cr(e.nextSibling)}if(Wg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=on?cr(t.stateNode.nextSibling):null;return!0}function jy(){for(var t=rn;t;)t=cr(t.nextSibling)}function Io(){rn=on=null,He=!1}function Tp(t){On===null?On=[t]:On.push(t)}var yP=Mi.ReactCurrentBatchConfig;function Na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function qu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $g(t){var e=t._init;return e(t._payload)}function Hy(t){function e(b,A){if(t){var N=b.deletions;N===null?(b.deletions=[A],b.flags|=16):N.push(A)}}function n(b,A){if(!t)return null;for(;A!==null;)e(b,A),A=A.sibling;return null}function i(b,A){for(b=new Map;A!==null;)A.key!==null?b.set(A.key,A):b.set(A.index,A),A=A.sibling;return b}function s(b,A){return b=pr(b,A),b.index=0,b.sibling=null,b}function o(b,A,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<A?(b.flags|=2,A):N):(b.flags|=2,A)):(b.flags|=1048576,A)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function h(b,A,N,H){return A===null||A.tag!==6?(A=Td(N,b.mode,H),A.return=b,A):(A=s(A,N),A.return=b,A)}function d(b,A,N,H){var Y=N.type;return Y===Js?v(b,A,N.props.children,H,N.key):A!==null&&(A.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Yi&&$g(Y)===A.type)?(H=s(A,N.props),H.ref=Na(b,A,N),H.return=b,H):(H=pc(N.type,N.key,N.props,null,b.mode,H),H.ref=Na(b,A,N),H.return=b,H)}function m(b,A,N,H){return A===null||A.tag!==4||A.stateNode.containerInfo!==N.containerInfo||A.stateNode.implementation!==N.implementation?(A=Id(N,b.mode,H),A.return=b,A):(A=s(A,N.children||[]),A.return=b,A)}function v(b,A,N,H,Y){return A===null||A.tag!==7?(A=Jr(N,b.mode,H,Y),A.return=b,A):(A=s(A,N),A.return=b,A)}function T(b,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Td(""+A,b.mode,N),A.return=b,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Mu:return N=pc(A.type,A.key,A.props,null,b.mode,N),N.ref=Na(b,null,A),N.return=b,N;case Xs:return A=Id(A,b.mode,N),A.return=b,A;case Yi:var H=A._init;return T(b,H(A._payload),N)}if(Ua(A)||Aa(A))return A=Jr(A,b.mode,N,null),A.return=b,A;qu(b,A)}return null}function I(b,A,N,H){var Y=A!==null?A.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Y!==null?null:h(b,A,""+N,H);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Mu:return N.key===Y?d(b,A,N,H):null;case Xs:return N.key===Y?m(b,A,N,H):null;case Yi:return Y=N._init,I(b,A,Y(N._payload),H)}if(Ua(N)||Aa(N))return Y!==null?null:v(b,A,N,H,null);qu(b,N)}return null}function M(b,A,N,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return b=b.get(N)||null,h(A,b,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Mu:return b=b.get(H.key===null?N:H.key)||null,d(A,b,H,Y);case Xs:return b=b.get(H.key===null?N:H.key)||null,m(A,b,H,Y);case Yi:var q=H._init;return M(b,A,N,q(H._payload),Y)}if(Ua(H)||Aa(H))return b=b.get(N)||null,v(A,b,H,Y,null);qu(A,H)}return null}function F(b,A,N,H){for(var Y=null,q=null,P=A,w=A=0,S=null;P!==null&&w<N.length;w++){P.index>w?(S=P,P=null):S=P.sibling;var x=I(b,P,N[w],H);if(x===null){P===null&&(P=S);break}t&&P&&x.alternate===null&&e(b,P),A=o(x,A,w),q===null?Y=x:q.sibling=x,q=x,P=S}if(w===N.length)return n(b,P),He&&Wr(b,w),Y;if(P===null){for(;w<N.length;w++)P=T(b,N[w],H),P!==null&&(A=o(P,A,w),q===null?Y=P:q.sibling=P,q=P);return He&&Wr(b,w),Y}for(P=i(b,P);w<N.length;w++)S=M(P,b,w,N[w],H),S!==null&&(t&&S.alternate!==null&&P.delete(S.key===null?w:S.key),A=o(S,A,w),q===null?Y=S:q.sibling=S,q=S);return t&&P.forEach(function(R){return e(b,R)}),He&&Wr(b,w),Y}function V(b,A,N,H){var Y=Aa(N);if(typeof Y!="function")throw Error(Q(150));if(N=Y.call(N),N==null)throw Error(Q(151));for(var q=Y=null,P=A,w=A=0,S=null,x=N.next();P!==null&&!x.done;w++,x=N.next()){P.index>w?(S=P,P=null):S=P.sibling;var R=I(b,P,x.value,H);if(R===null){P===null&&(P=S);break}t&&P&&R.alternate===null&&e(b,P),A=o(R,A,w),q===null?Y=R:q.sibling=R,q=R,P=S}if(x.done)return n(b,P),He&&Wr(b,w),Y;if(P===null){for(;!x.done;w++,x=N.next())x=T(b,x.value,H),x!==null&&(A=o(x,A,w),q===null?Y=x:q.sibling=x,q=x);return He&&Wr(b,w),Y}for(P=i(b,P);!x.done;w++,x=N.next())x=M(P,b,w,x.value,H),x!==null&&(t&&x.alternate!==null&&P.delete(x.key===null?w:x.key),A=o(x,A,w),q===null?Y=x:q.sibling=x,q=x);return t&&P.forEach(function(D){return e(b,D)}),He&&Wr(b,w),Y}function W(b,A,N,H){if(typeof N=="object"&&N!==null&&N.type===Js&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Mu:e:{for(var Y=N.key,q=A;q!==null;){if(q.key===Y){if(Y=N.type,Y===Js){if(q.tag===7){n(b,q.sibling),A=s(q,N.props.children),A.return=b,b=A;break e}}else if(q.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Yi&&$g(Y)===q.type){n(b,q.sibling),A=s(q,N.props),A.ref=Na(b,q,N),A.return=b,b=A;break e}n(b,q);break}else e(b,q);q=q.sibling}N.type===Js?(A=Jr(N.props.children,b.mode,H,N.key),A.return=b,b=A):(H=pc(N.type,N.key,N.props,null,b.mode,H),H.ref=Na(b,A,N),H.return=b,b=H)}return l(b);case Xs:e:{for(q=N.key;A!==null;){if(A.key===q)if(A.tag===4&&A.stateNode.containerInfo===N.containerInfo&&A.stateNode.implementation===N.implementation){n(b,A.sibling),A=s(A,N.children||[]),A.return=b,b=A;break e}else{n(b,A);break}else e(b,A);A=A.sibling}A=Id(N,b.mode,H),A.return=b,b=A}return l(b);case Yi:return q=N._init,W(b,A,q(N._payload),H)}if(Ua(N))return F(b,A,N,H);if(Aa(N))return V(b,A,N,H);qu(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,A!==null&&A.tag===6?(n(b,A.sibling),A=s(A,N),A.return=b,b=A):(n(b,A),A=Td(N,b.mode,H),A.return=b,b=A),l(b)):n(b,A)}return W}var Po=Hy(!0),Wy=Hy(!1),Dc=Sr(null),Vc=null,ao=null,Ip=null;function Pp(){Ip=ao=Vc=null}function Sp(t){var e=Dc.current;Ue(Dc),t._currentValue=e}function df(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function mo(t,e){Vc=t,Ip=ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(Ip!==t)if(t={context:t,memoizedValue:e,next:null},ao===null){if(Vc===null)throw Error(Q(308));ao=t,Vc.dependencies={lanes:0,firstContext:t}}else ao=ao.next=t;return e}var Gr=null;function xp(t){Gr===null?Gr=[t]:Gr.push(t)}function $y(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,xp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ci(t,i)}function Ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xi=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ce&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ci(t,n)}return s=i.interleaved,s===null?(e.next=e,xp(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ci(t,n)}function lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dp(t,n)}}function qg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fc(t,e,n,i){var s=t.updateQueue;Xi=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=m:h.next=m,v.lastBaseUpdate=d))}if(o!==null){var T=s.baseState;l=0,v=m=d=null,h=o;do{var I=h.lane,M=h.eventTime;if((i&I)===I){v!==null&&(v=v.next={eventTime:M,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var F=t,V=h;switch(I=e,M=n,V.tag){case 1:if(F=V.payload,typeof F=="function"){T=F.call(M,T,I);break e}T=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=V.payload,I=typeof F=="function"?F.call(M,T,I):F,I==null)break e;T=Ge({},T,I);break e;case 2:Xi=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,I=s.effects,I===null?s.effects=[h]:I.push(h))}else M={eventTime:M,lane:I,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(m=v=M,d=T):v=v.next=M,l|=I;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;I=h,h=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);if(v===null&&(d=T),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);rs|=l,t.lanes=l,t.memoizedState=T}}function Zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var zl={},Kn=Sr(zl),wl=Sr(zl),El=Sr(zl);function Kr(t){if(t===zl)throw Error(Q(174));return t}function kp(t,e){switch(Fe(El,e),Fe(wl,t),Fe(Kn,zl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$d(e,t)}Ue(Kn),Fe(Kn,e)}function So(){Ue(Kn),Ue(wl),Ue(El)}function Zy(t){Kr(El.current);var e=Kr(Kn.current),n=$d(e,t.type);e!==n&&(Fe(wl,t),Fe(Kn,n))}function Cp(t){wl.current===t&&(Ue(Kn),Ue(wl))}var qe=Sr(0);function zc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gd=[];function Rp(){for(var t=0;t<gd.length;t++)gd[t]._workInProgressVersionPrimary=null;gd.length=0}var uc=Mi.ReactCurrentDispatcher,_d=Mi.ReactCurrentBatchConfig,is=0,Ze=null,ct=null,vt=null,Uc=!1,Ja=!1,Tl=0,wP=0;function Ct(){throw Error(Q(321))}function Lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function Np(t,e,n,i,s,o){if(is=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uc.current=t===null||t.memoizedState===null?PP:SP,t=n(i,s),Ja){o=0;do{if(Ja=!1,Tl=0,25<=o)throw Error(Q(301));o+=1,vt=ct=null,e.updateQueue=null,uc.current=xP,t=n(i,s)}while(Ja)}if(uc.current=Bc,e=ct!==null&&ct.next!==null,is=0,vt=ct=Ze=null,Uc=!1,e)throw Error(Q(300));return t}function bp(){var t=Tl!==0;return Tl=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=t:vt=vt.next=t,vt}function Pn(){if(ct===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=vt===null?Ze.memoizedState:vt.next;if(e!==null)vt=e,ct=t;else{if(t===null)throw Error(Q(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},vt===null?Ze.memoizedState=vt=t:vt=vt.next=t}return vt}function Il(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=ct,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var v=m.lane;if((is&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var T={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=T,l=i):d=d.next=T,Ze.lanes|=v,rs|=v}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,zn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ze.lanes|=o,rs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);zn(o,e.memoizedState)||(Kt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Gy(){}function Ky(t,e){var n=Ze,i=Pn(),s=e(),o=!zn(i.memoizedState,s);if(o&&(i.memoizedState=s,Kt=!0),i=i.queue,Op(Xy.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Pl(9,Yy.bind(null,n,i,s,e),void 0,null),yt===null)throw Error(Q(349));is&30||Qy(n,e,s)}return s}function Qy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yy(t,e,n,i){e.value=n,e.getSnapshot=i,Jy(e)&&ew(t)}function Xy(t,e,n){return n(function(){Jy(e)&&ew(t)})}function Jy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function ew(t){var e=Ci(t,1);e!==null&&Vn(e,t,1,-1)}function Gg(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=IP.bind(null,Ze,t),[e.memoizedState,t]}function Pl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function tw(){return Pn().memoizedState}function cc(t,e,n,i){var s=qn();Ze.flags|=t,s.memoizedState=Pl(1|e,n,void 0,i===void 0?null:i)}function _h(t,e,n,i){var s=Pn();i=i===void 0?null:i;var o=void 0;if(ct!==null){var l=ct.memoizedState;if(o=l.destroy,i!==null&&Lp(i,l.deps)){s.memoizedState=Pl(e,n,o,i);return}}Ze.flags|=t,s.memoizedState=Pl(1|e,n,o,i)}function Kg(t,e){return cc(8390656,8,t,e)}function Op(t,e){return _h(2048,8,t,e)}function nw(t,e){return _h(4,2,t,e)}function iw(t,e){return _h(4,4,t,e)}function rw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sw(t,e,n){return n=n!=null?n.concat([t]):null,_h(4,4,rw.bind(null,e,t),n)}function Mp(){}function ow(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Lp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function aw(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Lp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function lw(t,e,n){return is&21?(zn(n,e)||(n=fy(),Ze.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function EP(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var i=_d.transition;_d.transition={};try{t(!1),e()}finally{be=n,_d.transition=i}}function uw(){return Pn().memoizedState}function TP(t,e,n){var i=fr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cw(t))hw(e,n);else if(n=$y(t,e,n,i),n!==null){var s=Bt();Vn(n,t,i,s),dw(n,e,i)}}function IP(t,e,n){var i=fr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cw(t))hw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,zn(h,l)){var d=e.interleaved;d===null?(s.next=s,xp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=$y(t,e,s,i),n!==null&&(s=Bt(),Vn(n,t,i,s),dw(n,e,i))}}function cw(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function hw(t,e){Ja=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dp(t,n)}}var Bc={readContext:In,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},PP={readContext:In,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:Kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cc(4194308,4,rw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return cc(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=qn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=TP.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:Gg,useDebugValue:Mp,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=Gg(!1),e=t[0];return t=EP.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,s=qn();if(He){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),yt===null)throw Error(Q(349));is&30||Qy(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Kg(Xy.bind(null,i,o,t),[t]),i.flags|=2048,Pl(9,Yy.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=qn(),e=yt.identifierPrefix;if(He){var n=yi,i=vi;n=(i&~(1<<32-Dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SP={readContext:In,useCallback:ow,useContext:In,useEffect:Op,useImperativeHandle:sw,useInsertionEffect:nw,useLayoutEffect:iw,useMemo:aw,useReducer:vd,useRef:tw,useState:function(){return vd(Il)},useDebugValue:Mp,useDeferredValue:function(t){var e=Pn();return lw(e,ct.memoizedState,t)},useTransition:function(){var t=vd(Il)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:Gy,useSyncExternalStore:Ky,useId:uw,unstable_isNewReconciler:!1},xP={readContext:In,useCallback:ow,useContext:In,useEffect:Op,useImperativeHandle:sw,useInsertionEffect:nw,useLayoutEffect:iw,useMemo:aw,useReducer:yd,useRef:tw,useState:function(){return yd(Il)},useDebugValue:Mp,useDeferredValue:function(t){var e=Pn();return ct===null?e.memoizedState=t:lw(e,ct.memoizedState,t)},useTransition:function(){var t=yd(Il)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:Gy,useSyncExternalStore:Ky,useId:uw,unstable_isNewReconciler:!1};function Nn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ff(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vh={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bt(),s=fr(t),o=Ii(i,s);o.payload=e,n!=null&&(o.callback=n),e=hr(t,o,s),e!==null&&(Vn(e,t,s,i),lc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bt(),s=fr(t),o=Ii(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=hr(t,o,s),e!==null&&(Vn(e,t,s,i),lc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),i=fr(t),s=Ii(n,i);s.tag=2,e!=null&&(s.callback=e),e=hr(t,s,i),e!==null&&(Vn(e,t,i,n),lc(e,t,i))}};function Qg(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!gl(n,i)||!gl(s,o):!0}function fw(t,e,n){var i=!1,s=wr,o=e.contextType;return typeof o=="object"&&o!==null?o=In(o):(s=Yt(e)?ts:Mt.current,i=e.contextTypes,o=(i=i!=null)?To(t,s):wr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Yg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vh.enqueueReplaceState(e,e.state,null)}function pf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ap(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=In(o):(o=Yt(e)?ts:Mt.current,s.context=To(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ff(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vh.enqueueReplaceState(s,s.state,null),Fc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xo(t,e){try{var n="",i=e;do n+=eI(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AP=typeof WeakMap=="function"?WeakMap:Map;function pw(t,e,n){n=Ii(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Hc||(Hc=!0,Sf=i),mf(t,e)},n}function mw(t,e,n){n=Ii(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){mf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mf(t,e),typeof i!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Xg(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new AP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=BP.bind(null,t,e,n),e.then(t,t))}function Jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ii(-1,1),e.tag=2,hr(n,e,1))),n.lanes|=1),t)}var kP=Mi.ReactCurrentOwner,Kt=!1;function Ut(t,e,n,i){e.child=t===null?Wy(e,null,n,i):Po(e,t.child,n,i)}function t_(t,e,n,i,s){n=n.render;var o=e.ref;return mo(e,s),i=Np(t,e,n,i,o,s),n=bp(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ri(t,e,s)):(He&&n&&wp(e),e.flags|=1,Ut(t,e,i,s),e.child)}function n_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Hp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,gw(t,e,o,i,s)):(t=pc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:gl,n(l,i)&&t.ref===e.ref)return Ri(t,e,s)}return e.flags|=1,t=pr(o,i),t.ref=e.ref,t.return=e,e.child=t}function gw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(gl(o,i)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Ri(t,e,s)}return gf(t,e,n,i,s)}function _w(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(uo,nn),nn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(uo,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Fe(uo,nn),nn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Fe(uo,nn),nn|=i;return Ut(t,e,s,n),e.child}function vw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,i,s){var o=Yt(n)?ts:Mt.current;return o=To(e,o),mo(e,s),n=Np(t,e,n,i,o,s),i=bp(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ri(t,e,s)):(He&&i&&wp(e),e.flags|=1,Ut(t,e,n,s),e.child)}function i_(t,e,n,i,s){if(Yt(n)){var o=!0;bc(e)}else o=!1;if(mo(e,s),e.stateNode===null)hc(t,e),fw(e,n,i),pf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=In(m):(m=Yt(n)?ts:Mt.current,m=To(e,m));var v=n.getDerivedStateFromProps,T=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";T||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&Yg(e,l,i,m),Xi=!1;var I=e.memoizedState;l.state=I,Fc(e,i,l,s),d=e.memoizedState,h!==i||I!==d||Qt.current||Xi?(typeof v=="function"&&(ff(e,n,v,i),d=e.memoizedState),(h=Xi||Qg(e,n,h,i,I,d,m))?(T||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,qy(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:Nn(e.type,h),l.props=m,T=e.pendingProps,I=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=In(d):(d=Yt(n)?ts:Mt.current,d=To(e,d));var M=n.getDerivedStateFromProps;(v=typeof M=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==T||I!==d)&&Yg(e,l,i,d),Xi=!1,I=e.memoizedState,l.state=I,Fc(e,i,l,s);var F=e.memoizedState;h!==T||I!==F||Qt.current||Xi?(typeof M=="function"&&(ff(e,n,M,i),F=e.memoizedState),(m=Xi||Qg(e,n,m,i,I,F,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,F,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,F,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=F),l.props=i,l.state=F,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return _f(t,e,n,i,o,s)}function _f(t,e,n,i,s,o){vw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&jg(e,n,!1),Ri(t,e,o);i=e.stateNode,kP.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Po(e,t.child,null,o),e.child=Po(e,null,h,o)):Ut(t,e,h,o),e.memoizedState=i.state,s&&jg(e,n,!0),e.child}function yw(t){var e=t.stateNode;e.pendingContext?Bg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bg(t,e.context,!1),kp(t,e.containerInfo)}function r_(t,e,n,i,s){return Io(),Tp(s),e.flags|=256,Ut(t,e,n,i),e.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function yf(t){return{baseLanes:t,cachePool:null,transitions:null}}function ww(t,e,n){var i=e.pendingProps,s=qe.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(qe,s&1),t===null)return hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Eh(l,i,0,null),t=Jr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=yf(n),e.memoizedState=vf,t):Dp(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return CP(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=pr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=pr(h,o):(o=Jr(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?yf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=vf,i}return o=t.child,t=o.sibling,i=pr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Dp(t,e){return e=Eh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zu(t,e,n,i){return i!==null&&Tp(i),Po(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CP(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=wd(Error(Q(422))),Zu(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Eh({mode:"visible",children:i.children},s,0,null),o=Jr(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Po(e,t.child,null,l),e.child.memoizedState=yf(l),e.memoizedState=vf,o);if(!(e.mode&1))return Zu(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=wd(o,i,void 0),Zu(t,e,l,i)}if(h=(l&t.childLanes)!==0,Kt||h){if(i=yt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ci(t,s),Vn(i,t,s,-1))}return jp(),i=wd(Error(Q(421))),Zu(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jP.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,rn=cr(s.nextSibling),on=e,He=!0,On=null,t!==null&&(yn[wn++]=vi,yn[wn++]=yi,yn[wn++]=ns,vi=t.id,yi=t.overflow,ns=e),e=Dp(e,i.children),e.flags|=4096,e)}function s_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),df(t.return,e,n)}function Ed(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Ew(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ut(t,e,i.children,n),i=qe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s_(t,n,e);else if(t.tag===19)s_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fe(qe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ed(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ed(e,!0,n,null,o);break;case"together":Ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RP(t,e,n){switch(e.tag){case 3:yw(e),Io();break;case 5:Zy(e);break;case 1:Yt(e.type)&&bc(e);break;case 4:kp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Fe(Dc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fe(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?ww(t,e,n):(Fe(qe,qe.current&1),t=Ri(t,e,n),t!==null?t.sibling:null);Fe(qe,qe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Ew(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(qe,qe.current),i)break;return null;case 22:case 23:return e.lanes=0,_w(t,e,n)}return Ri(t,e,n)}var Tw,wf,Iw,Pw;Tw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};Iw=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Kr(Kn.current);var o=null;switch(n){case"input":s=Bd(t,s),i=Bd(t,i),o=[];break;case"select":s=Ge({},s,{value:void 0}),i=Ge({},i,{value:void 0}),o=[];break;case"textarea":s=Wd(t,s),i=Wd(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Lc)}qd(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ul.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ul.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};Pw=function(t,e,n,i){n!==i&&(e.flags|=4)};function ba(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LP(t,e,n){var i=e.pendingProps;switch(Ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return Yt(e.type)&&Nc(),Rt(e),null;case 3:return i=e.stateNode,So(),Ue(Qt),Ue(Mt),Rp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(kf(On),On=null))),wf(t,e),Rt(e),null;case 5:Cp(e);var s=Kr(El.current);if(n=e.type,t!==null&&e.stateNode!=null)Iw(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Rt(e),null}if(t=Kr(Kn.current),$u(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Zn]=e,i[yl]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(s=0;s<ja.length;s++)ze(ja[s],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":pg(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":gg(i,o),ze("invalid",i)}qd(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&Wu(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Wu(i.textContent,h,t),s=["children",""+h]):ul.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":Du(i),mg(i,o,!0);break;case"textarea":Du(i),_g(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Lc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Zn]=e,t[yl]=i,Tw(t,e,!1,!1),e.stateNode=t;e:{switch(l=Zd(n,i),n){case"dialog":ze("cancel",t),ze("close",t),s=i;break;case"iframe":case"object":case"embed":ze("load",t),s=i;break;case"video":case"audio":for(s=0;s<ja.length;s++)ze(ja[s],t);s=i;break;case"source":ze("error",t),s=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=i;break;case"details":ze("toggle",t),s=i;break;case"input":pg(t,i),s=Bd(t,i),ze("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ge({},i,{value:void 0}),ze("invalid",t);break;case"textarea":gg(t,i),s=Wd(t,i),ze("invalid",t);break;default:s=i}qd(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?ty(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Jv(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&cl(t,d):typeof d=="number"&&cl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ul.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&op(t,o,d,l))}switch(n){case"input":Du(t),mg(t,i,!1);break;case"textarea":Du(t),_g(t);break;case"option":i.value!=null&&t.setAttribute("value",""+yr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?co(t,!!i.multiple,o,!1):i.defaultValue!=null&&co(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)Pw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Kr(El.current),Kr(Kn.current),$u(e)){if(i=e.stateNode,n=e.memoizedProps,i[Zn]=e,(o=i.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:Wu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Zn]=e,e.stateNode=i}return Rt(e),null;case 13:if(Ue(qe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&rn!==null&&e.mode&1&&!(e.flags&128))jy(),Io(),e.flags|=98560,o=!1;else if(o=$u(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[Zn]=e}else Io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),o=!1}else On!==null&&(kf(On),On=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?dt===0&&(dt=3):jp())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return So(),wf(t,e),t===null&&_l(e.stateNode.containerInfo),Rt(e),null;case 10:return Sp(e.type._context),Rt(e),null;case 17:return Yt(e.type)&&Nc(),Rt(e),null;case 19:if(Ue(qe),o=e.memoizedState,o===null)return Rt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)ba(o,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=zc(t),l!==null){for(e.flags|=128,ba(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(qe,qe.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>Ao&&(e.flags|=128,i=!0,ba(o,!1),e.lanes=4194304)}else{if(!i)if(t=zc(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ba(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return Rt(e),null}else 2*nt()-o.renderingStartTime>Ao&&n!==1073741824&&(e.flags|=128,i=!0,ba(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=qe.current,Fe(qe,i?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return Bp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?nn&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function NP(t,e){switch(Ep(e),e.tag){case 1:return Yt(e.type)&&Nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return So(),Ue(Qt),Ue(Mt),Rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cp(e),null;case 13:if(Ue(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(qe),null;case 4:return So(),null;case 10:return Sp(e.type._context),null;case 22:case 23:return Bp(),null;case 24:return null;default:return null}}var Gu=!1,bt=!1,bP=typeof WeakSet=="function"?WeakSet:Set,te=null;function lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xe(t,e,i)}else n.current=null}function Ef(t,e,n){try{n()}catch(i){Xe(t,e,i)}}var o_=!1;function OP(t,e){if(rf=kc,t=Cy(),yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,v=0,T=t,I=null;t:for(;;){for(var M;T!==n||s!==0&&T.nodeType!==3||(h=l+s),T!==o||i!==0&&T.nodeType!==3||(d=l+i),T.nodeType===3&&(l+=T.nodeValue.length),(M=T.firstChild)!==null;)I=T,T=M;for(;;){if(T===t)break t;if(I===n&&++m===s&&(h=l),I===o&&++v===i&&(d=l),(M=T.nextSibling)!==null)break;T=I,I=T.parentNode}T=M}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:t,selectionRange:n},kc=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var F=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var V=F.memoizedProps,W=F.memoizedState,b=e.stateNode,A=b.getSnapshotBeforeUpdate(e.elementType===e.type?V:Nn(e.type,V),W);b.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(H){Xe(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return F=o_,o_=!1,F}function el(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ef(e,n,o)}s=s.next}while(s!==i)}}function yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Tf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sw(t){var e=t.alternate;e!==null&&(t.alternate=null,Sw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[yl],delete e[lf],delete e[gP],delete e[_P])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xw(t){return t.tag===5||t.tag===3||t.tag===4}function a_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function If(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lc));else if(i!==4&&(t=t.child,t!==null))for(If(t,e,n),t=t.sibling;t!==null;)If(t,e,n),t=t.sibling}function Pf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Pf(t,e,n),t=t.sibling;t!==null;)Pf(t,e,n),t=t.sibling}var Et=null,bn=!1;function Ki(t,e,n){for(n=n.child;n!==null;)Aw(t,e,n),n=n.sibling}function Aw(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(hh,n)}catch{}switch(n.tag){case 5:bt||lo(n,e);case 6:var i=Et,s=bn;Et=null,Ki(t,e,n),Et=i,bn=s,Et!==null&&(bn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(bn?(t=Et,n=n.stateNode,t.nodeType===8?pd(t.parentNode,n):t.nodeType===1&&pd(t,n),pl(t)):pd(Et,n.stateNode));break;case 4:i=Et,s=bn,Et=n.stateNode.containerInfo,bn=!0,Ki(t,e,n),Et=i,bn=s;break;case 0:case 11:case 14:case 15:if(!bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Ef(n,e,l),s=s.next}while(s!==i)}Ki(t,e,n);break;case 1:if(!bt&&(lo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Xe(n,e,h)}Ki(t,e,n);break;case 21:Ki(t,e,n);break;case 22:n.mode&1?(bt=(i=bt)||n.memoizedState!==null,Ki(t,e,n),bt=i):Ki(t,e,n);break;default:Ki(t,e,n)}}function l_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bP),e.forEach(function(i){var s=HP.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Et=h.stateNode,bn=!1;break e;case 3:Et=h.stateNode.containerInfo,bn=!0;break e;case 4:Et=h.stateNode.containerInfo,bn=!0;break e}h=h.return}if(Et===null)throw Error(Q(160));Aw(o,l,s),Et=null,bn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){Xe(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kw(e,t),e=e.sibling}function kw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),$n(t),i&4){try{el(3,t,t.return),yh(3,t)}catch(V){Xe(t,t.return,V)}try{el(5,t,t.return)}catch(V){Xe(t,t.return,V)}}break;case 1:Ln(e,t),$n(t),i&512&&n!==null&&lo(n,n.return);break;case 5:if(Ln(e,t),$n(t),i&512&&n!==null&&lo(n,n.return),t.flags&32){var s=t.stateNode;try{cl(s,"")}catch(V){Xe(t,t.return,V)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Qv(s,o),Zd(h,l);var m=Zd(h,o);for(l=0;l<d.length;l+=2){var v=d[l],T=d[l+1];v==="style"?ty(s,T):v==="dangerouslySetInnerHTML"?Jv(s,T):v==="children"?cl(s,T):op(s,v,T,m)}switch(h){case"input":jd(s,o);break;case"textarea":Yv(s,o);break;case"select":var I=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var M=o.value;M!=null?co(s,!!o.multiple,M,!1):I!==!!o.multiple&&(o.defaultValue!=null?co(s,!!o.multiple,o.defaultValue,!0):co(s,!!o.multiple,o.multiple?[]:"",!1))}s[yl]=o}catch(V){Xe(t,t.return,V)}}break;case 6:if(Ln(e,t),$n(t),i&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(V){Xe(t,t.return,V)}}break;case 3:if(Ln(e,t),$n(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{pl(e.containerInfo)}catch(V){Xe(t,t.return,V)}break;case 4:Ln(e,t),$n(t);break;case 13:Ln(e,t),$n(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(zp=nt())),i&4&&l_(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(m=bt)||v,Ln(e,t),bt=m):Ln(e,t),$n(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(te=t,v=t.child;v!==null;){for(T=te=v;te!==null;){switch(I=te,M=I.child,I.tag){case 0:case 11:case 14:case 15:el(4,I,I.return);break;case 1:lo(I,I.return);var F=I.stateNode;if(typeof F.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,F.props=e.memoizedProps,F.state=e.memoizedState,F.componentWillUnmount()}catch(V){Xe(i,n,V)}}break;case 5:lo(I,I.return);break;case 22:if(I.memoizedState!==null){c_(T);continue}}M!==null?(M.return=I,te=M):c_(T)}v=v.sibling}e:for(v=null,T=t;;){if(T.tag===5){if(v===null){v=T;try{s=T.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=T.stateNode,d=T.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=ey("display",l))}catch(V){Xe(t,t.return,V)}}}else if(T.tag===6){if(v===null)try{T.stateNode.nodeValue=m?"":T.memoizedProps}catch(V){Xe(t,t.return,V)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===t)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===t)break e;for(;T.sibling===null;){if(T.return===null||T.return===t)break e;v===T&&(v=null),T=T.return}v===T&&(v=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:Ln(e,t),$n(t),i&4&&l_(t);break;case 21:break;default:Ln(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xw(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(cl(s,""),i.flags&=-33);var o=a_(t);Pf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=a_(t);If(t,h,l);break;default:throw Error(Q(161))}}catch(d){Xe(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MP(t,e,n){te=t,Cw(t)}function Cw(t,e,n){for(var i=(t.mode&1)!==0;te!==null;){var s=te,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Gu;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||bt;h=Gu;var m=bt;if(Gu=l,(bt=d)&&!m)for(te=s;te!==null;)l=te,d=l.child,l.tag===22&&l.memoizedState!==null?h_(s):d!==null?(d.return=l,te=d):h_(s);for(;o!==null;)te=o,Cw(o),o=o.sibling;te=s,Gu=h,bt=m}u_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,te=o):u_(t)}}function u_(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||yh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!bt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Nn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Zg(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zg(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var T=v.dehydrated;T!==null&&pl(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}bt||e.flags&512&&Tf(e)}catch(I){Xe(e,e.return,I)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function c_(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function h_(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yh(4,e)}catch(d){Xe(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Xe(e,s,d)}}var o=e.return;try{Tf(e)}catch(d){Xe(e,o,d)}break;case 5:var l=e.return;try{Tf(e)}catch(d){Xe(e,l,d)}}}catch(d){Xe(e,e.return,d)}if(e===t){te=null;break}var h=e.sibling;if(h!==null){h.return=e.return,te=h;break}te=e.return}}var DP=Math.ceil,jc=Mi.ReactCurrentDispatcher,Vp=Mi.ReactCurrentOwner,Tn=Mi.ReactCurrentBatchConfig,Ce=0,yt=null,at=null,Pt=0,nn=0,uo=Sr(0),dt=0,Sl=null,rs=0,wh=0,Fp=0,tl=null,qt=null,zp=0,Ao=1/0,mi=null,Hc=!1,Sf=null,dr=null,Ku=!1,sr=null,Wc=0,nl=0,xf=null,dc=-1,fc=0;function Bt(){return Ce&6?nt():dc!==-1?dc:dc=nt()}function fr(t){return t.mode&1?Ce&2&&Pt!==0?Pt&-Pt:yP.transition!==null?(fc===0&&(fc=fy()),fc):(t=be,t!==0||(t=window.event,t=t===void 0?16:wy(t.type)),t):1}function Vn(t,e,n,i){if(50<nl)throw nl=0,xf=null,Error(Q(185));Dl(t,n,i),(!(Ce&2)||t!==yt)&&(t===yt&&(!(Ce&2)&&(wh|=n),dt===4&&er(t,Pt)),Xt(t,i),n===1&&Ce===0&&!(e.mode&1)&&(Ao=nt()+500,gh&&xr()))}function Xt(t,e){var n=t.callbackNode;yI(t,e);var i=Ac(t,t===yt?Pt:0);if(i===0)n!==null&&wg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&wg(n),e===1)t.tag===0?vP(d_.bind(null,t)):zy(d_.bind(null,t)),pP(function(){!(Ce&6)&&xr()}),n=null;else{switch(py(i)){case 1:n=hp;break;case 4:n=hy;break;case 16:n=xc;break;case 536870912:n=dy;break;default:n=xc}n=Vw(n,Rw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rw(t,e){if(dc=-1,fc=0,Ce&6)throw Error(Q(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var i=Ac(t,t===yt?Pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=$c(t,i);else{e=i;var s=Ce;Ce|=2;var o=Nw();(yt!==t||Pt!==e)&&(mi=null,Ao=nt()+500,Xr(t,e));do try{zP();break}catch(h){Lw(t,h)}while(!0);Pp(),jc.current=o,Ce=s,at!==null?e=0:(yt=null,Pt=0,e=dt)}if(e!==0){if(e===2&&(s=Xd(t),s!==0&&(i=s,e=Af(t,s))),e===1)throw n=Sl,Xr(t,0),er(t,i),Xt(t,nt()),n;if(e===6)er(t,i);else{if(s=t.current.alternate,!(i&30)&&!VP(s)&&(e=$c(t,i),e===2&&(o=Xd(t),o!==0&&(i=o,e=Af(t,o))),e===1))throw n=Sl,Xr(t,0),er(t,i),Xt(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:$r(t,qt,mi);break;case 3:if(er(t,i),(i&130023424)===i&&(e=zp+500-nt(),10<e)){if(Ac(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=af($r.bind(null,t,qt,mi),e);break}$r(t,qt,mi);break;case 4:if(er(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Dn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*DP(i/1960))-i,10<i){t.timeoutHandle=af($r.bind(null,t,qt,mi),i);break}$r(t,qt,mi);break;case 5:$r(t,qt,mi);break;default:throw Error(Q(329))}}}return Xt(t,nt()),t.callbackNode===n?Rw.bind(null,t):null}function Af(t,e){var n=tl;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=$c(t,e),t!==2&&(e=qt,qt=n,e!==null&&kf(e)),t}function kf(t){qt===null?qt=t:qt.push.apply(qt,t)}function VP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!zn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~Fp,e&=~wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dn(e),i=1<<n;t[n]=-1,e&=~i}}function d_(t){if(Ce&6)throw Error(Q(327));go();var e=Ac(t,0);if(!(e&1))return Xt(t,nt()),null;var n=$c(t,e);if(t.tag!==0&&n===2){var i=Xd(t);i!==0&&(e=i,n=Af(t,i))}if(n===1)throw n=Sl,Xr(t,0),er(t,e),Xt(t,nt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,qt,mi),Xt(t,nt()),null}function Up(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Ao=nt()+500,gh&&xr())}}function ss(t){sr!==null&&sr.tag===0&&!(Ce&6)&&go();var e=Ce;Ce|=1;var n=Tn.transition,i=be;try{if(Tn.transition=null,be=1,t)return t()}finally{be=i,Tn.transition=n,Ce=e,!(Ce&6)&&xr()}}function Bp(){nn=uo.current,Ue(uo)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fP(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(Ep(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nc();break;case 3:So(),Ue(Qt),Ue(Mt),Rp();break;case 5:Cp(i);break;case 4:So();break;case 13:Ue(qe);break;case 19:Ue(qe);break;case 10:Sp(i.type._context);break;case 22:case 23:Bp()}n=n.return}if(yt=t,at=t=pr(t.current,null),Pt=nn=e,dt=0,Sl=null,Fp=wh=rs=0,qt=tl=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Gr=null}return t}function Lw(t,e){do{var n=at;try{if(Pp(),uc.current=Bc,Uc){for(var i=Ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Uc=!1}if(is=0,vt=ct=Ze=null,Ja=!1,Tl=0,Vp.current=null,n===null||n.return===null){dt=1,Sl=e,at=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=Pt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=h,T=v.tag;if(!(v.mode&1)&&(T===0||T===11||T===15)){var I=v.alternate;I?(v.updateQueue=I.updateQueue,v.memoizedState=I.memoizedState,v.lanes=I.lanes):(v.updateQueue=null,v.memoizedState=null)}var M=Jg(l);if(M!==null){M.flags&=-257,e_(M,l,h,o,e),M.mode&1&&Xg(o,m,e),e=M,d=m;var F=e.updateQueue;if(F===null){var V=new Set;V.add(d),e.updateQueue=V}else F.add(d);break e}else{if(!(e&1)){Xg(o,m,e),jp();break e}d=Error(Q(426))}}else if(He&&h.mode&1){var W=Jg(l);if(W!==null){!(W.flags&65536)&&(W.flags|=256),e_(W,l,h,o,e),Tp(xo(d,h));break e}}o=d=xo(d,h),dt!==4&&(dt=2),tl===null?tl=[o]:tl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=pw(o,d,e);qg(o,b);break e;case 1:h=d;var A=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(dr===null||!dr.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=mw(o,h,e);qg(o,H);break e}}o=o.return}while(o!==null)}Ow(n)}catch(Y){e=Y,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Nw(){var t=jc.current;return jc.current=Bc,t===null?Bc:t}function jp(){(dt===0||dt===3||dt===2)&&(dt=4),yt===null||!(rs&268435455)&&!(wh&268435455)||er(yt,Pt)}function $c(t,e){var n=Ce;Ce|=2;var i=Nw();(yt!==t||Pt!==e)&&(mi=null,Xr(t,e));do try{FP();break}catch(s){Lw(t,s)}while(!0);if(Pp(),Ce=n,jc.current=i,at!==null)throw Error(Q(261));return yt=null,Pt=0,dt}function FP(){for(;at!==null;)bw(at)}function zP(){for(;at!==null&&!cI();)bw(at)}function bw(t){var e=Dw(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?Ow(t):at=e,Vp.current=null}function Ow(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NP(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}else if(n=LP(n,e,nn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);dt===0&&(dt=5)}function $r(t,e,n){var i=be,s=Tn.transition;try{Tn.transition=null,be=1,UP(t,e,n,i)}finally{Tn.transition=s,be=i}return null}function UP(t,e,n,i){do go();while(sr!==null);if(Ce&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(wI(t,o),t===yt&&(at=yt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ku||(Ku=!0,Vw(xc,function(){return go(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Tn.transition,Tn.transition=null;var l=be;be=1;var h=Ce;Ce|=4,Vp.current=null,OP(t,n),kw(n,t),oP(sf),kc=!!rf,sf=rf=null,t.current=n,MP(n),hI(),Ce=h,be=l,Tn.transition=o}else t.current=n;if(Ku&&(Ku=!1,sr=t,Wc=s),o=t.pendingLanes,o===0&&(dr=null),pI(n.stateNode),Xt(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Hc)throw Hc=!1,t=Sf,Sf=null,t;return Wc&1&&t.tag!==0&&go(),o=t.pendingLanes,o&1?t===xf?nl++:(nl=0,xf=t):nl=0,xr(),null}function go(){if(sr!==null){var t=py(Wc),e=Tn.transition,n=be;try{if(Tn.transition=null,be=16>t?16:t,sr===null)var i=!1;else{if(t=sr,sr=null,Wc=0,Ce&6)throw Error(Q(331));var s=Ce;for(Ce|=4,te=t.current;te!==null;){var o=te,l=o.child;if(te.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(te=m;te!==null;){var v=te;switch(v.tag){case 0:case 11:case 15:el(8,v,o)}var T=v.child;if(T!==null)T.return=v,te=T;else for(;te!==null;){v=te;var I=v.sibling,M=v.return;if(Sw(v),v===m){te=null;break}if(I!==null){I.return=M,te=I;break}te=M}}}var F=o.alternate;if(F!==null){var V=F.child;if(V!==null){F.child=null;do{var W=V.sibling;V.sibling=null,V=W}while(V!==null)}}te=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,te=l;else e:for(;te!==null;){if(o=te,o.flags&2048)switch(o.tag){case 0:case 11:case 15:el(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,te=b;break e}te=o.return}}var A=t.current;for(te=A;te!==null;){l=te;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,te=N;else e:for(l=A;te!==null;){if(h=te,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:yh(9,h)}}catch(Y){Xe(h,h.return,Y)}if(h===l){te=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,te=H;break e}te=h.return}}if(Ce=s,xr(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(hh,t)}catch{}i=!0}return i}finally{be=n,Tn.transition=e}}return!1}function f_(t,e,n){e=xo(n,e),e=pw(t,e,1),t=hr(t,e,1),e=Bt(),t!==null&&(Dl(t,1,e),Xt(t,e))}function Xe(t,e,n){if(t.tag===3)f_(t,t,n);else for(;e!==null;){if(e.tag===3){f_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dr===null||!dr.has(i))){t=xo(n,t),t=mw(e,t,1),e=hr(e,t,1),t=Bt(),e!==null&&(Dl(e,1,t),Xt(e,t));break}}e=e.return}}function BP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(Pt&n)===n&&(dt===4||dt===3&&(Pt&130023424)===Pt&&500>nt()-zp?Xr(t,0):Fp|=n),Xt(t,e)}function Mw(t,e){e===0&&(t.mode&1?(e=zu,zu<<=1,!(zu&130023424)&&(zu=4194304)):e=1);var n=Bt();t=Ci(t,e),t!==null&&(Dl(t,e,n),Xt(t,n))}function jP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mw(t,n)}function HP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),Mw(t,n)}var Dw;Dw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,RP(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,He&&e.flags&1048576&&Uy(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;hc(t,e),t=e.pendingProps;var s=To(e,Mt.current);mo(e,n),s=Np(null,e,i,t,s,n);var o=bp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(i)?(o=!0,bc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ap(e),s.updater=vh,e.stateNode=s,s._reactInternals=e,pf(e,i,t,n),e=_f(null,e,i,!0,o,n)):(e.tag=0,He&&o&&wp(e),Ut(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(hc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=$P(i),t=Nn(i,t),s){case 0:e=gf(null,e,i,t,n);break e;case 1:e=i_(null,e,i,t,n);break e;case 11:e=t_(null,e,i,t,n);break e;case 14:e=n_(null,e,i,Nn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),gf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),i_(t,e,i,s,n);case 3:e:{if(yw(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,s=o.element,qy(t,e),Fc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=xo(Error(Q(423)),e),e=r_(t,e,i,n,s);break e}else if(i!==s){s=xo(Error(Q(424)),e),e=r_(t,e,i,n,s);break e}else for(rn=cr(e.stateNode.containerInfo.firstChild),on=e,He=!0,On=null,n=Wy(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Io(),i===s){e=Ri(t,e,n);break e}Ut(t,e,i,n)}e=e.child}return e;case 5:return Zy(e),t===null&&hf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,of(i,s)?l=null:o!==null&&of(i,o)&&(e.flags|=32),vw(t,e),Ut(t,e,l,n),e.child;case 6:return t===null&&hf(e),null;case 13:return ww(t,e,n);case 4:return kp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Po(e,null,i,n):Ut(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),t_(t,e,i,s,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Fe(Dc,i._currentValue),i._currentValue=l,o!==null)if(zn(o.value,l)){if(o.children===s.children&&!Qt.current){e=Ri(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Ii(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),df(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),df(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,mo(e,n),s=In(s),i=i(s),e.flags|=1,Ut(t,e,i,n),e.child;case 14:return i=e.type,s=Nn(i,e.pendingProps),s=Nn(i.type,s),n_(t,e,i,s,n);case 15:return gw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),hc(t,e),e.tag=1,Yt(i)?(t=!0,bc(e)):t=!1,mo(e,n),fw(e,i,s),pf(e,i,s,n),_f(null,e,i,!0,t,n);case 19:return Ew(t,e,n);case 22:return _w(t,e,n)}throw Error(Q(156,e.tag))};function Vw(t,e){return cy(t,e)}function WP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,i){return new WP(t,e,n,i)}function Hp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $P(t){if(typeof t=="function")return Hp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lp)return 11;if(t===up)return 14}return 2}function pr(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Hp(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Js:return Jr(n.children,s,o,e);case ap:l=8,s|=8;break;case Vd:return t=En(12,n,e,s|2),t.elementType=Vd,t.lanes=o,t;case Fd:return t=En(13,n,e,s),t.elementType=Fd,t.lanes=o,t;case zd:return t=En(19,n,e,s),t.elementType=zd,t.lanes=o,t;case Zv:return Eh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $v:l=10;break e;case qv:l=9;break e;case lp:l=11;break e;case up:l=14;break e;case Yi:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=En(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Jr(t,e,n,i){return t=En(7,t,i,e),t.lanes=n,t}function Eh(t,e,n,i){return t=En(22,t,i,e),t.elementType=Zv,t.lanes=n,t.stateNode={isHidden:!1},t}function Td(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Id(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qP(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,i,s,o,l,h,d){return t=new qP(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=En(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(o),t}function ZP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Fw(t){if(!t)return wr;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Yt(n))return Fy(t,n,e)}return e}function zw(t,e,n,i,s,o,l,h,d){return t=Wp(n,i,!0,t,s,o,l,h,d),t.context=Fw(null),n=t.current,i=Bt(),s=fr(n),o=Ii(i,s),o.callback=e??null,hr(n,o,s),t.current.lanes=s,Dl(t,s,i),Xt(t,i),t}function Th(t,e,n,i){var s=e.current,o=Bt(),l=fr(s);return n=Fw(n),e.context===null?e.context=n:e.pendingContext=n,e=Ii(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=hr(s,e,l),t!==null&&(Vn(t,s,l,o),lc(t,s,l)),l}function qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function p_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $p(t,e){p_(t,e),(t=t.alternate)&&p_(t,e)}function GP(){return null}var Uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}Ih.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Th(t,e,null,null)};Ih.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){Th(null,t,null,null)}),e[ki]=null}};function Ih(t){this._internalRoot=t}Ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=_y();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ji.length&&e!==0&&e<Ji[n].priority;n++);Ji.splice(n,0,t),n===0&&yy(t)}};function Zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function m_(){}function KP(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=qc(l);o.call(m)}}var l=zw(e,i,t,0,null,!1,!1,"",m_);return t._reactRootContainer=l,t[ki]=l.current,_l(t.nodeType===8?t.parentNode:t),ss(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=qc(d);h.call(m)}}var d=Wp(t,0,!1,null,null,!1,!1,"",m_);return t._reactRootContainer=d,t[ki]=d.current,_l(t.nodeType===8?t.parentNode:t),ss(function(){Th(e,d,n,i)}),d}function Sh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=qc(l);h.call(d)}}Th(e,l,t,s)}else l=KP(n,e,t,s,i);return qc(l)}my=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ba(e.pendingLanes);n!==0&&(dp(e,n|1),Xt(e,nt()),!(Ce&6)&&(Ao=nt()+500,xr()))}break;case 13:ss(function(){var i=Ci(t,1);if(i!==null){var s=Bt();Vn(i,t,1,s)}}),$p(t,1)}};fp=function(t){if(t.tag===13){var e=Ci(t,134217728);if(e!==null){var n=Bt();Vn(e,t,134217728,n)}$p(t,134217728)}};gy=function(t){if(t.tag===13){var e=fr(t),n=Ci(t,e);if(n!==null){var i=Bt();Vn(n,t,e,i)}$p(t,e)}};_y=function(){return be};vy=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Kd=function(t,e,n){switch(e){case"input":if(jd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=mh(i);if(!s)throw Error(Q(90));Kv(i),jd(i,s)}}}break;case"textarea":Yv(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};ry=Up;sy=ss;var QP={usingClientEntryPoint:!1,Events:[Fl,io,mh,ny,iy,Up]},Oa={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YP={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ly(t),t===null?null:t.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||GP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{hh=Qu.inject(YP),Gn=Qu}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QP;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zp(e))throw Error(Q(200));return ZP(t,e,null,n)};un.createRoot=function(t,e){if(!Zp(t))throw Error(Q(299));var n=!1,i="",s=Uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,i,s),t[ki]=e.current,_l(t.nodeType===8?t.parentNode:t),new qp(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=ly(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return ss(t)};un.hydrate=function(t,e,n){if(!Ph(e))throw Error(Q(200));return Sh(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!Zp(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=Uw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=zw(e,null,t,1,n??null,s,!1,o,l),t[ki]=e.current,_l(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ih(e)};un.render=function(t,e,n){if(!Ph(e))throw Error(Q(200));return Sh(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!Ph(t))throw Error(Q(40));return t._reactRootContainer?(ss(function(){Sh(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};un.unstable_batchedUpdates=Up;un.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ph(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Sh(t,e,n,!1,i)};un.version="18.3.1-next-f1338f8080-20240426";function Bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bw)}catch(t){console.error(t)}}Bw(),Bv.exports=un;var XP=Bv.exports,g_=XP;Md.createRoot=g_.createRoot,Md.hydrateRoot=g_.hydrateRoot;var __={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,v=o>>2,T=(o&3)<<4|h>>4;let I=(h&15)<<2|m>>6,M=m&63;d||(M=64,l||(I=64)),i.push(n[v],n[T],n[I],n[M])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const T=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||T==null)throw new eS;const I=o<<2|h>>4;if(i.push(I),m!==64){const M=h<<4&240|m>>2;if(i.push(M),T!==64){const F=m<<6&192|T;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tS=function(t){const e=jw(t);return Hw.encodeByteArray(e,!0)},Zc=function(t){return tS(t).replace(/\./g,"")},Ww=function(t){try{return Hw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=()=>nS().__FIREBASE_DEFAULTS__,rS=()=>{if(typeof process>"u"||typeof __>"u")return;const t=__.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ww(t[1]);return e&&JSON.parse(e)},xh=()=>{try{return iS()||rS()||sS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$w=t=>{var e,n;return(n=(e=xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oS=t=>{const e=$w(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},qw=()=>{var t;return(t=xh())===null||t===void 0?void 0:t.config},Zw=t=>{var e;return(e=xh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zc(JSON.stringify(n)),Zc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function cS(){var t;const e=(t=xh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pS(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mS(){return!cS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function _S(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="FirebaseError";class Di extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=vS,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ul.prototype.create)}}class Ul{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?yS(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Di(s,h,i)}}function yS(t,e){return t.replace(wS,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const wS=/\{\$([^}]+)}/g;function ES(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(v_(o)&&v_(l)){if(!Gc(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function v_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ha(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Wa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TS(t,e){const n=new IS(t,e);return n.subscribe.bind(n)}class IS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");PS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Pd),s.error===void 0&&(s.error=Pd),s.complete===void 0&&(s.complete=Pd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class os{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new aS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AS(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xS(t){return t===qr?void 0:t}function AS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const CS={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},RS=xe.INFO,LS={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},NS=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=LS[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gp{constructor(e){this.name=e,this._logLevel=RS,this._logHandler=NS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const bS=(t,e)=>e.some(n=>t instanceof n);let y_,w_;function OS(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MS(){return w_||(w_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gw=new WeakMap,Cf=new WeakMap,Kw=new WeakMap,Sd=new WeakMap,Kp=new WeakMap;function DS(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(mr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Gw.set(n,t)}).catch(()=>{}),Kp.set(e,t),e}function VS(t){if(Cf.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Cf.set(t,e)}let Rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FS(t){Rf=t(Rf)}function zS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(xd(this),e,...n);return Kw.set(i,e.sort?e.sort():[e]),mr(i)}:MS().includes(t)?function(...e){return t.apply(xd(this),e),mr(Gw.get(this))}:function(...e){return mr(t.apply(xd(this),e))}}function US(t){return typeof t=="function"?zS(t):(t instanceof IDBTransaction&&VS(t),bS(t,OS())?new Proxy(t,Rf):t)}function mr(t){if(t instanceof IDBRequest)return DS(t);if(Sd.has(t))return Sd.get(t);const e=US(t);return e!==t&&(Sd.set(t,e),Kp.set(e,t)),e}const xd=t=>Kp.get(t);function BS(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=mr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(mr(l.result),d.oldVersion,d.newVersion,mr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const jS=["get","getKey","getAll","getAllKeys","count"],HS=["put","add","delete","clear"],Ad=new Map;function E_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=HS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||jS.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return Ad.set(e,o),o}FS(t=>({...t,get:(e,n,i)=>E_(e,n)||t.get(e,n,i),has:(e,n)=>!!E_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function $S(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lf="@firebase/app",T_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new Gp("@firebase/app"),qS="@firebase/app-compat",ZS="@firebase/analytics-compat",GS="@firebase/analytics",KS="@firebase/app-check-compat",QS="@firebase/app-check",YS="@firebase/auth",XS="@firebase/auth-compat",JS="@firebase/database",ex="@firebase/data-connect",tx="@firebase/database-compat",nx="@firebase/functions",ix="@firebase/functions-compat",rx="@firebase/installations",sx="@firebase/installations-compat",ox="@firebase/messaging",ax="@firebase/messaging-compat",lx="@firebase/performance",ux="@firebase/performance-compat",cx="@firebase/remote-config",hx="@firebase/remote-config-compat",dx="@firebase/storage",fx="@firebase/storage-compat",px="@firebase/firestore",mx="@firebase/vertexai-preview",gx="@firebase/firestore-compat",_x="firebase",vx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",yx={[Lf]:"fire-core",[qS]:"fire-core-compat",[GS]:"fire-analytics",[ZS]:"fire-analytics-compat",[QS]:"fire-app-check",[KS]:"fire-app-check-compat",[YS]:"fire-auth",[XS]:"fire-auth-compat",[JS]:"fire-rtdb",[ex]:"fire-data-connect",[tx]:"fire-rtdb-compat",[nx]:"fire-fn",[ix]:"fire-fn-compat",[rx]:"fire-iid",[sx]:"fire-iid-compat",[ox]:"fire-fcm",[ax]:"fire-fcm-compat",[lx]:"fire-perf",[ux]:"fire-perf-compat",[cx]:"fire-rc",[hx]:"fire-rc-compat",[dx]:"fire-gcs",[fx]:"fire-gcs-compat",[px]:"fire-fst",[gx]:"fire-fst-compat",[mx]:"fire-vertex","fire-js":"fire-js",[_x]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,wx=new Map,bf=new Map;function I_(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ko(t){const e=t.name;if(bf.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;bf.set(e,t);for(const n of Kc.values())I_(n,t);for(const n of wx.values())I_(n,t);return!0}function Qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Ul("app","Firebase",Ex);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=vx;function Qw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Nf,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw gr.create("bad-app-name",{appName:String(s)});if(n||(n=qw()),!n)throw gr.create("no-options");const o=Kc.get(s);if(o){if(Gc(n,o.options)&&Gc(i,o.config))return o;throw gr.create("duplicate-app",{appName:s})}const l=new kS(s);for(const d of bf.values())l.addComponent(d);const h=new Tx(n,i,l);return Kc.set(s,h),h}function Yw(t=Nf){const e=Kc.get(t);if(!e&&t===Nf&&qw())return Qw();if(!e)throw gr.create("no-app",{appName:t});return e}function _r(t,e,n){var i;let s=(i=yx[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(h.join(" "));return}ko(new os(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="firebase-heartbeat-database",Px=1,xl="firebase-heartbeat-store";let kd=null;function Xw(){return kd||(kd=BS(Ix,Px,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xl)}catch(n){console.warn(n)}}}}).catch(t=>{throw gr.create("idb-open",{originalErrorMessage:t.message})})),kd}async function Sx(t){try{const n=(await Xw()).transaction(xl),i=await n.objectStore(xl).get(Jw(t));return await n.done,i}catch(e){if(e instanceof Di)Li.warn(e.message);else{const n=gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function P_(t,e){try{const i=(await Xw()).transaction(xl,"readwrite");await i.objectStore(xl).put(e,Jw(t)),await i.done}catch(n){if(n instanceof Di)Li.warn(n.message);else{const i=gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(i.message)}}}function Jw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=1024,Ax=30*24*60*60*1e3;class kx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=S_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=Ax}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S_(),{heartbeatsToSend:i,unsentEntries:s}=Cx(this._heartbeatsCache.heartbeats),o=Zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Li.warn(n),""}}}function S_(){return new Date().toISOString().substring(0,10)}function Cx(t,e=xx){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),x_(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),x_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Rx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?_S().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Sx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x_(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){ko(new os("platform-logger",e=>new WS(e),"PRIVATE")),ko(new os("heartbeat",e=>new kx(e),"PRIVATE")),_r(Lf,T_,t),_r(Lf,T_,"esm2017"),_r("fire-js","")}Lx("");var Nx="firebase",bx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(Nx,bx,"app");function Yp(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function e0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ox=e0,t0=new Ul("auth","Firebase",e0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Gp("@firebase/auth");function Mx(t,...e){Qc.logLevel<=xe.WARN&&Qc.warn(`Auth (${Uo}): ${t}`,...e)}function mc(t,...e){Qc.logLevel<=xe.ERROR&&Qc.error(`Auth (${Uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw Jp(t,...e)}function Fn(t,...e){return Jp(t,...e)}function Xp(t,e,n){const i=Object.assign(Object.assign({},Ox()),{[e]:n});return new Ul("auth","Firebase",i).create(e,{appName:t.name})}function Pi(t){return Xp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dx(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Sn(t,"argument-error"),Xp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return t0.create(t,...e)}function ue(t,e,...n){if(!t)throw Jp(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function Ni(t,e){t||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Vx(){return A_()==="http:"||A_()==="https:"}function A_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vx()||dS()||"connection"in navigator)?navigator.onLine:!0}function zx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=uS()||fS()}get(){return Fx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new jl(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vi(t,e,n,i,s={}){return i0(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Bl(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return hS()||(m.referrerPolicy="no-referrer"),n0.fetch()(r0(t,t.config.apiHost,n,h),m)})}async function i0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Ux),e);try{const s=new Hx(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Yu(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Yu(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Yu(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Xp(t,v,m);Sn(t,v)}}catch(s){if(s instanceof Di)throw s;Sn(t,"network-request-failed",{message:String(s)})}}async function Hl(t,e,n,i,s={}){const o=await Vi(t,e,n,i,s);return"mfaPendingCredential"in o&&Sn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function r0(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?em(t.config,s):`${t.config.apiScheme}://${s}`}function jx(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),Bx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Fn(t,e,i);return s.customData._tokenResponse=n,s}function k_(t){return t!==void 0&&t.enterprise!==void 0}class Wx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function $x(t,e){return Vi(t,"GET","/v2/recaptchaConfig",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(t,e){return Vi(t,"POST","/v1/accounts:delete",e)}async function s0(t,e){return Vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Zx(t,e=!1){const n=At(t),i=await n.getIdToken(e),s=tm(i);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:il(Cd(s.auth_time)),issuedAtTime:il(Cd(s.iat)),expirationTime:il(Cd(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Cd(t){return Number(t)*1e3}function tm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ww(n);return s?JSON.parse(s):(mc("Failed to decode base64 JWT payload"),null)}catch(s){return mc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function C_(t){const e=tm(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Di&&Gx(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Gx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Co(t,s0(n,{idToken:i}));ue(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?o0(o.providerUserInfo):[],h=Yx(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Mf(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,T)}async function Qx(t){const e=At(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yx(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function o0(t){return t.map(e=>{var{providerId:n}=e,i=Yp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(t,e){const n=await i0(t,{},async()=>{const i=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=r0(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",n0.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jx(t,e){return Vi(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=C_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await Xx(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new _o;return i&&(ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ue(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ei{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Co(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Zx(this,e)}reload(){return Qx(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Pi(this.auth));const e=await this.getIdToken();return await Co(this,qx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,m,v;const T=(i=n.displayName)!==null&&i!==void 0?i:void 0,I=(s=n.email)!==null&&s!==void 0?s:void 0,M=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,F=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(h=n.tenantId)!==null&&h!==void 0?h:void 0,W=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,b=(m=n.createdAt)!==null&&m!==void 0?m:void 0,A=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:N,emailVerified:H,isAnonymous:Y,providerData:q,stsTokenManager:P}=n;ue(N&&P,e,"internal-error");const w=_o.fromJSON(this.name,P);ue(typeof N=="string",e,"internal-error"),Qi(T,e.name),Qi(I,e.name),ue(typeof H=="boolean",e,"internal-error"),ue(typeof Y=="boolean",e,"internal-error"),Qi(M,e.name),Qi(F,e.name),Qi(V,e.name),Qi(W,e.name),Qi(b,e.name),Qi(A,e.name);const S=new Ei({uid:N,auth:e,email:I,emailVerified:H,displayName:T,isAnonymous:Y,photoURL:F,phoneNumber:M,tenantId:V,stsTokenManager:w,createdAt:b,lastLoginAt:A});return q&&Array.isArray(q)&&(S.providerData=q.map(x=>Object.assign({},x))),W&&(S._redirectEventId=W),S}static async _fromIdTokenResponse(e,n,i=!1){const s=new _o;s.updateFromServerResponse(n);const o=new Ei({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Yc(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?o0(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new _o;h.updateFromIdToken(i);const d=new Ei({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Mf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;function Ti(t){Ni(t instanceof Function,"Expected a class definition");let e=R_.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}a0.type="NONE";const L_=a0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e,n){return`firebase:${t}:${e}:${n}`}class vo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=gc(this.userKey,s.apiKey,o),this.fullPersistenceKey=gc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new vo(Ti(L_),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||Ti(L_);const l=gc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(l);if(v){const T=Ei._fromJSON(e,v);m!==o&&(h=T),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new vo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new vo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f0(e))return"Blackberry";if(p0(e))return"Webos";if(u0(e))return"Safari";if((e.includes("chrome/")||c0(e))&&!e.includes("edge/"))return"Chrome";if(d0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function l0(t=Dt()){return/firefox\//i.test(t)}function u0(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c0(t=Dt()){return/crios\//i.test(t)}function h0(t=Dt()){return/iemobile/i.test(t)}function d0(t=Dt()){return/android/i.test(t)}function f0(t=Dt()){return/blackberry/i.test(t)}function p0(t=Dt()){return/webos/i.test(t)}function nm(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function e1(t=Dt()){var e;return nm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function t1(){return pS()&&document.documentMode===10}function m0(t=Dt()){return nm(t)||d0(t)||p0(t)||f0(t)||/windows phone/i.test(t)||h0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t,e=[]){let n;switch(t){case"Browser":n=N_(Dt());break;case"Worker":n=`${N_(Dt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(t,e={}){return Vi(t,"GET","/v2/passwordPolicy",Ar(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=6;class s1{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:r1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b_(this),this.idTokenSubscription=new b_(this),this.beforeStateQueue=new n1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ti(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await s0(this,{idToken:e}),i=await Ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Mn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(Pi(this));const n=e?At(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(Pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i1(this),n=new s1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ul("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Jx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ti(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Mx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kr(t){return At(t)}class b_{constructor(e){this.auth=e,this.observer=null,this.addObserver=TS(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a1(t){Ah=t}function _0(t){return Ah.loadJS(t)}function l1(){return Ah.recaptchaEnterpriseScript}function u1(){return Ah.gapiScript}function c1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const h1="recaptcha-enterprise",d1="NO_RECAPTCHA";class f1{constructor(e){this.type=h1,this.auth=kr(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{$x(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new Wx(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;k_(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(d1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&k_(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=l1();d.length!==0&&(d+=h),_0(d).then(()=>{s(h,o,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function O_(t,e,n,i=!1){const s=new f1(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Df(t,e,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await O_(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await O_(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e){const n=Qp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Gc(o,e??{}))return s;Sn(s,"already-initialized")}return n.initialize({options:e})}function m1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function g1(t,e,n){const i=kr(t);ue(i._canInitEmulator,i,"emulator-config-failed"),ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=v0(e),{host:l,port:h}=_1(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),v1()}function v0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _1(t){const e=v0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:M_(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:M_(l)}}}function M_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function v1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function y1(t,e){return Vi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t,e){return Hl(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function T1(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends im{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Al(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Al(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,n,"signInWithPassword",w1);case"emailLink":return E1(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,i,"signUpPassword",y1);case"emailLink":return T1(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e){return Hl(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="http://localhost";class as extends im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Yp(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new as(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return yo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yo(e,n)}buildRequest(){const e={requestUri:I1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S1(t){const e=Ha(Wa(t)).link,n=e?Ha(Wa(e)).deep_link_id:null,i=Ha(Wa(t)).deep_link_id;return(i?Ha(Wa(i)).link:null)||i||n||e||t}class rm{constructor(e){var n,i,s,o,l,h;const d=Ha(Wa(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,T=P1((s=d.mode)!==null&&s!==void 0?s:null);ue(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=S1(e);try{return new rm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return Al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=rm.parseLink(n);return ue(i,"argument-error"),Al._fromEmailAndCode(e,i.code,i.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends sm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Wl{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return _i.credential(n,i)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Wl{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Wl{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ir.credential(n,i)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e){return Hl(t,"POST","/v1/accounts:signUp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Ei._fromIdTokenResponse(e,i,s),l=D_(i);return new ls({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=D_(i);return new ls({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function D_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Di{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Xc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Xc(e,n,i,s)}}function y0(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Xc._fromErrorAndOperation(t,o,e,i):o})}async function A1(t,e,n=!1){const i=await Co(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e,n=!1){const{auth:i}=t;if(Mn(i.app))return Promise.reject(Pi(i));const s="reauthenticate";try{const o=await Co(t,y0(i,s,e,t),n);ue(o.idToken,i,"internal-error");const l=tm(o.idToken);ue(l,i,"internal-error");const{sub:h}=l;return ue(t.uid===h,i,"user-mismatch"),ls._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Sn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(t,e,n=!1){if(Mn(t.app))return Promise.reject(Pi(t));const i="signIn",s=await y0(t,i,e),o=await ls._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function C1(t,e){return w0(kr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(t){const e=kr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function R1(t,e,n){if(Mn(t.app))return Promise.reject(Pi(t));const i=kr(t),l=await Df(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",x1).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&E0(t),d}),h=await ls._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function L1(t,e,n){return Mn(t.app)?Promise.reject(Pi(t)):C1(At(t),Bo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&E0(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,e){return Vi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=At(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Co(i,N1(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function O1(t,e,n,i){return At(t).onIdTokenChanged(e,n,i)}function M1(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function D1(t,e,n,i){return At(t).onAuthStateChanged(e,n,i)}function V1(t){return At(t).signOut()}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1e3,z1=10;class I0 extends T0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);t1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,z1):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},F1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I0.type="LOCAL";const U1=I0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends T0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}P0.type="SESSION";const S0=P0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new kh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await B1(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=om("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(T){const I=T;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(I.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return window}function H1(t){Qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function W1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q1(){return x0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebaseLocalStorageDb",Z1=1,eh="firebaseLocalStorage",k0="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(t,e){return t.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function G1(){const t=indexedDB.deleteDatabase(A0);return new $l(t).toPromise()}function Vf(){const t=indexedDB.open(A0,Z1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(eh,{keyPath:k0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(eh)?e(i):(i.close(),await G1(),e(await Vf()))})})}async function V_(t,e,n){const i=Ch(t,!0).put({[k0]:e,value:n});return new $l(i).toPromise()}async function K1(t,e){const n=Ch(t,!1).get(e),i=await new $l(n).toPromise();return i===void 0?null:i.value}function F_(t,e){const n=Ch(t,!0).delete(e);return new $l(n).toPromise()}const Q1=800,Y1=3;class C0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Y1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance(q1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await W1(),!this.activeServiceWorker)return;this.sender=new j1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vf();return await V_(e,Jc,"1"),await F_(e,Jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>V_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>K1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Ch(s,!1).getAll();return new $l(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C0.type="LOCAL";const X1=C0;new jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t,e){return e?Ti(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function J1(t){return w0(t.auth,new am(t),t.bypassAuthState)}function eA(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),k1(n,new am(t),t.bypassAuthState)}async function tA(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),A1(n,new am(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J1;case"linkViaPopup":case"linkViaRedirect":return tA;case"reauthViaPopup":case"reauthViaRedirect":return eA;default:Sn(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new jl(2e3,1e4);async function iA(t,e,n){if(Mn(t.app))return Promise.reject(Fn(t,"operation-not-supported-in-this-environment"));const i=kr(t);Dx(t,e,sm);const s=R0(i,n);return new Qr(i,"signInViaPopup",e,s).executeNotNull()}class Qr extends L0{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nA.get())};e()}}Qr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="pendingRedirect",_c=new Map;class sA extends L0{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_c.get(this.auth._key());if(!e){try{const i=await oA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_c.set(this.auth._key(),e)}return this.bypassAuthState||_c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oA(t,e){const n=uA(e),i=lA(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function aA(t,e){_c.set(t._key(),e)}function lA(t){return Ti(t._redirectPersistence)}function uA(t){return gc(rA,t.config.apiKey,t.name)}async function cA(t,e,n=!1){if(Mn(t.app))return Promise.reject(Pi(t));const i=kr(t),s=R0(i,e),l=await new sA(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=10*60*1e3;class dA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!N0(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hA&&this.cachedEventUids.clear(),this.cachedEventUids.has(z_(e))}saveEventToCache(e){this.cachedEventUids.add(z_(e)),this.lastProcessedEventTime=Date.now()}}function z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function N0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t,e={}){return Vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gA=/^https?/;async function _A(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pA(t);for(const n of e)try{if(vA(n))return}catch{}Sn(t,"unauthorized-domain")}function vA(t){const e=Of(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!gA.test(n))return!1;if(mA.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new jl(3e4,6e4);function U_(){const t=Qn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wA(t){return new Promise((e,n)=>{var i,s,o;function l(){U_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U_(),n(Fn(t,"network-request-failed"))},timeout:yA.get()})}if(!((s=(i=Qn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Qn().gapi)===null||o===void 0)&&o.load)l();else{const h=c1("iframefcb");return Qn()[h]=()=>{gapi.load?l():n(Fn(t,"network-request-failed"))},_0(`${u1()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw vc=null,e})}let vc=null;function EA(t){return vc=vc||wA(t),vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new jl(5e3,15e3),IA="__/auth/iframe",PA="emulator/auth/iframe",SA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AA(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?em(e,PA):`https://${t.config.authDomain}/${IA}`,i={apiKey:e.apiKey,appName:t.name,v:Uo},s=xA.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Bl(i).slice(1)}`}async function kA(t){const e=await EA(t),n=Qn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:AA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SA,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Fn(t,"network-request-failed"),h=Qn().setTimeout(()=>{o(l)},TA.get());function d(){Qn().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RA=500,LA=600,NA="_blank",bA="http://localhost";class B_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OA(t,e,n,i=RA,s=LA){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},CA),{width:i.toString(),height:s.toString(),top:o,left:l}),m=Dt().toLowerCase();n&&(h=c0(m)?NA:n),l0(m)&&(e=e||bA,d.scrollbars="yes");const v=Object.entries(d).reduce((I,[M,F])=>`${I}${M}=${F},`,"");if(e1(m)&&h!=="_self")return MA(e||"",h),new B_(null);const T=window.open(e||"",h,v);ue(T,t,"popup-blocked");try{T.focus()}catch{}return new B_(T)}function MA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="__/auth/handler",VA="emulator/auth/handler",FA=encodeURIComponent("fac");async function j_(t,e,n,i,s,o){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Uo,eventId:s};if(e instanceof sm){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",ES(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))l[v]=T}if(e instanceof Wl){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),m=d?`#${FA}=${encodeURIComponent(d)}`:"";return`${zA(t)}?${Bl(h).slice(1)}${m}`}function zA({config:t}){return t.emulator?em(t,VA):`https://${t.authDomain}/${DA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="webStorageSupport";class UA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S0,this._completeRedirectFn=cA,this._overrideRedirectResult=aA}async _openPopup(e,n,i,s){var o;Ni((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await j_(e,n,i,Of(),s);return OA(e,l,om())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await j_(e,n,i,Of(),s);return H1(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ni(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await kA(e),i=new dA(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rd,{type:Rd},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Rd];l!==void 0&&n(!!l),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_A(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m0()||u0()||nm()}}const BA=UA;var H_="@firebase/auth",W_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WA(t){ko(new os("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g0(t)},m=new o1(i,s,o,d);return m1(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ko(new os("auth-internal",e=>{const n=kr(e.getProvider("auth").getImmediate());return(i=>new jA(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(H_,W_,HA(t)),_r(H_,W_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=5*60,qA=Zw("authIdTokenMaxAge")||$A;let $_=null;const ZA=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>qA)return;const s=n==null?void 0:n.token;$_!==s&&($_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GA(t=Yw()){const e=Qp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=p1(t,{popupRedirectResolver:BA,persistence:[X1,U1,S0]}),i=Zw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=ZA(o.toString());M1(n,l,()=>l(n.currentUser)),O1(n,h=>l(h))}}const s=$w("auth");return s&&g1(n,`http://${s}`),n}function KA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}a1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Fn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",KA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WA("Browser");var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,b0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,w){function S(){}S.prototype=w.prototype,P.D=w.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(x,R,D){for(var C=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)C[Qe-2]=arguments[Qe];return w.prototype[R].apply(x,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,w,S){S||(S=0);var x=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)x[R]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(R=0;16>R;++R)x[R]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=P.g[0],S=P.g[1],R=P.g[2];var D=P.g[3],C=w+(D^S&(R^D))+x[0]+3614090360&4294967295;w=S+(C<<7&4294967295|C>>>25),C=D+(R^w&(S^R))+x[1]+3905402710&4294967295,D=w+(C<<12&4294967295|C>>>20),C=R+(S^D&(w^S))+x[2]+606105819&4294967295,R=D+(C<<17&4294967295|C>>>15),C=S+(w^R&(D^w))+x[3]+3250441966&4294967295,S=R+(C<<22&4294967295|C>>>10),C=w+(D^S&(R^D))+x[4]+4118548399&4294967295,w=S+(C<<7&4294967295|C>>>25),C=D+(R^w&(S^R))+x[5]+1200080426&4294967295,D=w+(C<<12&4294967295|C>>>20),C=R+(S^D&(w^S))+x[6]+2821735955&4294967295,R=D+(C<<17&4294967295|C>>>15),C=S+(w^R&(D^w))+x[7]+4249261313&4294967295,S=R+(C<<22&4294967295|C>>>10),C=w+(D^S&(R^D))+x[8]+1770035416&4294967295,w=S+(C<<7&4294967295|C>>>25),C=D+(R^w&(S^R))+x[9]+2336552879&4294967295,D=w+(C<<12&4294967295|C>>>20),C=R+(S^D&(w^S))+x[10]+4294925233&4294967295,R=D+(C<<17&4294967295|C>>>15),C=S+(w^R&(D^w))+x[11]+2304563134&4294967295,S=R+(C<<22&4294967295|C>>>10),C=w+(D^S&(R^D))+x[12]+1804603682&4294967295,w=S+(C<<7&4294967295|C>>>25),C=D+(R^w&(S^R))+x[13]+4254626195&4294967295,D=w+(C<<12&4294967295|C>>>20),C=R+(S^D&(w^S))+x[14]+2792965006&4294967295,R=D+(C<<17&4294967295|C>>>15),C=S+(w^R&(D^w))+x[15]+1236535329&4294967295,S=R+(C<<22&4294967295|C>>>10),C=w+(R^D&(S^R))+x[1]+4129170786&4294967295,w=S+(C<<5&4294967295|C>>>27),C=D+(S^R&(w^S))+x[6]+3225465664&4294967295,D=w+(C<<9&4294967295|C>>>23),C=R+(w^S&(D^w))+x[11]+643717713&4294967295,R=D+(C<<14&4294967295|C>>>18),C=S+(D^w&(R^D))+x[0]+3921069994&4294967295,S=R+(C<<20&4294967295|C>>>12),C=w+(R^D&(S^R))+x[5]+3593408605&4294967295,w=S+(C<<5&4294967295|C>>>27),C=D+(S^R&(w^S))+x[10]+38016083&4294967295,D=w+(C<<9&4294967295|C>>>23),C=R+(w^S&(D^w))+x[15]+3634488961&4294967295,R=D+(C<<14&4294967295|C>>>18),C=S+(D^w&(R^D))+x[4]+3889429448&4294967295,S=R+(C<<20&4294967295|C>>>12),C=w+(R^D&(S^R))+x[9]+568446438&4294967295,w=S+(C<<5&4294967295|C>>>27),C=D+(S^R&(w^S))+x[14]+3275163606&4294967295,D=w+(C<<9&4294967295|C>>>23),C=R+(w^S&(D^w))+x[3]+4107603335&4294967295,R=D+(C<<14&4294967295|C>>>18),C=S+(D^w&(R^D))+x[8]+1163531501&4294967295,S=R+(C<<20&4294967295|C>>>12),C=w+(R^D&(S^R))+x[13]+2850285829&4294967295,w=S+(C<<5&4294967295|C>>>27),C=D+(S^R&(w^S))+x[2]+4243563512&4294967295,D=w+(C<<9&4294967295|C>>>23),C=R+(w^S&(D^w))+x[7]+1735328473&4294967295,R=D+(C<<14&4294967295|C>>>18),C=S+(D^w&(R^D))+x[12]+2368359562&4294967295,S=R+(C<<20&4294967295|C>>>12),C=w+(S^R^D)+x[5]+4294588738&4294967295,w=S+(C<<4&4294967295|C>>>28),C=D+(w^S^R)+x[8]+2272392833&4294967295,D=w+(C<<11&4294967295|C>>>21),C=R+(D^w^S)+x[11]+1839030562&4294967295,R=D+(C<<16&4294967295|C>>>16),C=S+(R^D^w)+x[14]+4259657740&4294967295,S=R+(C<<23&4294967295|C>>>9),C=w+(S^R^D)+x[1]+2763975236&4294967295,w=S+(C<<4&4294967295|C>>>28),C=D+(w^S^R)+x[4]+1272893353&4294967295,D=w+(C<<11&4294967295|C>>>21),C=R+(D^w^S)+x[7]+4139469664&4294967295,R=D+(C<<16&4294967295|C>>>16),C=S+(R^D^w)+x[10]+3200236656&4294967295,S=R+(C<<23&4294967295|C>>>9),C=w+(S^R^D)+x[13]+681279174&4294967295,w=S+(C<<4&4294967295|C>>>28),C=D+(w^S^R)+x[0]+3936430074&4294967295,D=w+(C<<11&4294967295|C>>>21),C=R+(D^w^S)+x[3]+3572445317&4294967295,R=D+(C<<16&4294967295|C>>>16),C=S+(R^D^w)+x[6]+76029189&4294967295,S=R+(C<<23&4294967295|C>>>9),C=w+(S^R^D)+x[9]+3654602809&4294967295,w=S+(C<<4&4294967295|C>>>28),C=D+(w^S^R)+x[12]+3873151461&4294967295,D=w+(C<<11&4294967295|C>>>21),C=R+(D^w^S)+x[15]+530742520&4294967295,R=D+(C<<16&4294967295|C>>>16),C=S+(R^D^w)+x[2]+3299628645&4294967295,S=R+(C<<23&4294967295|C>>>9),C=w+(R^(S|~D))+x[0]+4096336452&4294967295,w=S+(C<<6&4294967295|C>>>26),C=D+(S^(w|~R))+x[7]+1126891415&4294967295,D=w+(C<<10&4294967295|C>>>22),C=R+(w^(D|~S))+x[14]+2878612391&4294967295,R=D+(C<<15&4294967295|C>>>17),C=S+(D^(R|~w))+x[5]+4237533241&4294967295,S=R+(C<<21&4294967295|C>>>11),C=w+(R^(S|~D))+x[12]+1700485571&4294967295,w=S+(C<<6&4294967295|C>>>26),C=D+(S^(w|~R))+x[3]+2399980690&4294967295,D=w+(C<<10&4294967295|C>>>22),C=R+(w^(D|~S))+x[10]+4293915773&4294967295,R=D+(C<<15&4294967295|C>>>17),C=S+(D^(R|~w))+x[1]+2240044497&4294967295,S=R+(C<<21&4294967295|C>>>11),C=w+(R^(S|~D))+x[8]+1873313359&4294967295,w=S+(C<<6&4294967295|C>>>26),C=D+(S^(w|~R))+x[15]+4264355552&4294967295,D=w+(C<<10&4294967295|C>>>22),C=R+(w^(D|~S))+x[6]+2734768916&4294967295,R=D+(C<<15&4294967295|C>>>17),C=S+(D^(R|~w))+x[13]+1309151649&4294967295,S=R+(C<<21&4294967295|C>>>11),C=w+(R^(S|~D))+x[4]+4149444226&4294967295,w=S+(C<<6&4294967295|C>>>26),C=D+(S^(w|~R))+x[11]+3174756917&4294967295,D=w+(C<<10&4294967295|C>>>22),C=R+(w^(D|~S))+x[2]+718787259&4294967295,R=D+(C<<15&4294967295|C>>>17),C=S+(D^(R|~w))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+w&4294967295,P.g[1]=P.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+D&4294967295}i.prototype.u=function(P,w){w===void 0&&(w=P.length);for(var S=w-this.blockSize,x=this.B,R=this.h,D=0;D<w;){if(R==0)for(;D<=S;)s(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<w;)if(x[R++]=P.charCodeAt(D++),R==this.blockSize){s(this,x),R=0;break}}else for(;D<w;)if(x[R++]=P[D++],R==this.blockSize){s(this,x),R=0;break}}this.h=R,this.o+=w},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var w=1;w<P.length-8;++w)P[w]=0;var S=8*this.o;for(w=P.length-8;w<P.length;++w)P[w]=S&255,S/=256;for(this.u(P),P=Array(16),w=S=0;4>w;++w)for(var x=0;32>x;x+=8)P[S++]=this.g[w]>>>x&255;return P};function o(P,w){var S=h;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=w(P)}function l(P,w){this.h=w;for(var S=[],x=!0,R=P.length-1;0<=R;R--){var D=P[R]|0;x&&D==w||(S[R]=D,x=!1)}this.g=S}var h={};function d(P){return-128<=P&&128>P?o(P,function(w){return new l([w|0],0>w?-1:0)}):new l([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return T;if(0>P)return W(m(-P));for(var w=[],S=1,x=0;P>=S;x++)w[x]=P/S|0,S*=4294967296;return new l(w,0)}function v(P,w){if(P.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(P.charAt(0)=="-")return W(v(P.substring(1),w));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(w,8)),x=T,R=0;R<P.length;R+=8){var D=Math.min(8,P.length-R),C=parseInt(P.substring(R,R+D),w);8>D?(D=m(Math.pow(w,D)),x=x.j(D).add(m(C))):(x=x.j(S),x=x.add(m(C)))}return x}var T=d(0),I=d(1),M=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-W(this).m();for(var P=0,w=1,S=0;S<this.g.length;S++){var x=this.i(S);P+=(0<=x?x:4294967296+x)*w,w*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(F(this))return"0";if(V(this))return"-"+W(this).toString(P);for(var w=m(Math.pow(P,6)),S=this,x="";;){var R=H(S,w).g;S=b(S,R.j(w));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=R,F(S))return D+x;for(;6>D.length;)D="0"+D;x=D+x}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function F(P){if(P.h!=0)return!1;for(var w=0;w<P.g.length;w++)if(P.g[w]!=0)return!1;return!0}function V(P){return P.h==-1}t.l=function(P){return P=b(this,P),V(P)?-1:F(P)?0:1};function W(P){for(var w=P.g.length,S=[],x=0;x<w;x++)S[x]=~P.g[x];return new l(S,~P.h).add(I)}t.abs=function(){return V(this)?W(this):this},t.add=function(P){for(var w=Math.max(this.g.length,P.g.length),S=[],x=0,R=0;R<=w;R++){var D=x+(this.i(R)&65535)+(P.i(R)&65535),C=(D>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);x=C>>>16,D&=65535,C&=65535,S[R]=C<<16|D}return new l(S,S[S.length-1]&-2147483648?-1:0)};function b(P,w){return P.add(W(w))}t.j=function(P){if(F(this)||F(P))return T;if(V(this))return V(P)?W(this).j(W(P)):W(W(this).j(P));if(V(P))return W(this.j(W(P)));if(0>this.l(M)&&0>P.l(M))return m(this.m()*P.m());for(var w=this.g.length+P.g.length,S=[],x=0;x<2*w;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<P.g.length;R++){var D=this.i(x)>>>16,C=this.i(x)&65535,Qe=P.i(R)>>>16,ni=P.i(R)&65535;S[2*x+2*R]+=C*ni,A(S,2*x+2*R),S[2*x+2*R+1]+=D*ni,A(S,2*x+2*R+1),S[2*x+2*R+1]+=C*Qe,A(S,2*x+2*R+1),S[2*x+2*R+2]+=D*Qe,A(S,2*x+2*R+2)}for(x=0;x<w;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=w;x<2*w;x++)S[x]=0;return new l(S,0)};function A(P,w){for(;(P[w]&65535)!=P[w];)P[w+1]+=P[w]>>>16,P[w]&=65535,w++}function N(P,w){this.g=P,this.h=w}function H(P,w){if(F(w))throw Error("division by zero");if(F(P))return new N(T,T);if(V(P))return w=H(W(P),w),new N(W(w.g),W(w.h));if(V(w))return w=H(P,W(w)),new N(W(w.g),w.h);if(30<P.g.length){if(V(P)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var S=I,x=w;0>=x.l(P);)S=Y(S),x=Y(x);var R=q(S,1),D=q(x,1);for(x=q(x,2),S=q(S,2);!F(x);){var C=D.add(x);0>=C.l(P)&&(R=R.add(S),D=C),x=q(x,1),S=q(S,1)}return w=b(P,R.j(w)),new N(R,w)}for(R=T;0<=P.l(w);){for(S=Math.max(1,Math.floor(P.m()/w.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),D=m(S),C=D.j(w);V(C)||0<C.l(P);)S-=x,D=m(S),C=D.j(w);F(D)&&(D=I),R=R.add(D),P=b(P,C)}return new N(R,P)}t.A=function(P){return H(this,P).h},t.and=function(P){for(var w=Math.max(this.g.length,P.g.length),S=[],x=0;x<w;x++)S[x]=this.i(x)&P.i(x);return new l(S,this.h&P.h)},t.or=function(P){for(var w=Math.max(this.g.length,P.g.length),S=[],x=0;x<w;x++)S[x]=this.i(x)|P.i(x);return new l(S,this.h|P.h)},t.xor=function(P){for(var w=Math.max(this.g.length,P.g.length),S=[],x=0;x<w;x++)S[x]=this.i(x)^P.i(x);return new l(S,this.h^P.h)};function Y(P){for(var w=P.g.length+1,S=[],x=0;x<w;x++)S[x]=P.i(x)<<1|P.i(x-1)>>>31;return new l(S,P.h)}function q(P,w){var S=w>>5;w%=32;for(var x=P.g.length-S,R=[],D=0;D<x;D++)R[D]=0<w?P.i(D+S)>>>w|P.i(D+S+1)<<32-w:P.i(D+S);return new l(R,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,b0=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,es=l}).apply(typeof q_<"u"?q_:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O0,$a,M0,yc,Ff,D0,V0,F0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var z=u[E];if(!(z in _))break e;_=_[z]}u=u[u.length-1],E=_[u],p=p(E),p!=E&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,E=!1,z={next:function(){if(!E&&_<u.length){var j=_++;return{value:p(j,u[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function T(u,p,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,E),u.apply(p,z)}}return function(){return u.apply(p,arguments)}}function I(u,p,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,I.apply(null,arguments)}function M(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function F(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,z,j){for(var J=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)J[Ne-2]=arguments[Ne];return p.prototype[z].apply(E,J)}}function V(u){const p=u.length;if(0<p){const _=Array(p);for(let E=0;E<p;E++)_[E]=u[E];return _}return[]}function W(u,p){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(d(E)){const z=u.length||0,j=E.length||0;u.length=z+j;for(let J=0;J<j;J++)u[z+J]=E[J]}else u.push(E)}}class b{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function A(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var Y=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function q(u,p,_){for(const E in u)p.call(_,u[E],E,u)}function P(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function w(u){const p={};for(const _ in u)p[_]=u[_];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let _,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(_ in E)u[_]=E[_];for(let j=0;j<S.length;j++)_=S[j],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function R(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function D(u){h.setTimeout(()=>{throw u},0)}function C(){var u=le;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Qe{constructor(){this.h=this.g=null}add(p,_){const E=ni.get();E.set(p,_),this.h?this.h.next=E:this.g=E,this.h=E}}var ni=new b(()=>new lt,u=>u.reset());class lt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Vt,$=!1,le=new Qe,X=()=>{const u=h.Promise.resolve(void 0);Vt=()=>{u.then(ce)}};var ce=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){D(_)}var p=ni;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}$=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function ye(u,p){if(Ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Y){e:{try{H(p.nodeName);var z=!0;break e}catch{}z=!1}z||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}F(ye,Ie);var fe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),Un=0;function Xl(u,p,_,E,z){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!E,this.ha=z,this.key=++Un,this.da=this.fa=!1}function Fi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zi(u){this.src=u,this.g={},this.h=0}zi.prototype.add=function(u,p,_,E,z){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var J=Rr(u,p,E,z);return-1<J?(p=u[J],_||(p.fa=!1)):(p=new Xl(p,this.src,j,!!E,z),p.fa=_,u.push(p)),p};function ii(u,p){var _=p.type;if(_ in u.g){var E=u.g[_],z=Array.prototype.indexOf.call(E,p,void 0),j;(j=0<=z)&&Array.prototype.splice.call(E,z,1),j&&(Fi(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Rr(u,p,_,E){for(var z=0;z<u.length;++z){var j=u[z];if(!j.da&&j.listener==p&&j.capture==!!_&&j.ha==E)return z}return-1}var $o="closure_lm_"+(1e6*Math.random()|0),_s={};function qo(u,p,_,E,z){if(Array.isArray(p)){for(var j=0;j<p.length;j++)qo(u,p[j],_,E,z);return null}return _=tu(_),u&&u[ut]?u.K(p,_,m(E)?!!E.capture:!1,z):Zo(u,p,_,!1,E,z)}function Zo(u,p,_,E,z,j){if(!p)throw Error("Invalid event type");var J=m(z)?!!z.capture:!!z,Ne=Es(u);if(Ne||(u[$o]=Ne=new zi(u)),_=Ne.add(p,_,E,J,j),_.proxy)return _;if(E=vs(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)Le||(z=J),z===void 0&&(z=!1),u.addEventListener(p.toString(),E,z);else if(u.attachEvent)u.attachEvent(ws(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function vs(){function u(_){return p.call(u.src,u.listener,_)}const p=eu;return u}function Jl(u,p,_,E,z){if(Array.isArray(p))for(var j=0;j<p.length;j++)Jl(u,p[j],_,E,z);else E=m(E)?!!E.capture:!!E,_=tu(_),u&&u[ut]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],_=Rr(j,_,E,z),-1<_&&(Fi(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=Es(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Rr(p,_,E,z)),(_=-1<u?p[u]:null)&&ys(_))}function ys(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ut])ii(p.i,u);else{var _=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(_,E,u.capture):p.detachEvent?p.detachEvent(ws(_),E):p.addListener&&p.removeListener&&p.removeListener(E),(_=Es(p))?(ii(_,u),_.h==0&&(_.src=null,p[$o]=null)):Fi(u)}}}function ws(u){return u in _s?_s[u]:_s[u]="on"+u}function eu(u,p){if(u.da)u=!0;else{p=new ye(p,this);var _=u.listener,E=u.ha||u.src;u.fa&&ys(u),u=_.call(E,p)}return u}function Es(u){return u=u[$o],u instanceof zi?u:null}var Go="__closure_events_fn_"+(1e9*Math.random()>>>0);function tu(u){return typeof u=="function"?u:(u[Go]||(u[Go]=function(p){return u.handleEvent(p)}),u[Go])}function it(){_e.call(this),this.i=new zi(this),this.M=this,this.F=null}F(it,_e),it.prototype[ut]=!0,it.prototype.removeEventListener=function(u,p,_,E){Jl(this,u,p,_,E)};function pt(u,p){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new Ie(p,u);else if(p instanceof Ie)p.target=p.target||u;else{var z=p;p=new Ie(E,u),x(p,z)}if(z=!0,_)for(var j=_.length-1;0<=j;j--){var J=p.g=_[j];z=Lr(J,E,!0,p)&&z}if(J=p.g=u,z=Lr(J,E,!0,p)&&z,z=Lr(J,E,!1,p)&&z,_)for(j=0;j<_.length;j++)J=p.g=_[j],z=Lr(J,E,!1,p)&&z}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],E=0;E<_.length;E++)Fi(_[E]);delete u.g[p],u.h--}}this.F=null},it.prototype.K=function(u,p,_,E){return this.i.add(String(u),p,!1,_,E)},it.prototype.L=function(u,p,_,E){return this.i.add(String(u),p,!0,_,E)};function Lr(u,p,_,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var z=!0,j=0;j<p.length;++j){var J=p[j];if(J&&!J.da&&J.capture==_){var Ne=J.listener,rt=J.ha||J.src;J.fa&&ii(u.i,J),z=Ne.call(rt,E)!==!1&&z}}return z&&!E.defaultPrevented}function nu(u,p,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Ko(u){u.g=nu(()=>{u.g=null,u.i&&(u.i=!1,Ko(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class iu extends _e{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ko(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(u){_e.call(this),this.h=u,this.g={}}F(Nr,_e);var Qo=[];function Ts(u){q(u.g,function(p,_){this.g.hasOwnProperty(_)&&ys(p)},u),u.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),Ts(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=h.JSON.stringify,Wh=h.JSON.parse,br=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Yo(){}Yo.prototype.h=null;function ru(u){return u.h||(u.h=u.i())}function Xo(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ps(){Ie.call(this,"d")}F(Ps,Ie);function Jo(){Ie.call(this,"c")}F(Jo,Ie);var ri={},su=null;function Ss(){return su=su||new it}ri.La="serverreachability";function ou(u){Ie.call(this,ri.La,u)}F(ou,Ie);function Or(u){const p=Ss();pt(p,new ou(p))}ri.STAT_EVENT="statevent";function xs(u,p){Ie.call(this,ri.STAT_EVENT,u),this.stat=p}F(xs,Ie);function wt(u){const p=Ss();pt(p,new xs(p,u))}ri.Ma="timingevent";function au(u,p){Ie.call(this,ri.Ma,u),this.size=p}F(au,Ie);function Mr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Dr(){this.g=!0}Dr.prototype.xa=function(){this.g=!1};function hn(u,p,_,E,z,j){u.info(function(){if(u.g)if(j)for(var J="",Ne=j.split("&"),rt=0;rt<Ne.length;rt++){var Ae=Ne[rt].split("=");if(1<Ae.length){var De=Ae[0];Ae=Ae[1];var $e=De.split("_");J=2<=$e.length&&$e[1]=="type"?J+(De+"="+Ae+"&"):J+(De+"=redacted&")}}else J=null;else J=j;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+p+`
`+_+`
`+J})}function ie(u,p,_,E,z,j,J){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+p+`
`+_+`
`+j+" "+J})}function si(u,p,_,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+uu(u,_)+(E?" "+E:"")})}function lu(u,p){u.info(function(){return"TIMEOUT: "+p})}Dr.prototype.info=function(){};function uu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var z=E[1];if(Array.isArray(z)&&!(1>z.length)){var j=z[0];if(j!="noop"&&j!="stop"&&j!="close")for(var J=1;J<z.length;J++)z[J]=""}}}}return Is(_)}catch{return p}}var Vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},As={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ks;function xn(){}F(xn,Yo),xn.prototype.g=function(){return new XMLHttpRequest},xn.prototype.i=function(){return{}},ks=new xn;function An(u,p,_,E){this.j=u,this.i=p,this.l=_,this.R=E||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var hu={},ea={};function ta(u,p,_){u.L=1,u.v=fn(Ye(p)),u.m=_,u.P=!0,na(u,null)}function na(u,p){u.F=Date.now(),Rs(u),u.A=Ye(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),pu(_.i,"t",E),u.C=0,_=u.j.J,u.h=new cu,u.g=Eu(u.j,_?p:null,!u.m),0<u.O&&(u.M=new iu(I(u.Y,u,u.g),u.O)),p=u.U,_=u.g,E=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Qo[0]=z.toString()),z=Qo);for(var j=0;j<z.length;j++){var J=qo(_,z[j],E||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Or(),hn(u.i,u.u,u.A,u.l,u.R,u.m)}An.prototype.ca=function(u){u=u.target;const p=this.M;p&&Ft(u)==3?p.j():this.Y(u)},An.prototype.Y=function(u){try{if(u==this.g)e:{const $e=Ft(this.g);var p=this.g.Ba();const Zi=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||$e!=4||p==7||(p==8||0>=Zi?Or(3):Or(2)),ia(this);var _=this.g.Z();this.X=_;t:if(du(this)){var E=va(this.g);u="";var z=E.length,j=Ft(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),Fr(this);var J="";break t}this.h.i=new h.TextDecoder}for(p=0;p<z;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(j&&p==z-1)});E.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,ie(this.i,this.u,this.A,this.l,this.R,$e,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,rt=this.g;if((Ne=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Ne)){var Ae=Ne;break t}}Ae=null}if(_=Ae)si(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zr(this,_);else{this.o=!1,this.s=3,wt(12),oi(this),Fr(this);break e}}if(this.P){_=!0;let et;for(;!this.J&&this.C<J.length;)if(et=Cs(this,J),et==ea){$e==4&&(this.s=4,wt(14),_=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(et==hu){this.s=4,wt(15),si(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else si(this.i,this.l,et,null),zr(this,et);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||J.length!=0||this.h.h||(this.s=1,wt(16),_=!1),this.o=this.o&&_,!_)si(this.i,this.l,J,"[Invalid Chunked Response]"),oi(this),Fr(this);else if(0<J.length&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.ba&&!De.M&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),zs(De),De.M=!0,wt(11))}}else si(this.i,this.l,J,null),zr(this,J);$e==4&&oi(this),this.o&&!this.J&&($e==4?wa(this.j,this):(this.o=!1,Rs(this)))}else $h(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),oi(this),Fr(this)}}}catch{}finally{}};function du(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Cs(u,p){var _=u.C,E=p.indexOf(`
`,_);return E==-1?ea:(_=Number(p.substring(_,E)),isNaN(_)?hu:(E+=1,E+_>p.length?ea:(p=p.slice(E,E+_),u.C=E+_,p)))}An.prototype.cancel=function(){this.J=!0,oi(this)};function Rs(u){u.S=Date.now()+u.I,fu(u,u.I)}function fu(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Mr(I(u.ba,u),p)}function ia(u){u.B&&(h.clearTimeout(u.B),u.B=null)}An.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(lu(this.i,this.A),this.L!=2&&(Or(),wt(17)),oi(this),this.s=2,Fr(this)):fu(this,this.S-u)};function Fr(u){u.j.G==0||u.J||wa(u.j,u)}function oi(u){ia(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ts(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function zr(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Pe(_.h,u))){if(!u.K&&Pe(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Bs(_),Vs(_);else break e;Fs(_),wt(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=Mr(I(_.Za,_),6e3));if(1>=Bi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else hi(_,11)}else if((u.K||_.g==u)&&Bs(_),!A(p))for(z=_.Da.g.parse(p),p=0;p<z.length;p++){let Ae=z[p];if(_.T=Ae[0],Ae=Ae[1],_.G==2)if(Ae[0]=="c"){_.K=Ae[1],_.ia=Ae[2];const De=Ae[3];De!=null&&(_.la=De,_.j.info("VER="+_.la));const $e=Ae[4];$e!=null&&(_.Aa=$e,_.j.info("SVER="+_.Aa));const Zi=Ae[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(E=1.5*Zi,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const et=u.g;if(et){const Hs=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var j=E.h;j.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ve(j,j.h),j.h=null))}if(E.D){const Hn=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(E.ya=Hn,he(E.I,E.D,Hn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var J=u;if(E.qa=js(E,E.J?E.ia:null,E.W),J.K){Br(E.h,J);var Ne=J,rt=E.L;rt&&(Ne.I=rt),Ne.B&&(ia(Ne),Rs(Ne)),E.g=J}else Rn(E);0<_.i.length&&qi(_)}else Ae[0]!="stop"&&Ae[0]!="close"||hi(_,7);else _.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?hi(_,7):Ds(_):Ae[0]!="noop"&&_.l&&_.l.ta(Ae),_.v=0)}}Or(4)}catch{}}var Ur=class{constructor(u,p){this.g=u,this.map=p}};function ra(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bi(u){return u.h?1:u.g?u.g.size:0}function Pe(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ve(u,p){u.g?u.g.add(p):u.h=p}function Br(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ra.prototype.cancel=function(){if(this.i=ai(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ai(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return V(u.i)}function ji(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],_=u.length,E=0;E<_;E++)p.push(u[E]);return p}p=[],_=0;for(E in u)p[_++]=u[E];return p}function oa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const E in u)p[_++]=E;return p}}}function ge(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=oa(u),E=ji(u),z=E.length,j=0;j<z;j++)p.call(void 0,E[j],_&&_[j],u)}var Be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aa(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),z=null;if(0<=E){var j=u[_].substring(0,E);z=u[_].substring(E+1)}else j=u[_];p(j,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function dn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof dn){this.h=u.h,Ls(this,u.j),this.o=u.o,this.g=u.g,li(this,u.s),this.l=u.l;var p=u.i,_=new ui;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Bn(this,_),this.m=u.m}else u&&(p=String(u).match(Be))?(this.h=!1,Ls(this,p[1]||"",!0),this.o=kn(p[2]||""),this.g=kn(p[3]||"",!0),li(this,p[4]),this.l=kn(p[5]||"",!0),Bn(this,p[6]||"",!0),this.m=kn(p[7]||"")):(this.h=!1,this.i=new ui(null,this.h))}dn.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Cn(p,Hi,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Cn(p,Hi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Cn(_,_.charAt(0)=="/"?ca:ua,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Cn(_,ha)),u.join("")};function Ye(u){return new dn(u)}function Ls(u,p,_){u.j=_?kn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function li(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Bn(u,p,_){p instanceof ui?(u.i=p,pn(u.i,u.h)):(_||(p=Cn(p,Ns)),u.i=new ui(p,u.h))}function he(u,p,_){u.i.set(p,_)}function fn(u){return he(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function kn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cn(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,la),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function la(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Hi=/[#\/\?@]/g,ua=/[#\?:]/g,ca=/[#\?]/g,Ns=/[#\?@]/g,ha=/#/g;function ui(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Jt(u){u.g||(u.g=new Map,u.h=0,u.i&&aa(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=ui.prototype,t.add=function(u,p){Jt(this),this.i=null,u=oe(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function da(u,p){Jt(u),p=oe(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function bs(u,p){return Jt(u),p=oe(u,p),u.g.has(p)}t.forEach=function(u,p){Jt(this),this.g.forEach(function(_,E){_.forEach(function(z){u.call(p,z,E,this)},this)},this)},t.na=function(){Jt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let E=0;E<p.length;E++){const z=u[E];for(let j=0;j<z.length;j++)_.push(p[E])}return _},t.V=function(u){Jt(this);let p=[];if(typeof u=="string")bs(this,u)&&(p=p.concat(this.g.get(oe(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return Jt(this),this.i=null,u=oe(this,u),bs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function pu(u,p,_){da(u,p),0<_.length&&(u.i=null,u.g.set(oe(u,p),V(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var E=p[_];const j=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var z=j;J[E]!==""&&(z+="="+encodeURIComponent(String(J[E]))),u.push(z)}}return this.i=u.join("&")};function oe(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function pn(u,p){p&&!u.j&&(Jt(u),u.i=null,u.g.forEach(function(_,E){var z=E.toLowerCase();E!=z&&(da(this,E),pu(this,z,_))},u)),u.j=p}function Me(u,p){const _=new Dr;if(h.Image){const E=new Image;E.onload=M(mn,_,"TestLoadImage: loaded",!0,p,E),E.onerror=M(mn,_,"TestLoadImage: error",!1,p,E),E.onabort=M(mn,_,"TestLoadImage: abort",!1,p,E),E.ontimeout=M(mn,_,"TestLoadImage: timeout",!1,p,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function mu(u,p){const _=new Dr,E=new AbortController,z=setTimeout(()=>{E.abort(),mn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(j=>{clearTimeout(z),j.ok?mn(_,"TestPingServer: ok",!0,p):mn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),mn(_,"TestPingServer: error",!1,p)})}function mn(u,p,_,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(_)}catch{}}function fa(){this.g=new br}function pa(u,p,_){const E=_||"";try{ge(u,function(z,j){let J=z;m(z)&&(J=Is(z)),p.push(E+j+"="+encodeURIComponent(J))})}catch(z){throw p.push(E+"type="+encodeURIComponent("_badmap")),z}}function gn(u){this.l=u.Ub||null,this.j=u.eb||!1}F(gn,Yo),gn.prototype.g=function(){return new Wi(this.l,this.j)},gn.prototype.i=function(u){return function(){return u}}({});function Wi(u,p){it.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Wi,it),t=Wi.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,en(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,We(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,en(this)),this.g&&(this.readyState=3,en(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$i(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $i(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?We(this):en(this),this.readyState==3&&$i(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,We(this))},t.Qa=function(u){this.g&&(this.response=u,We(this))},t.ga=function(){this.g&&We(this)};function We(u){u.readyState=4,u.l=null,u.j=null,u.v=null,en(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function en(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ma(u){let p="";return q(u,function(_,E){p+=E,p+=":",p+=_,p+=`\r
`}),p}function Os(u,p,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=ma(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):he(u,p,_))}function je(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(je,it);var gu=/^https?$/i,ga=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ks.g(),this.v=this.o?ru(this.o):ru(ks),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){_u(this,j);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)_.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())_.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),z=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ga,p,void 0))||E||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,J]of _)this.g.setRequestHeader(j,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){_u(this,j)}};function _u(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,_a(u),Ms(u)}function _a(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,pt(this,"complete"),pt(this,"abort"),Ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ee(this):this.bb())},t.bb=function(){Ee(this)};function Ee(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Ft(u)!=4||u.Z()!=2)){if(u.u&&Ft(u)==4)nu(u.Ea,0,u);else if(pt(u,"readystatechange"),Ft(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var E;if(E=J===0){var z=String(u.D).match(Be)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),E=!gu.test(z?z.toLowerCase():"")}_=E}if(_)pt(u,"complete"),pt(u,"success");else{u.m=6;try{var j=2<Ft(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",_a(u)}}finally{Ms(u)}}}}function Ms(u,p){if(u.g){Wt(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||pt(u,"ready");try{_.onreadystatechange=E}catch{}}}function Wt(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ft(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ft(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Wh(p)}};function va(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $h(u){const p={};u=(u.g&&2<=Ft(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(A(u[E]))continue;var _=R(u[E]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=p[z]||[];p[z]=j,j.push(_)}P(p,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function vu(u){this.Aa=0,this.i=[],this.j=new Dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ci("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ci("baseRetryDelayMs",5e3,u),this.cb=ci("retryDelaySeedMs",1e4,u),this.Wa=ci("forwardChannelMaxRetries",2,u),this.wa=ci("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ra(u&&u.concurrentRequestLimit),this.Da=new fa,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vu.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,E){wt(0),this.W=u,this.H=p||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=js(this,null,this.W),qi(this)};function Ds(u){if(yu(u),u.G==3){var p=u.U++,_=Ye(u.I);if(he(_,"SID",u.K),he(_,"RID",p),he(_,"TYPE","terminate"),jr(u,_),p=new An(u,u.j,p),p.L=2,p.v=fn(Ye(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=Eu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Rs(p)}wu(u)}function Vs(u){u.g&&(zs(u),u.g.cancel(),u.g=null)}function yu(u){Vs(u),u.u&&(h.clearTimeout(u.u),u.u=null),Bs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function qi(u){if(!sa(u.h)&&!u.s){u.s=!0;var p=u.Ga;Vt||X(),$||(Vt(),$=!0),le.add(p,u),u.B=0}}function qh(u,p){return Bi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Mr(I(u.Ga,u,p),Ea(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new An(this,this.j,u);let j=this.o;if(this.S&&(j?(j=w(j),x(j,this.S)):j=this.S),this.m!==null||this.O||(z.H=j,j=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ya(this,z,p),_=Ye(this.I),he(_,"RID",u),he(_,"CVER",22),this.D&&he(_,"X-HTTP-Session-Id",this.D),jr(this,_),j&&(this.O?p="headers="+encodeURIComponent(String(ma(j)))+"&"+p:this.m&&Os(_,this.m,j)),Ve(this.h,z),this.Ua&&he(_,"TYPE","init"),this.P?(he(_,"$req",p),he(_,"SID","null"),z.T=!0,ta(z,_,null)):ta(z,_,p),this.G=2}}else this.G==3&&(u?tn(this,u):this.i.length==0||sa(this.h)||tn(this))};function tn(u,p){var _;p?_=p.l:_=u.U++;const E=Ye(u.I);he(E,"SID",u.K),he(E,"RID",_),he(E,"AID",u.T),jr(u,E),u.m&&u.o&&Os(E,u.m,u.o),_=new An(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ya(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ve(u.h,_),ta(_,E,p)}function jr(u,p){u.H&&q(u.H,function(_,E){he(p,E,_)}),u.l&&ge({},function(_,E){he(p,E,_)})}function ya(u,p,_){_=Math.min(u.i.length,_);var E=u.l?I(u.l.Na,u.l,u):null;e:{var z=u.i;let j=-1;for(;;){const J=["count="+_];j==-1?0<_?(j=z[0].g,J.push("ofs="+j)):j=0:J.push("ofs="+j);let Ne=!0;for(let rt=0;rt<_;rt++){let Ae=z[rt].g;const De=z[rt].map;if(Ae-=j,0>Ae)j=Math.max(0,z[rt].g-100),Ne=!1;else try{pa(De,J,"req"+Ae+"_")}catch{E&&E(De)}}if(Ne){E=J.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,E}function Rn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Vt||X(),$||(Vt(),$=!0),le.add(p,u),u.v=0}}function Fs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Mr(I(u.Fa,u),Ea(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Us(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Mr(I(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Vs(this),Us(this))};function zs(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Us(u){u.g=new An(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Ye(u.qa);he(p,"RID","rpc"),he(p,"SID",u.K),he(p,"AID",u.T),he(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&he(p,"TO",u.ja),he(p,"TYPE","xmlhttp"),jr(u,p),u.m&&u.o&&Os(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=fn(Ye(p)),_.m=null,_.P=!0,na(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Vs(this),Fs(this),wt(19))};function Bs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function wa(u,p){var _=null;if(u.g==p){Bs(u),zs(u),u.g=null;var E=2}else if(Pe(u.h,p))_=p.D,Br(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var z=u.B;E=Ss(),pt(E,new au(E,_)),qi(u)}else Rn(u);else if(z=p.s,z==3||z==0&&0<p.X||!(E==1&&qh(u,p)||E==2&&Fs(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),z){case 1:hi(u,5);break;case 4:hi(u,10);break;case 3:hi(u,6);break;default:hi(u,2)}}}function Ea(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function hi(u,p){if(u.j.info("Error code "+p),p==2){var _=I(u.fb,u),E=u.Xa;const z=!E;E=new dn(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ls(E,"https"),fn(E),z?Me(E.toString(),_):mu(E.toString(),_)}else wt(2);u.G=0,u.l&&u.l.sa(p),wu(u),yu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function wu(u){if(u.G=0,u.ka=[],u.l){const p=ai(u.h);(p.length!=0||u.i.length!=0)&&(W(u.ka,p),W(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function js(u,p,_){var E=_ instanceof dn?Ye(_):new dn(_);if(E.g!="")p&&(E.g=p+"."+E.g),li(E,E.s);else{var z=h.location;E=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;var j=new dn(null);E&&Ls(j,E),p&&(j.g=p),z&&li(j,z),_&&(j.l=_),E=j}return _=u.D,p=u.ya,_&&p&&he(E,_,p),he(E,"VER",u.la),jr(u,E),E}function Eu(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new je(new gn({eb:_})):new je(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ta(){}t=Ta.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hr(){}Hr.prototype.g=function(u,p){return new mt(u,p)};function mt(u,p){it.call(this),this.g=new vu(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!A(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new _n(this)}F(mt,it),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Ds(this.g)},mt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Is(u),u=_);p.i.push(new Ur(p.Ya++,u)),p.G==3&&qi(p)},mt.prototype.N=function(){this.g.l=null,delete this.j,Ds(this.g),delete this.g,mt.aa.N.call(this)};function jn(u){Ps.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}F(jn,Ps);function Tu(){Jo.call(this),this.status=1}F(Tu,Jo);function _n(u){this.g=u}F(_n,Ta),_n.prototype.ua=function(){pt(this.g,"a")},_n.prototype.ta=function(u){pt(this.g,new jn(u))},_n.prototype.sa=function(u){pt(this.g,new Tu)},_n.prototype.ra=function(){pt(this.g,"b")},Hr.prototype.createWebChannel=Hr.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,F0=function(){return new Hr},V0=function(){return Ss()},D0=ri,Ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,yc=Vr,As.COMPLETE="complete",M0=As,Xo.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",it.prototype.listen=it.prototype.K,$a=Xo,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,O0=je}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const Z_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Gp("@firebase/firestore");function Ma(){return us.logLevel}function ne(t,...e){if(us.logLevel<=xe.DEBUG){const n=e.map(lm);us.debug(`Firestore (${jo}): ${t}`,...n)}}function bi(t,...e){if(us.logLevel<=xe.ERROR){const n=e.map(lm);us.error(`Firestore (${jo}): ${t}`,...n)}}function Ro(t,...e){if(us.logLevel<=xe.WARN){const n=e.map(lm);us.warn(`Firestore (${jo}): ${t}`,...n)}}function lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: `+t;throw bi(e),new Error(e)}function Oe(t,e){t||de()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class YA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class XA{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string"),new z0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Nt(e)}}class JA{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ek{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new JA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Oe(this.o===void 0);const i=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new tk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=ik(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function Re(t,e){return t<e?-1:t>e?1:0}function Lo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new ft(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new ft(0,0))}static max(){return new pe(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,i){n===void 0?n=0:n>e.length&&de(),i===void 0?i=e.length-n:i>e.length-n&&de(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return kl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends kl{construct(e,n,i){return new Je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends kl{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Je.fromString(e))}static fromName(e){return new se(Je.fromString(e).popFirst(5))}static empty(){return new se(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Je(e.slice()))}}function sk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(i===1e9?new ft(n+1,0):new ft(n,i));return new Er(s,se.empty(),e)}function ok(t){return new Er(t.readTime,t.key,-1)}class Er{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Er(pe.min(),se.empty(),-1)}static max(){return new Er(pe.max(),se.empty(),-1)}}function ak(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==lk)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(s=>s?G.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new G((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(v=>{l[m]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new G((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function ck(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}um.oe=-1;function Rh(t){return t==null}function th(t){return t===0&&1/t==-1/0}function hk(t){return typeof t=="number"&&Number.isInteger(t)&&!th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Tt.RED,this.left=s??Tt.EMPTY,this.right=o??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Tt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,i,s,o){return this}insert(e,n,i){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(e){return new K_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class K_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new sn([])}unionWith(e){let n=new St(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new j0("Invalid base64 string: "+o):o}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const dk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=dk.exec(t);if(Oe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hm(t){const e=t.mapValue.fields.__previous_value__;return cm(e)?hm(e):e}function Cl(t){const e=Tr(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,i,s,o,l,h,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}class Rl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec={mapValue:{}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cm(t)?4:mk(t)?9007199254740991:pk(t)?10:11:de()}function ei(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cl(t).isEqual(Cl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Tr(s.timestampValue),h=Tr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return cs(s.bytesValue).isEqual(cs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return tt(s.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return tt(s.integerValue)===tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=tt(s.doubleValue),h=tt(o.doubleValue);return l===h?th(l)===th(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Lo(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(G_(l)!==G_(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ei(l[d],h[d])))return!1;return!0}(t,e);default:return de()}}function Ll(t,e){return(t.values||[]).find(n=>ei(n,e))!==void 0}function No(t,e){if(t===e)return 0;const n=hs(t),i=hs(e);if(n!==i)return Re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Q_(t.timestampValue,e.timestampValue);case 4:return Q_(Cl(t),Cl(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(o,l){const h=cs(o),d=cs(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=Re(h[m],d[m]);if(v!==0)return v}return Re(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Re(tt(o.latitude),tt(l.latitude));return h!==0?h:Re(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Y_(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,m,v;const T=o.fields||{},I=l.fields||{},M=(h=T.value)===null||h===void 0?void 0:h.arrayValue,F=(d=I.value)===null||d===void 0?void 0:d.arrayValue,V=Re(((m=M==null?void 0:M.values)===null||m===void 0?void 0:m.length)||0,((v=F==null?void 0:F.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:Y_(M,F)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===ec.mapValue&&l===ec.mapValue)return 0;if(o===ec.mapValue)return 1;if(l===ec.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let T=0;T<d.length&&T<v.length;++T){const I=Re(d[T],v[T]);if(I!==0)return I;const M=No(h[d[T]],m[v[T]]);if(M!==0)return M}return Re(d.length,v.length)}(t.mapValue,e.mapValue);default:throw de()}}function Q_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Tr(t),i=Tr(e),s=Re(n.seconds,i.seconds);return s!==0?s:Re(n.nanos,i.nanos)}function Y_(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=No(n[s],i[s]);if(o)return o}return Re(n.length,i.length)}function bo(t){return zf(t)}function zf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Tr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=zf(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${zf(n.fields[l])}`;return s+"}"}(t.mapValue):de()}function Uf(t){return!!t&&"integerValue"in t}function dm(t){return!!t&&"arrayValue"in t}function X_(t){return!!t&&"nullValue"in t}function J_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wc(t){return!!t&&"mapValue"in t}function pk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ms(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=rl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=rl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];wc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ms(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Zt(rl(this.value))}}function H0(t){const e=[];return ms(t.fields,(n,i)=>{const s=new It([n]);if(wc(i)){const o=H0(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ot(e,0,pe.min(),pe.min(),pe.min(),Zt.empty(),0)}static newFoundDocument(e,n,i,s){return new Ot(e,1,n,pe.min(),i,s,0)}static newNoDocument(e,n){return new Ot(e,2,n,pe.min(),pe.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,pe.min(),pe.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.position=e,this.inclusive=n}}function ev(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=se.comparator(se.fromName(l.referenceValue),n.key):i=No(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function gk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{}class ht extends W0{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vk(e,n,i):n==="array-contains"?new Ek(e,i):n==="in"?new Tk(e,i):n==="not-in"?new Ik(e,i):n==="array-contains-any"?new Pk(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new yk(e,i):new wk(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(No(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends W0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ti(e,n)}matches(e){return $0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $0(t){return t.op==="and"}function q0(t){return _k(t)&&$0(t)}function _k(t){for(const e of t.filters)if(e instanceof ti)return!1;return!0}function Bf(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+bo(t.value);if(q0(t))return t.filters.map(e=>Bf(e)).join(",");{const e=t.filters.map(n=>Bf(n)).join(",");return`${t.op}(${e})`}}function Z0(t,e){return t instanceof ht?function(i,s){return s instanceof ht&&i.op===s.op&&i.field.isEqual(s.field)&&ei(i.value,s.value)}(t,e):t instanceof ti?function(i,s){return s instanceof ti&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&Z0(l,s.filters[h]),!0):!1}(t,e):void de()}function G0(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`}(t):t instanceof ti?function(n){return n.op.toString()+" {"+n.getFilters().map(G0).join(" ,")+"}"}(t):"Filter"}class vk extends ht{constructor(e,n,i){super(e,n,i),this.key=se.fromName(i.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class yk extends ht{constructor(e,n){super(e,"in",n),this.keys=K0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wk extends ht{constructor(e,n){super(e,"not-in",n),this.keys=K0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function K0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>se.fromName(i.referenceValue))}class Ek extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dm(n)&&Ll(n.arrayValue,this.value)}}class Tk extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class Ik extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class Pk extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ll(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function nv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new Sk(t,e,n,i,s,o,l)}function fm(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Bf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>bo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>bo(i)).join(",")),e.ue=n}return e.ue}function pm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Z0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tv(t.startAt,e.startAt)&&tv(t.endAt,e.endAt)}function jf(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xk(t,e,n,i,s,o,l,h){return new Lh(t,e,n,i,s,o,l,h)}function mm(t){return new Lh(t)}function iv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ak(t){return t.collectionGroup!==null}function sl(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new St(It.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ih(o,i))}),n.has(It.keyField().canonicalString())||e.ce.push(new ih(It.keyField(),i))}return e.ce}function Yn(t){const e=me(t);return e.le||(e.le=kk(e,sl(t))),e.le}function kk(t,e){if(t.limitType==="F")return nv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new ih(s.field,o)});const n=t.endAt?new nh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new nh(t.startAt.position,t.startAt.inclusive):null;return nv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Hf(t,e,n){return new Lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nh(t,e){return pm(Yn(t),Yn(e))&&t.limitType===e.limitType}function Q0(t){return`${fm(Yn(t))}|lt:${t.limitType}`}function Ks(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>G0(s)).join(", ")}]`),Rh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>bo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>bo(s)).join(",")),`Target(${i})`}(Yn(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):se.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of sl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=ev(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,sl(i),s)||i.endAt&&!function(l,h,d){const m=ev(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,sl(i),s))}(t,e)}function Ck(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y0(t){return(e,n)=>{let i=!1;for(const s of sl(t)){const o=Rk(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function Rk(t,e,n){const i=t.field.isKeyField()?se.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?No(d,m):de()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return B0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Ke(se.comparator);function Oi(){return Lk}const X0=new Ke(se.comparator);function qa(...t){let e=X0;for(const n of t)e=e.insert(n.key,n);return e}function J0(t){let e=X0;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Yr(){return ol()}function eE(){return ol()}function ol(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const Nk=new Ke(se.comparator),bk=new St(se.comparator);function Se(...t){let e=bk;for(const n of t)e=e.add(n);return e}const Ok=new St(Re);function Mk(){return Ok}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function tE(t){return{integerValue:""+t}}function Dk(t,e){return hk(e)?tE(e):gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function Vk(t,e,n){return t instanceof rh?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&cm(o)&&(o=hm(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Nl?iE(t,e):t instanceof bl?rE(t,e):function(s,o){const l=nE(s,o),h=rv(l)+rv(s.Pe);return Uf(l)&&Uf(s.Pe)?tE(h):gm(s.serializer,h)}(t,e)}function Fk(t,e,n){return t instanceof Nl?iE(t,e):t instanceof bl?rE(t,e):n}function nE(t,e){return t instanceof sh?function(i){return Uf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class rh extends Oh{}class Nl extends Oh{constructor(e){super(),this.elements=e}}function iE(t,e){const n=sE(e);for(const i of t.elements)n.some(s=>ei(s,i))||n.push(i);return{arrayValue:{values:n}}}class bl extends Oh{constructor(e){super(),this.elements=e}}function rE(t,e){let n=sE(e);for(const i of t.elements)n=n.filter(s=>!ei(s,i));return{arrayValue:{values:n}}}class sh extends Oh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rv(t){return tt(t.integerValue||t.doubleValue)}function sE(t){return dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zk(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Nl&&s instanceof Nl||i instanceof bl&&s instanceof bl?Lo(i.elements,s.elements,ei):i instanceof sh&&s instanceof sh?ei(i.Pe,s.Pe):i instanceof rh&&s instanceof rh}(t.transform,e.transform)}class Uk{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mh{}function oE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lE(t.key,Xn.none()):new Gl(t.key,t.data,Xn.none());{const n=t.data,i=Zt.empty();let s=new St(It.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Cr(t.key,i,new sn(s.toArray()),Xn.none())}}function Bk(t,e,n){t instanceof Gl?function(s,o,l){const h=s.value.clone(),d=ov(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Cr?function(s,o,l){if(!Ec(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=ov(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(aE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function al(t,e,n,i){return t instanceof Gl?function(o,l,h,d){if(!Ec(o.precondition,l))return h;const m=o.value.clone(),v=av(o.fieldTransforms,d,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof Cr?function(o,l,h,d){if(!Ec(o.precondition,l))return h;const m=av(o.fieldTransforms,d,l),v=l.data;return v.setAll(aE(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(T=>T.field))}(t,e,n,i):function(o,l,h){return Ec(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function jk(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=nE(i.transform,s||null);o!=null&&(n===null&&(n=Zt.empty()),n.set(i.field,o))}return n||null}function sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Lo(i,s,(o,l)=>zk(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gl extends Mh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cr extends Mh{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function aE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ov(t,e,n){const i=new Map;Oe(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,Fk(l,h,n[s]))}return i}function av(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,Vk(o,l,e))}return i}class lE extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hk extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Bk(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=al(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=al(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=eE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=oE(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(n,i)=>sv(n,i))&&Lo(this.baseMutations,e.baseMutations,(n,i)=>sv(n,i))}}class _m{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Oe(e.mutations.length===i.length);let s=function(){return Nk}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new _m(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ke;function Zk(t){switch(t){default:return de();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function uE(t){if(t===void 0)return bi("GRPC error has no .code"),K.UNKNOWN;switch(t){case ot.OK:return K.OK;case ot.CANCELLED:return K.CANCELLED;case ot.UNKNOWN:return K.UNKNOWN;case ot.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ot.INTERNAL:return K.INTERNAL;case ot.UNAVAILABLE:return K.UNAVAILABLE;case ot.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ot.NOT_FOUND:return K.NOT_FOUND;case ot.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ot.ABORTED:return K.ABORTED;case ot.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ot.DATA_LOSS:return K.DATA_LOSS;default:return de()}}(ke=ot||(ot={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new es([4294967295,4294967295],0);function lv(t){const e=Gk().encode(t),n=new b0;return n.update(e),new Uint8Array(n.digest())}function uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new es([n,i],0),new es([s,o],0)]}class vm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Za(`Invalid padding: ${n}`);if(i<0)throw new Za(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Za(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Za(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=es.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(es.fromNumber(i)));return s.compare(Kk)===1&&(s=new es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=lv(e),[i,s]=uv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new vm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=lv(e),[i,s]=uv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Dh(pe.min(),s,new Ke(Re),Oi(),Se())}}class Kl{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Kl(i,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class cE{constructor(e,n){this.targetId=e,this.me=n}}class hE{constructor(e,n,i=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class cv{constructor(){this.fe=0,this.ge=dv(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),i=Se();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:de()}}),new Kl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=dv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Qk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Oi(),this.qe=hv(),this.Qe=new Ke(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(jf(o))if(i===0){const l=new se(o.path);this.Ue(n,l,Ot.newNoDocument(l,pe.min()))}else Oe(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=cs(i).toUint8Array()}catch(d){if(d instanceof j0)return Ro("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new vm(l,s,o)}catch(d){return Ro(d instanceof Za?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&jf(h.target)){const d=new se(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Ot.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Se();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new Dh(e,n,this.Qe,this.ke,i);return this.ke=Oi(),this.qe=hv(),this.Qe=new Ke(Re),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hv(){return new Ke(se.comparator)}function dv(){return new Ke(se.comparator)}const Yk={asc:"ASCENDING",desc:"DESCENDING"},Xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jk={and:"AND",or:"OR"};class eC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wf(t,e){return t.useProto3Json||Rh(e)?e:{value:e}}function oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tC(t,e){return oh(t,e.toTimestamp())}function Jn(t){return Oe(!!t),pe.fromTimestamp(function(n){const i=Tr(n);return new ft(i.seconds,i.nanos)}(t))}function ym(t,e){return $f(t,e).canonicalString()}function $f(t,e){const n=function(s){return new Je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fE(t){const e=Je.fromString(t);return Oe(vE(e)),e}function qf(t,e){return ym(t.databaseId,e.path)}function Ld(t,e){const n=fE(e);if(n.get(1)!==t.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(mE(n))}function pE(t,e){return ym(t.databaseId,e)}function nC(t){const e=fE(t);return e.length===4?Je.emptyPath():mE(e)}function Zf(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mE(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fv(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function iC(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Oe(v===void 0||typeof v=="string"),kt.fromBase64String(v||"")):(Oe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),kt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=m.code===void 0?K.UNKNOWN:uE(m.code);return new re(v,m.message||"")}(l);n=new hE(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ld(t,i.document.name),o=Jn(i.document.updateTime),l=i.document.createTime?Jn(i.document.createTime):pe.min(),h=new Zt({mapValue:{fields:i.document.fields}}),d=Ot.newFoundDocument(s,o,l,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new Tc(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ld(t,i.document),o=i.readTime?Jn(i.readTime):pe.min(),l=Ot.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Tc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ld(t,i.document),o=i.removedTargetIds||[];n=new Tc([],o,s,null)}else{if(!("filter"in e))return de();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new qk(s,o),h=i.targetId;n=new cE(h,l)}}return n}function rC(t,e){let n;if(e instanceof Gl)n={update:fv(t,e.key,e.value)};else if(e instanceof lE)n={delete:qf(t,e.key)};else if(e instanceof Cr)n={update:fv(t,e.key,e.data),updateMask:fC(e.fieldMask)};else{if(!(e instanceof Hk))return de();n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof rh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Nl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof bl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof sh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw de()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:tC(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de()}(t,e.precondition)),n}function sC(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?Jn(s.updateTime):Jn(o);return l.isEqual(pe.min())&&(l=Jn(o)),new Uk(l,s.transformResults||[])}(n,e))):[]}function oC(t,e){return{documents:[pE(t,e.path)]}}function aC(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=pE(t,s);const o=function(m){if(m.length!==0)return _E(ti.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(v=>function(I){return{field:Qs(I.field),direction:cC(I.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Wf(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:s}}function lC(t){let e=nC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Oe(i===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(T){const I=gE(T);return I instanceof ti&&q0(I)?I.getFilters():[I]}(n.where));let l=[];n.orderBy&&(l=function(T){return T.map(I=>function(F){return new ih(Ys(F.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(I))}(n.orderBy));let h=null;n.limit&&(h=function(T){let I;return I=typeof T=="object"?T.value:T,Rh(I)?null:I}(n.limit));let d=null;n.startAt&&(d=function(T){const I=!!T.before,M=T.values||[];return new nh(M,I)}(n.startAt));let m=null;return n.endAt&&(m=function(T){const I=!T.before,M=T.values||[];return new nh(M,I)}(n.endAt)),xk(e,s,l,o,h,"F",d,m)}function uC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ys(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ys(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ys(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ys(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Ys(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ti.create(n.compositeFilter.filters.map(i=>gE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function cC(t){return Yk[t]}function hC(t){return Xk[t]}function dC(t){return Jk[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return It.fromServerFormat(t.fieldPath)}function _E(t){return t instanceof ht?function(n){if(n.op==="=="){if(J_(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J_(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(n.field),op:hC(n.op),value:n.value}}}(t):t instanceof ti?function(n){const i=n.getFilters().map(s=>_E(s));return i.length===1?i[0]:{compositeFilter:{op:dC(n.op),filters:i}}}(t):de()}function fC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,i,s,o=pe.min(),l=pe.min(),h=kt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.ct=e}}function mC(t){const e=lC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.un=new _C}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Er.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class _C{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new St(Je.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new St(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oo(0)}static kn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&al(i.mutation,s,sn.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Se()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=qa();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Se()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Oi();const l=ol(),h=function(){return ol()}();return n.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Cr)?o=o.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),al(v.mutation,m,v.mutation.getFieldMask(),ft.now())):l.set(m.key,sn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,v)=>l.set(m,v)),n.forEach((m,v)=>{var T;return h.set(m,new yC(v,(T=l.get(m))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(e,n){const i=ol();let s=new Ke((l,h)=>l-h),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let v=i.get(d)||sn.empty();v=h.applyToLocalView(m,v),i.set(d,v);const T=(s.get(h.batchId)||Se()).add(d);s=s.insert(h.batchId,T)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,T=eE();v.forEach(I=>{if(!o.has(I)){const M=oE(n.get(I),i.get(I));M!==null&&T.set(I,M),o=o.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,T))}return G.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return se.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ak(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):G.resolve(Yr());let h=-1,d=o;return l.next(m=>G.forEach(m,(v,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(v)?G.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{d=d.insert(v,I)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Se())).next(v=>({batchId:h,changes:J0(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(i=>{let s=qa();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=qa();return this.indexManager.getCollectionParents(e,o).next(h=>G.forEach(h,d=>{const m=function(T,I){return new Lh(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(v=>{v.forEach((T,I)=>{l=l.insert(T,I)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,Ot.newInvalidDocument(v)))});let h=qa();return l.forEach((d,m)=>{const v=o.get(d);v!==void 0&&al(v.mutation,m,sn.empty(),ft.now()),bh(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jn(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:mC(s.bundledQuery),readTime:Jn(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.overlays=new Ke(se.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Yr();return G.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const s=Yr(),o=n.length+1,l=new se(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ke((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=Yr(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Yr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return G.resolve(h)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new $k(n,i));let o=this.Ir.get(n);o===void 0&&(o=Se(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.Tr=new St(_t.Er),this.dr=new St(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new _t(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new se(new Je([])),i=new _t(n,e),s=new _t(n,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Je([])),i=new _t(n,e),s=new _t(n,e+1);let o=Se();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new _t(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class _t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(_t.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Wk(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new _t(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(Re);return n.forEach(s=>{const o=new _t(s,0),l=new _t(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;se.isDocumentKey(o)||(o=o.child(""));const l=new _t(new se(o),0);let h=new St(Re);return this.br.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.wr)),!0)},l),G.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(n.mutations,s=>{const o=new _t(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new _t(n,0),s=this.br.firstAfterOrEqual(i);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.Mr=e,this.docs=function(){return new Ke(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let i=Oi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ot.newInvalidDocument(s))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Oi();const l=n.path,h=new se(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||ak(ok(v),i)<=0||(s.has(v.key)||bh(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,i,s){de()}Or(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new xC(this)}getSize(e){return G.resolve(this.size)}}class xC extends vC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.persistence=e,this.Nr=new Ho(n=>fm(n),pm),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wm,this.targetCount=0,this.kr=Oo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),G.waitFor(o).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new um(0),this.Kr=!1,this.Kr=!0,this.$r=new IC,this.referenceDelegate=e(this),this.Ur=new AC(this),this.indexManager=new gC,this.remoteDocumentCache=function(s){return new SC(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new pC(n),this.Gr=new EC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new PC(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ne("MemoryPersistence","Starting transaction:",e);const s=new CC(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return G.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class CC extends uk{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Jr=new wm,this.Yr=null}static Zr(e){return new Em(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,i=>{const s=se.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=Se(),s=Se();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Tm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mS()?8:ck(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new RC;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(Ma()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Ma()<=xe.DEBUG&&ne("QueryEngine","Query:",Ks(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Ma()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):G.resolve())}Yi(e,n){if(iv(n))return G.resolve(null);let i=Yn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Hf(n,null,"F"),i=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Se(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.ts(n,h);return this.ns(n,m,l,d.readTime)?this.Yi(e,Hf(n,null,"F")):this.rs(e,m,n,d)}))})))}Zi(e,n,i,s){return iv(n)||s.isEqual(pe.min())?G.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?G.resolve(null):(Ma()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ks(n)),this.rs(e,l,n,sk(s,-1)).next(h=>h))})}ts(e,n){let i=new St(Y0(e));return n.forEach((s,o)=>{bh(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return Ma()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,Er.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ke(Re),this._s=new Ho(o=>fm(o),pm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function bC(t,e,n,i){return new NC(t,e,n,i)}async function yE(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Se();for(const m of s){l.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(m=>({hs:m,removedBatchIds:l,addedBatchIds:h}))})})}function OC(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,v){const T=m.batch,I=T.keys();let M=G.resolve();return I.forEach(F=>{M=M.next(()=>v.getEntry(d,F)).next(V=>{const W=m.docVersions.get(F);Oe(W!==null),V.version.compareTo(W)<0&&(T.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),v.addEntry(V)))})}),M.next(()=>h.mutationQueue.removeMutationBatch(d,T))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Se();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function wE(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function MC(t,e){const n=me(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((v,T)=>{const I=s.get(T);if(!I)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,T).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,T)));let M=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(kt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,i)),s=s.insert(T,M),function(V,W,b){return V.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(I,M,v)&&h.push(n.Ur.updateTargetData(o,M))});let d=Oi(),m=Se();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(DC(o,l,e.documentUpdates).next(v=>{d=v.Ps,m=v.Is})),!i.isEqual(pe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(T=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return G.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.os=s,o))}function DC(t,e,n){let i=Se(),s=Se();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Oi();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(pe.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ne("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function VC(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function FC(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,G.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new or(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Gf(t,e,n){const i=me(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Zl(l))throw l;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function pv(t,e,n){const i=me(t);let s=pe.min(),o=Se();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,v){const T=me(d),I=T._s.get(v);return I!==void 0?G.resolve(T.os.get(I)):T.Ur.getTargetData(m,v)}(i,l,Yn(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?s:pe.min(),n?o:Se())).next(h=>(zC(i,Ck(e),h),{documents:h,Ts:o})))}function zC(t,e,n){let i=t.us.get(e)||pe.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class mv{constructor(){this.activeTargetIds=Mk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UC{constructor(){this.so=new mv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc=null;function Nd(){return tc===null?tc=function(){return 268435456+Math.round(2147483648*Math.random())}():tc++,"0x"+tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class WC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=Nd(),d=this.xo(n,i.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${h}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then(v=>(ne("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Ro("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",s),v})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=jC[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=Nd();return new Promise((l,h)=>{const d=new O0;d.setWithCredentials(!0),d.listenOnce(M0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case yc.NO_ERROR:const v=d.getResponseJson();ne(Lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case yc.TIMEOUT:ne(Lt,`RPC '${e}' ${o} timed out`),h(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const T=d.getStatus();if(ne(Lt,`RPC '${e}' ${o} failed with status:`,T,"response text:",d.getResponseText()),T>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const M=I==null?void 0:I.error;if(M&&M.status&&M.message){const F=function(W){const b=W.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(b)>=0?b:K.UNKNOWN}(M.status);h(new re(F,M.message))}else h(new re(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new re(K.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{ne(Lt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);ne(Lt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,i,15)})}Bo(e,n,i){const s=Nd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=F0(),h=V0(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");ne(Lt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const T=l.createWebChannel(v,d);let I=!1,M=!1;const F=new HC({Io:W=>{M?ne(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,W):(I||(ne(Lt,`Opening RPC '${e}' stream ${s} transport.`),T.open(),I=!0),ne(Lt,`RPC '${e}' stream ${s} sending:`,W),T.send(W))},To:()=>T.close()}),V=(W,b,A)=>{W.listen(b,N=>{try{A(N)}catch(H){setTimeout(()=>{throw H},0)}})};return V(T,$a.EventType.OPEN,()=>{M||(ne(Lt,`RPC '${e}' stream ${s} transport opened.`),F.yo())}),V(T,$a.EventType.CLOSE,()=>{M||(M=!0,ne(Lt,`RPC '${e}' stream ${s} transport closed`),F.So())}),V(T,$a.EventType.ERROR,W=>{M||(M=!0,Ro(Lt,`RPC '${e}' stream ${s} transport errored:`,W),F.So(new re(K.UNAVAILABLE,"The operation could not be completed")))}),V(T,$a.EventType.MESSAGE,W=>{var b;if(!M){const A=W.data[0];Oe(!!A);const N=A,H=N.error||((b=N[0])===null||b===void 0?void 0:b.error);if(H){ne(Lt,`RPC '${e}' stream ${s} received error:`,H);const Y=H.status;let q=function(S){const x=ot[S];if(x!==void 0)return uE(x)}(Y),P=H.message;q===void 0&&(q=K.INTERNAL,P="Unknown error status: "+Y+" with message "+H.message),M=!0,F.So(new re(q,P)),T.close()}else ne(Lt,`RPC '${e}' stream ${s} received:`,A),F.bo(A)}}),V(h,D0.STAT_EVENT,W=>{W.stat===Ff.PROXY?ne(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):W.stat===Ff.NOPROXY&&ne(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{F.wo()},0),F}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){return new eC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,i,s,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new EE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new re(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $C extends TE{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iC(this.serializer,e),i=function(o){if(!("targetChange"in o))return pe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?pe.min():l.readTime?Jn(l.readTime):pe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Zf(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=jf(d)?{documents:oC(o,d)}:{query:aC(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=dE(o,l.resumeToken);const m=Wf(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(pe.min())>0){h.readTime=oh(o,l.snapshotVersion.toTimestamp());const m=Wf(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=uC(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Zf(this.serializer),n.removeTarget=e,this.a_(n)}}class qC extends TE{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sC(e.writeResults,e.commitTime),i=Jn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Zf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>rC(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,$f(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(K.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,$f(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(K.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bi(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{gs(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(d){const m=me(d);m.L_.add(4),await Ql(m),m.q_.set("Unknown"),m.L_.delete(4),await Fh(m)}(this))})}),this.q_=new GC(i,s)}}async function Fh(t){if(gs(t))for(const e of t.B_)await e(!0)}async function Ql(t){for(const e of t.B_)await e(!1)}function IE(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xm(n)?Sm(n):Wo(n).r_()&&Pm(n,e))}function Im(t,e){const n=me(t),i=Wo(n);n.N_.delete(e),i.r_()&&PE(n,e),n.N_.size===0&&(i.r_()?i.o_():gs(n)&&n.q_.set("Unknown"))}function Pm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wo(t).A_(e)}function PE(t,e){t.Q_.xe(e),Wo(t).R_(e)}function Sm(t){t.Q_=new Qk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wo(t).start(),t.q_.v_()}function xm(t){return gs(t)&&!Wo(t).n_()&&t.N_.size>0}function gs(t){return me(t).L_.size===0}function SE(t){t.Q_=void 0}async function QC(t){t.q_.set("Online")}async function YC(t){t.N_.forEach((e,n)=>{Pm(t,e)})}async function XC(t,e){SE(t),xm(t)?(t.q_.M_(e),Sm(t)):t.q_.set("Unknown")}async function JC(t,e,n){if(t.q_.set("Online"),e instanceof hE&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(i){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ah(t,i)}else if(e instanceof Tc?t.Q_.Ke(e):e instanceof cE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(pe.min()))try{const i=await wE(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(m);v&&o.N_.set(m,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(kt.EMPTY_BYTE_STRING,v.snapshotVersion)),PE(o,d);const T=new or(v.target,d,m,v.sequenceNumber);Pm(o,T)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ne("RemoteStore","Failed to raise snapshot:",i),await ah(t,i)}}async function ah(t,e,n){if(!Zl(e))throw e;t.L_.add(1),await Ql(t),t.q_.set("Offline"),n||(n=()=>wE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fh(t)})}function xE(t,e){return e().catch(n=>ah(t,n,e))}async function zh(t){const e=me(t),n=Ir(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eR(e);)try{const s=await VC(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,tR(e,s)}catch(s){await ah(e,s)}AE(e)&&kE(e)}function eR(t){return gs(t)&&t.O_.length<10}function tR(t,e){t.O_.push(e);const n=Ir(t);n.r_()&&n.V_&&n.m_(e.mutations)}function AE(t){return gs(t)&&!Ir(t).n_()&&t.O_.length>0}function kE(t){Ir(t).start()}async function nR(t){Ir(t).p_()}async function iR(t){const e=Ir(t);for(const n of t.O_)e.m_(n.mutations)}async function rR(t,e,n){const i=t.O_.shift(),s=_m.from(i,e,n);await xE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zh(t)}async function sR(t,e){e&&Ir(t).V_&&await async function(i,s){if(function(l){return Zk(l)&&l!==K.ABORTED}(s.code)){const o=i.O_.shift();Ir(i).s_(),await xE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await zh(i)}}(t,e),AE(t)&&kE(t)}async function _v(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const i=gs(n);n.L_.add(3),await Ql(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fh(n)}async function oR(t,e){const n=me(t);e?(n.L_.delete(2),await Fh(n)):e||(n.L_.add(2),await Ql(n),n.q_.set("Unknown"))}function Wo(t){return t.K_||(t.K_=function(n,i,s){const o=me(n);return o.w_(),new $C(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:QC.bind(null,t),Ro:YC.bind(null,t),mo:XC.bind(null,t),d_:JC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xm(t)?Sm(t):t.q_.set("Unknown")):(await t.K_.stop(),SE(t))})),t.K_}function Ir(t){return t.U_||(t.U_=function(n,i,s){const o=me(n);return o.w_(),new qC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nR.bind(null,t),mo:sR.bind(null,t),f_:iR.bind(null,t),g_:rR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zh(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new Am(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(t,e){if(bi("AsyncQueue",`${e}: ${t}`),Zl(t))return new re(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||se.comparator(n.key,i.key):(n,i)=>se.comparator(n.key,i.key),this.keyedMap=qa(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new wo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.W_=new Ke(se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Mo{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Mo(e,n,wo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lR{constructor(){this.queries=yv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=me(n),o=s.queries;s.queries=yv(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new re(K.ABORTED,"Firestore shutting down"))}}function yv(){return new Ho(t=>Q0(t),Nh)}async function uR(t,e){const n=me(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new aR,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=km(l,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Cm(n)}async function cR(t,e){const n=me(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function hR(t,e){const n=me(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&Cm(n)}function dR(t,e,n){const i=me(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function Cm(t){t.Y_.forEach(e=>{e.next()})}var Kf,wv;(wv=Kf||(Kf={})).ea="default",wv.Cache="cache";class fR{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.key=e}}class RE{constructor(e){this.key=e}}class pR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=Y0(e),this.Ra=new wo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new vv,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,T)=>{const I=s.get(v),M=bh(this.query,T)?T:null,F=!!I&&this.mutatedKeys.has(I.key),V=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let W=!1;I&&M?I.data.isEqual(M.data)?F!==V&&(i.track({type:3,doc:M}),W=!0):this.ga(I,M)||(i.track({type:2,doc:M}),W=!0,(d&&this.Aa(M,d)>0||m&&this.Aa(M,m)<0)&&(h=!0)):!I&&M?(i.track({type:0,doc:M}),W=!0):I&&!M&&(i.track({type:1,doc:I}),W=!0,(d||m)&&(h=!0)),W&&(M?(l=l.add(M),o=V?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,T)=>function(M,F){const V=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return V(M)-V(F)}(v.type,T.type)||this.Aa(v.doc,T.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new Mo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new RE(i))}),this.da.forEach(i=>{e.has(i)||n.push(new CE(i))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class gR{constructor(e){this.key=e,this.va=!1}}class _R{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Ho(h=>Q0(h),Nh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(se.comparator),this.Na=new Map,this.La=new wm,this.Ba={},this.ka=new Map,this.qa=Oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vR(t,e,n=!0){const i=DE(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await LE(i,e,n,!0),s}async function yR(t,e){const n=DE(t);await LE(n,e,!0,!1)}async function LE(t,e,n,i){const s=await FC(t.localStore,Yn(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await wR(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&IE(t.remoteStore,s),h}async function wR(t,e,n,i,s){t.Ka=(T,I,M)=>async function(V,W,b,A){let N=W.view.ma(b);N.ns&&(N=await pv(V.localStore,W.query,!1).then(({documents:P})=>W.view.ma(P,N)));const H=A&&A.targetChanges.get(W.targetId),Y=A&&A.targetMismatches.get(W.targetId)!=null,q=W.view.applyChanges(N,V.isPrimaryClient,H,Y);return Tv(V,W.targetId,q.wa),q.snapshot}(t,T,I,M);const o=await pv(t.localStore,e,!0),l=new pR(e,o.Ts),h=l.ma(o.documents),d=Kl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);Tv(t,n,m.wa);const v=new mR(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function ER(t,e,n){const i=me(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Nh(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Gf(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Im(i.remoteStore,s.targetId),Qf(i,s.targetId)}).catch(ql)):(Qf(i,s.targetId),await Gf(i.localStore,s.targetId,!0))}async function TR(t,e){const n=me(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Im(n.remoteStore,i.targetId))}async function IR(t,e,n){const i=RR(t);try{const s=await function(l,h){const d=me(l),m=ft.now(),v=h.reduce((M,F)=>M.add(F.key),Se());let T,I;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let F=Oi(),V=Se();return d.cs.getEntries(M,v).next(W=>{F=W,F.forEach((b,A)=>{A.isValidDocument()||(V=V.add(b))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,F)).next(W=>{T=W;const b=[];for(const A of h){const N=jk(A,T.get(A.key).overlayedDocument);N!=null&&b.push(new Cr(A.key,N,H0(N.value.mapValue),Xn.exists(!0)))}return d.mutationQueue.addMutationBatch(M,m,b,h)}).next(W=>{I=W;const b=W.applyToLocalDocumentSet(T,V);return d.documentOverlayCache.saveOverlays(M,W.batchId,b)})}).then(()=>({batchId:I.batchId,changes:J0(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Ke(Re)),m=m.insert(h,d),l.Ba[l.currentUser.toKey()]=m}(i,s.batchId,n),await Yl(i,s.changes),await zh(i.remoteStore)}catch(s){const o=km(s,"Failed to persist write");n.reject(o)}}async function NE(t,e){const n=me(t);try{const i=await MC(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Oe(l.va):s.removedDocuments.size>0&&(Oe(l.va),l.va=!1))}),await Yl(n,i,e)}catch(i){await ql(i)}}function Ev(t,e,n){const i=me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=me(l);d.onlineState=h;let m=!1;d.queries.forEach((v,T)=>{for(const I of T.j_)I.Z_(h)&&(m=!0)}),m&&Cm(d)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PR(t,e,n){const i=me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let l=new Ke(se.comparator);l=l.insert(o,Ot.newNoDocument(o,pe.min()));const h=Se().add(o),d=new Dh(pe.min(),new Map,new Ke(Re),l,h);await NE(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Rm(i)}else await Gf(i.localStore,e,!1).then(()=>Qf(i,e,n)).catch(ql)}async function SR(t,e){const n=me(t),i=e.batch.batchId;try{const s=await OC(n.localStore,e);OE(n,i,null),bE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Yl(n,s)}catch(s){await ql(s)}}async function xR(t,e,n){const i=me(t);try{const s=await function(l,h){const d=me(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,h).next(T=>(Oe(T!==null),v=T.keys(),d.mutationQueue.removeMutationBatch(m,T))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(i.localStore,e);OE(i,e,n),bE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Yl(i,s)}catch(s){await ql(s)}}function bE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function OE(t,e,n){const i=me(t);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||ME(t,i)})}function ME(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Im(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rm(t))}function Tv(t,e,n){for(const i of n)i instanceof CE?(t.La.addReference(i.key,e),AR(t,i)):i instanceof RE?(ne("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||ME(t,i.key)):de()}function AR(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(i),Rm(t))}function Rm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Je.fromString(e)),i=t.qa.next();t.Na.set(i,new gR(n)),t.Oa=t.Oa.insert(n,i),IE(t.remoteStore,new or(Yn(mm(n.path)),i,"TargetPurposeLimboResolution",um.oe))}}async function Yl(t,e,n){const i=me(t),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const T=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,T?"current":"not-current")}if(m){s.push(m);const T=Tm.Wi(d.targetId,m);o.push(T)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(d,m){const v=me(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>G.forEach(m,I=>G.forEach(I.$i,M=>v.persistence.referenceDelegate.addReference(T,I.targetId,M)).next(()=>G.forEach(I.Ui,M=>v.persistence.referenceDelegate.removeReference(T,I.targetId,M)))))}catch(T){if(!Zl(T))throw T;ne("LocalStore","Failed to update sequence numbers: "+T)}for(const T of m){const I=T.targetId;if(!T.fromCache){const M=v.os.get(I),F=M.snapshotVersion,V=M.withLastLimboFreeSnapshotVersion(F);v.os=v.os.insert(I,V)}}}(i.localStore,o))}async function kR(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const i=await yE(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new re(K.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Yl(n,i.hs)}}function CR(t,e){const n=me(t),i=n.Na.get(e);if(i&&i.va)return Se().add(i.key);{let s=Se();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function DE(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PR.bind(null,e),e.Ca.d_=hR.bind(null,e.eventManager),e.Ca.$a=dR.bind(null,e.eventManager),e}function RR(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xR.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bC(this.persistence,new LC,e.initialUser,this.serializer)}Ga(e){return new kC(Em.Zr,this.serializer)}Wa(e){return new UC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class Yf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ev(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kR.bind(null,this.syncEngine),await oR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lR}()}createDatastore(e){const n=Vh(e.databaseInfo.databaseId),i=function(o){return new WC(o)}(e.databaseInfo);return function(o,l,h,d){return new ZC(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new KC(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Ev(this.syncEngine,n,0),function(){return gv.D()?new gv:new BC}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,v){const T=new _R(s,o,l,h,d,m);return v&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=me(s);ne("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Ql(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yf.provider={build:()=>new Yf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=U0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ne("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=km(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Od(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await yE(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Iv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bR(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>_v(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>_v(e.remoteStore,s)),t._onlineComponents=e}async function bR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Od(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await Od(t,new lh)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Od(t,new lh);return t._offlineComponents}async function VE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await Iv(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await Iv(t,new Yf))),t._onlineComponents}function OR(t){return VE(t).then(e=>e.syncEngine)}async function MR(t){const e=await VE(t),n=e.eventManager;return n.onListen=vR.bind(null,e.syncEngine),n.onUnlisten=ER.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TR.bind(null,e.syncEngine),n}function DR(t,e,n={}){const i=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new LR({next:I=>{v.Za(),l.enqueueAndForget(()=>cR(o,T));const M=I.docs.has(h);!M&&I.fromCache?m.reject(new re(K.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&d&&d.source==="server"?m.reject(new re(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),T=new fR(mm(h.path),v,{includeMetadataChanges:!0,_a:!0});return uR(o,T)}(await MR(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e,n){if(!n)throw new re(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FR(t,e,n,i){if(e===!0&&i===!0)throw new re(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sv(t){if(!se.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Lm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function ds(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lm(t);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nm{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new QA;switch(i.type){case"firstParty":return new ek(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Pv.get(n);i&&(ne("ComponentProvider","Removing Datastore"),Pv.delete(n),i.terminate())}(this),Promise.resolve()}}function zR(t,e,n,i={}){var s;const o=(t=ds(t,Nm))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Nt.MOCK_USER;else{h=lS(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new re(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Nt(m)}t._authCredentials=new YA(new z0(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bm(this.firestore,e,this._query)}}class an{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Ol extends bm{constructor(e,n,i){super(e,n,mm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new se(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function Da(t,e,...n){if(t=At(t),arguments.length===1&&(e=U0.newId()),VR("doc","path",e),t instanceof Nm){const i=Je.fromString(e,...n);return Sv(i),new an(t,null,new se(i))}{if(!(t instanceof an||t instanceof Ol))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Je.fromString(e,...n));return Sv(i),new an(t.firestore,t instanceof Ol?t.converter:null,new se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new EE(this,"async_queue_retry"),this.Vu=()=>{const i=bd();i&&ne("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=bd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new vr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zl(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw bi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Am.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Uh extends Nm{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Av,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function UR(t,e){const n=typeof t=="object"?t:Yw(),i=typeof t=="string"?t:"(default)",s=Qp(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=oS("firestore");o&&zR(s,...o)}return s}function zE(t){if(t._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BR(t),t._firestoreClient}function BR(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,m,v){return new fk(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,FE(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new NR(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(kt.fromBase64String(e))}catch(n){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Do(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=/^__.*__$/;class HR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}class UE{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Vm{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BE(this.Cu)&&jR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class WR{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vh(e)}Qu(e,n,i,s=!1){return new Vm({Cu:e,methodName:n,qu:i,path:It.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jE(t){const e=t._freezeSettings(),n=Vh(t._databaseId);return new WR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $R(t,e,n,i,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);Fm("Data must be an object, but it was:",l,i);const h=HE(i,l);let d,m;if(o.merge)d=new sn(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const T of o.mergeFields){const I=Xf(e,T,n);if(!l.contains(I))throw new re(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);$E(v,I)||v.push(I)}d=new sn(v),m=l.fieldTransforms.filter(T=>d.covers(T.field))}else d=null,m=l.fieldTransforms;return new HR(new Zt(h),d,m)}class jh extends Om{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function qR(t,e,n,i){const s=t.Qu(1,e,n);Fm("Data must be an object, but it was:",s,i);const o=[],l=Zt.empty();ms(i,(d,m)=>{const v=zm(e,d,n);m=At(m);const T=s.Nu(v);if(m instanceof jh)o.push(v);else{const I=Hh(m,T);I!=null&&(o.push(v),l.set(v,I))}});const h=new sn(o);return new UE(l,h,s.fieldTransforms)}function ZR(t,e,n,i,s,o){const l=t.Qu(1,e,n),h=[Xf(e,i,n)],d=[s];if(o.length%2!=0)throw new re(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)h.push(Xf(e,o[I])),d.push(o[I+1]);const m=[],v=Zt.empty();for(let I=h.length-1;I>=0;--I)if(!$E(m,h[I])){const M=h[I];let F=d[I];F=At(F);const V=l.Nu(M);if(F instanceof jh)m.push(M);else{const W=Hh(F,V);W!=null&&(m.push(M),v.set(M,W))}}const T=new sn(m);return new UE(v,T,l.fieldTransforms)}function Hh(t,e){if(WE(t=At(t)))return Fm("Unsupported field value:",e,t),HE(t,e);if(t instanceof Om)return function(i,s){if(!BE(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=Hh(h,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Dk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ft.fromDate(i);return{timestampValue:oh(s.serializer,o)}}if(i instanceof ft){const o=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:oh(s.serializer,o)}}if(i instanceof Mm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Do)return{bytesValue:dE(s.serializer,i._byteString)};if(i instanceof an){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ym(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Dm)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return gm(h.serializer,d)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Lm(i)}`)}(t,e)}function HE(t,e){const n={};return B0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,(i,s)=>{const o=Hh(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function WE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Mm||t instanceof Do||t instanceof an||t instanceof Om||t instanceof Dm)}function Fm(t,e,n){if(!WE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Lm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Xf(t,e,n){if((e=At(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return zm(t,e);throw uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const GR=new RegExp("[~\\*/\\[\\]]");function zm(t,e,n){if(e.search(GR)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new re(K.INVALID_ARGUMENT,h+t+d)}function $E(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ZE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KR extends qE{data(){return super.data()}}function ZE(t,e){return typeof e=="string"?zm(t,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}class QR{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ms(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>tt(l.doubleValue));return new Dm(o)}convertGeoPoint(e){return new Mm(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=hm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Je.fromString(e);Oe(vE(i));const s=new Rl(i.get(1),i.get(3)),o=new se(i.popFirst(5));return s.isEqual(n)||bi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GE extends qE{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new JR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ZE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class JR extends GE{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){t=ds(t,an);const e=ds(t.firestore,Uh);return DR(zE(e),t._key).then(n=>iL(e,t,n))}class tL extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function nL(t,e,n){t=ds(t,an);const i=ds(t.firestore,Uh),s=YR(t.converter,e);return KE(i,[$R(jE(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xn.none())])}function nc(t,e,n,...i){t=ds(t,an);const s=ds(t.firestore,Uh),o=jE(s);let l;return l=typeof(e=At(e))=="string"||e instanceof Bh?ZR(o,"updateDoc",t._key,e,n,i):qR(o,"updateDoc",t._key,e),KE(s,[l.toMutation(t._key,Xn.exists(!0))])}function KE(t,e){return function(i,s){const o=new vr;return i.asyncQueue.enqueueAndForget(async()=>IR(await OR(i),s,o)),o.promise}(zE(t),e)}function iL(t,e,n){const i=n.docs.get(e._key),s=new tL(t);return new GE(t,s,e._key,i,new XR(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){jo=s})(Uo),ko(new os("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Uh(new XA(i.getProvider("auth-internal")),new nk(i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rl(m.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),_r(Z_,"4.7.3",e),_r(Z_,"4.7.3","esm2017")})();const rL={apiKey:"AIzaSyD_G_PAGyTb7nsxjOBHm8clKobSCrdSn3M",authDomain:"mimo-97d25.firebaseapp.com",projectId:"mimo-97d25",storageBucket:"mimo-97d25.firebasestorage.app",messagingSenderId:"694133300771",appId:"1:694133300771:web:838e912da6c5c79d3bdb96",measurementId:"G-5G2THHVDD5"},QE=Qw(rL),ll=GA(QE),Va=UR(QE);var Gt=(t=>(t.HOME="home",t.MAP="map",t.FAVORITES="favorites",t.SETTINGS="settings",t))(Gt||{});const Si=({children:t,variant:e="primary",isLoading:n,className:i="",...s})=>{const o="w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 transform active:scale-95 flex justify-center items-center",l={primary:"bg-[var(--primary)] hover:bg-[var(--primary-hover)] text-[var(--text-inverse)] shadow-lg shadow-[var(--primary)]/40",secondary:"bg-[var(--bg-card)] text-[var(--text-main)] border border-[var(--primary)]/30 hover:bg-[var(--bg-input)] shadow-sm",danger:"bg-red-50 text-red-600 hover:bg-red-100 border border-red-100",ghost:"bg-transparent text-[var(--text-sub)] hover:text-[var(--primary)]"};return O.jsx("button",{className:`${o} ${l[e]} ${n?"opacity-70 cursor-not-allowed":""} ${i}`,disabled:n||s.disabled,...s,children:n?O.jsxs("svg",{className:"animate-spin h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[O.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),O.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):t})},xi=({label:t,className:e="",...n})=>O.jsxs("div",{className:"w-full",children:[t&&O.jsx("label",{className:"block text-sm font-medium text-[var(--text-main)] mb-1 ml-1",children:t}),O.jsx("input",{className:`w-full p-3 bg-[var(--bg-input)] border border-[var(--primary)]/20 rounded-xl text-[var(--text-main)] placeholder-[var(--text-sub)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]/50 focus:border-transparent transition-shadow ${e}`,...n})]}),sL=()=>{const[t,e]=ve.useState(!0),[n,i]=ve.useState(""),[s,o]=ve.useState(""),[l,h]=ve.useState(""),[d,m]=ve.useState(null),[v,T]=ve.useState(!1),I=async F=>{F.preventDefault(),m(null),T(!0);try{if(t)await L1(ll,n,s);else{const V=await R1(ll,n,s);l&&await b1(V.user,{displayName:l})}}catch(V){console.error(V);let W="An error occurred.";V.code==="auth/invalid-email"&&(W="Invalid email address."),V.code==="auth/wrong-password"&&(W="Incorrect password."),V.code==="auth/user-not-found"&&(W="User not found."),V.code==="auth/email-already-in-use"&&(W="Email already in use."),V.code==="auth/weak-password"&&(W="Password should be at least 6 characters."),m(W)}finally{T(!1)}},M=async()=>{const F=new _i;m(null),T(!0);try{await iA(ll,F)}catch(V){if(console.error("Google Sign In Error:",V),V.code==="auth/unauthorized-domain"){const W=window.location.hostname,b=` Domain Error:
        
        The domain "${W}" is not authorized.
        
        1. Go to Firebase Console > Authentication > Settings > Authorized Domains.
        2. Add this domain: ${W}`;m(b),console.warn("ADD THIS DOMAIN TO FIREBASE:",W)}else V.code==="auth/popup-closed-by-user"?m("Sign in cancelled."):V.code==="auth/popup-blocked"?m("Popup blocked. Please allow popups for this site."):m("Failed to sign in with Google. Check console for details.");T(!1)}};return O.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center p-6 animate-gradient transition-all duration-300",children:O.jsxs("div",{className:"w-full max-w-md bg-[var(--bg-card)]/30 backdrop-blur-lg rounded-3xl p-8 shadow-xl border border-white/20",children:[O.jsxs("div",{className:"text-center mb-8",children:[O.jsx("h1",{className:"text-4xl font-bold text-[var(--text-main)] mb-2 tracking-tight",children:"Mimo"}),O.jsx("p",{className:"text-[var(--text-sub)]",children:"Navigate the city in peace "})]}),O.jsxs("form",{onSubmit:I,className:"space-y-4",children:[!t&&O.jsx(xi,{type:"text",placeholder:"Your Name",value:l,onChange:F=>h(F.target.value),required:!t}),O.jsx(xi,{type:"email",placeholder:"Email address",value:n,onChange:F=>i(F.target.value),required:!0}),O.jsx(xi,{type:"password",placeholder:"Password",value:s,onChange:F=>o(F.target.value),required:!0}),O.jsx("p",{className:"text-center text-xs text-[var(--text-sub)]",children:"Password needs to include at least 6 characters"}),d&&O.jsx("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 break-words whitespace-pre-wrap font-mono",children:d}),O.jsx("div",{className:"pt-2",children:O.jsx(Si,{type:"submit",isLoading:v,children:t?"Sign In":"Create Account"})})]}),O.jsxs(Si,{type:"button",variant:"secondary",onClick:M,className:"mt-6 w-full flex items-center justify-center gap-3 font-medium bg-white hover:bg-gray-50 text-gray-700 border-none shadow-sm",children:[O.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[O.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),O.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),O.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),O.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]}),O.jsx("div",{className:"mt-6 text-center",children:O.jsx(Si,{variant:"ghost",onClick:()=>e(!t),className:"w-full mt-2",children:t?"No account? Sign Up":"Have an account? Log In"})})]})})},kv=({user:t,onNavigate:e,currentNoiseLevel:n})=>{const i=h=>h.split(" ")[0]||"User",s=[{id:"home",label:"Home",icon:"",color:"bg-[var(--bg-input)] text-[var(--text-main)]"},{id:"work",label:"Work",icon:"",color:"bg-blue-500/10 text-blue-500"},{id:"school",label:"School",icon:"",color:"bg-orange-500/10 text-orange-500"}],l=(h=>h<50?{text:"Quiet ",color:"text-emerald-500"}:h<70?{text:"Moderate ",color:"text-yellow-500"}:{text:"Noisy ",color:"text-red-500"})(n);return O.jsx("div",{className:"p-6 pt-12 pb-24 animate-fade-in space-y-8 h-full transition-colors duration-300 overflow-y-auto w-full",children:O.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[O.jsx("header",{className:"flex justify-between items-end",children:O.jsxs("div",{children:[O.jsxs("h1",{className:"text-3xl font-bold text-[var(--text-main)]",children:["Hi, ",i(t.displayName)," ",O.jsx("span",{className:"inline-block animate-wave",children:""})]}),O.jsx("p",{className:"text-[var(--text-sub)] mt-1",children:"Where do you want to go quietly today?"})]})}),O.jsx("section",{children:O.jsxs(Si,{onClick:()=>e(Gt.MAP),className:"h-32 text-lg flex-col gap-2 bg-gradient-to-r from-[var(--primary)] to-[var(--primary-hover)] hover:opacity-90 shadow-lg text-[var(--text-inverse)] transform hover:scale-[1.01] transition-transform",children:[O.jsx("span",{className:"text-3xl",children:""}),"Find a quiet route"]})}),O.jsx("section",{className:"bg-[var(--bg-card)] rounded-2xl p-6 shadow-sm border border-[var(--primary)]/20",children:O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:`p-4 rounded-full ${n>70?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:O.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-semibold text-[var(--text-main)] text-lg",children:"Live Noise Level"}),O.jsxs("p",{className:`text-sm font-medium ${l.color}`,children:[l.text," nearby"]})]}),O.jsxs("div",{className:"ml-auto flex flex-col items-end",children:[O.jsxs("span",{className:`text-2xl font-bold ${n>t.noiseSensitivity?"text-red-500 animate-pulse":"text-[var(--text-main)]"}`,children:[n," dB"]}),n>t.noiseSensitivity&&O.jsx("span",{className:"text-xs text-red-500",children:"Above limit!"})]})]})}),O.jsxs("section",{children:[O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h2",{className:"text-lg font-semibold text-[var(--text-main)]",children:"Favorites Places"}),O.jsx("button",{onClick:()=>e(Gt.FAVORITES),className:"text-sm text-[var(--text-sub)] hover:text-[var(--primary)] font-medium",children:"View all"})]}),O.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.map(h=>O.jsxs("button",{onClick:()=>e(Gt.FAVORITES),className:`aspect-square rounded-2xl flex flex-col items-center justify-center gap-2 transition-transform hover:scale-105 active:scale-95 ${h.color}`,children:[O.jsx("span",{className:"text-3xl",children:h.icon}),O.jsx("span",{className:"text-sm font-medium",children:h.label})]},h.id)),O.jsxs("button",{onClick:()=>e(Gt.FAVORITES),className:"aspect-square rounded-2xl flex flex-col items-center justify-center gap-2 bg-[var(--bg-card)] border-2 border-dashed border-[var(--primary)]/30 text-[var(--text-sub)] hover:border-[var(--primary)] hover:text-[var(--primary)] transition-colors",children:[O.jsx("span",{className:"text-2xl",children:"+"}),O.jsx("span",{className:"text-sm font-medium",children:"Add"})]})]})]})]})})};var Jf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(ST,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,y,k;return k=function(){f=!1,g&&(y.apply(c,g),g=!1)},y=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(k,a),f=!0)},y}function v(r,a,c){var f=a[1],g=a[0],y=f-g;return r===f&&c?r:((r-g)%y+y)%y+g}function T(){return!1}function I(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function M(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return M(r).split(/\s+/)}function V(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function W(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function A(r,a){return r.replace(b,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function H(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var P=0;function w(r){var a=+new Date,c=Math.max(0,16-(a-P));return P=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||q("RequestAnimationFrame")||w,x=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function R(r,a,c){if(c&&S===w)r.call(a);else return S.call(window,l(r,a))}function D(r){r&&x.call(window,r)}var C={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:T,formatNum:I,trim:M,splitWords:F,setOptions:V,getParamString:W,template:A,isArray:N,indexOf:H,emptyImageUrl:Y,requestFn:S,cancelFn:x,requestAnimFrame:R,cancelAnimFrame:D};function Qe(){}Qe.extend=function(r){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(ni(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,k=f._initHooks.length;y<k;y++)f._initHooks[y].call(this)}},a},Qe.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Qe.mergeOptions=function(r){return s(this.prototype.options,r),this},Qe.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ni(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=N(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=F(r);for(var g=0,y=r.length;g<y;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=F(r);for(var g=arguments.length===1,y=0,k=r.length;y<k;y++)g?this._off(r[y]):this._off(r[y],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,y;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,y=f.length;g<y;g++)f[g].fn=T;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(r,a,c);if(k!==!1){var U=f[k];this._firingCount&&(U.fn=T,this._events[r]=f=f.slice()),f.splice(k,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var y=0,k=g.length;y<k;y++){var U=g[y],B=U.fn;U.once&&this.off(r,B,U.ctx),B.call(U.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,y=f.length;g<y;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=F(r);for(var g=0,y=r.length;g<y;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var Vt=Qe.extend(lt);function $(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var le=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new $(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new $(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function X(r,a,c){return r instanceof $?r:N(r)?new $(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new $(r.x,r.y):new $(r,a,c)}function ce(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ce.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof $||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=_e(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof $?r=X(r):r=_e(r),r instanceof ce?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=_e(r);var a=this.min,c=this.max,f=r.min,g=r.max,y=g.x>=a.x&&f.x<=c.x,k=g.y>=a.y&&f.y<=c.y;return y&&k},overlaps:function(r){r=_e(r);var a=this.min,c=this.max,f=r.min,g=r.max,y=g.x>a.x&&f.x<c.x,k=g.y>a.y&&f.y<c.y;return y&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return _e(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=_e(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function _e(r,a){return!r||r instanceof ce?r:new ce(r,a)}function Ie(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ie.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof ye)f=r,g=r;else if(r instanceof Ie){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(fe(r)||Le(r)):this;return!a&&!c?(this._southWest=new ye(f.lat,f.lng),this._northEast=new ye(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ie(new ye(a.lat-f,a.lng-g),new ye(c.lat+f,c.lng+g))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ye||"lat"in r?r=fe(r):r=Le(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Ie?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),y=g.lat>=a.lat&&f.lat<=c.lat,k=g.lng>=a.lng&&f.lng<=c.lng;return y&&k},overlaps:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),y=g.lat>a.lat&&f.lat<c.lat,k=g.lng>a.lng&&f.lng<c.lng;return y&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Le(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(r,a){return r instanceof Ie?r:new Ie(r,a)}function ye(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+I(this.lat,r)+", "+I(this.lng,r)+")"},distanceTo:function(r){return Un.distance(this,fe(r))},wrap:function(){return Un.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Le([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof ye?r:N(r)&&typeof r[0]!="object"?r.length===3?new ye(r[0],r[1],r[2]):r.length===2?new ye(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ye(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ye(r,a,c)}var ut={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ce(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ye(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var y=r.getSouthWest(),k=r.getNorthEast(),U=new ye(y.lat-f,y.lng-g),B=new ye(k.lat-f,k.lng-g);return new Ie(U,B)}},Un=s({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,y=Math.sin((a.lat-r.lat)*c/2),k=Math.sin((a.lng-r.lng)*c/2),U=y*y+Math.cos(f)*Math.cos(g)*k*k,B=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*B}}),Xl=6378137,Fi={R:Xl,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new $(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=Xl*Math.PI;return new ce([-r,-r],[r,r])}()};function zi(r,a,c,f){if(N(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}zi.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new $((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function ii(r,a,c,f){return new zi(r,a,c,f)}var Rr=s({},Un,{code:"EPSG:3857",projection:Fi,transformation:function(){var r=.5/(Math.PI*Fi.R);return ii(r,.5,-r,.5)}()}),$o=s({},Rr,{code:"EPSG:900913"});function _s(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function qo(r,a){var c="",f,g,y,k,U,B;for(f=0,y=r.length;f<y;f++){for(U=r[f],g=0,k=U.length;g<k;g++)B=U[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?ie.svg?"z":"x":""}return c||"M0 0"}var Zo=document.documentElement.style,vs="ActiveXObject"in window,Jl=vs&&!document.addEventListener,ys="msLaunchUri"in navigator&&!("documentMode"in document),ws=hn("webkit"),eu=hn("android"),Es=hn("android 2")||hn("android 3"),Go=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),tu=eu&&hn("Google")&&Go<537&&!("AudioNode"in window),it=!!window.opera,pt=!ys&&hn("chrome"),Lr=hn("gecko")&&!ws&&!it&&!vs,nu=!pt&&hn("safari"),Ko=hn("phantom"),iu="OTransition"in Zo,Nr=navigator.platform.indexOf("Win")===0,Qo=vs&&"transition"in Zo,Ts="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Es,Is="MozPerspective"in Zo,Wh=!window.L_DISABLE_3D&&(Qo||Ts||Is)&&!iu&&!Ko,br=typeof orientation<"u"||hn("mobile"),Yo=br&&ws,ru=br&&Ts,Xo=!window.PointerEvent&&window.MSPointerEvent,Ui=!!(window.PointerEvent||Xo),Ps="ontouchstart"in window||!!window.TouchEvent,Jo=!window.L_NO_TOUCH&&(Ps||Ui),ri=br&&it,su=br&&Lr,Ss=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ou=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",T,a),window.removeEventListener("testPassiveEventSupport",T,a)}catch{}return r}(),Or=function(){return!!document.createElement("canvas").getContext}(),xs=!!(document.createElementNS&&_s("svg").createSVGRect),wt=!!xs&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),au=!xs&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Mr=navigator.platform.indexOf("Mac")===0,Dr=navigator.platform.indexOf("Linux")===0;function hn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ie={ie:vs,ielt9:Jl,edge:ys,webkit:ws,android:eu,android23:Es,androidStock:tu,opera:it,chrome:pt,gecko:Lr,safari:nu,phantom:Ko,opera12:iu,win:Nr,ie3d:Qo,webkit3d:Ts,gecko3d:Is,any3d:Wh,mobile:br,mobileWebkit:Yo,mobileWebkit3d:ru,msPointer:Xo,pointer:Ui,touch:Jo,touchNative:Ps,mobileOpera:ri,mobileGecko:su,retina:Ss,passiveEvents:ou,canvas:Or,svg:xs,vml:au,inlineSvg:wt,mac:Mr,linux:Dr},si=ie.msPointer?"MSPointerDown":"pointerdown",lu=ie.msPointer?"MSPointerMove":"pointermove",uu=ie.msPointer?"MSPointerUp":"pointerup",Vr=ie.msPointer?"MSPointerCancel":"pointercancel",As={touchstart:si,touchmove:lu,touchend:uu,touchcancel:Vr},ks={touchstart:Rs,touchmove:Cs,touchend:Cs,touchcancel:Cs},xn={},An=!1;function cu(r,a,c){return a==="touchstart"&&du(),ks[a]?(c=ks[a].bind(this,c),r.addEventListener(As[a],c,!1),c):(console.warn("wrong event specified:",a),T)}function hu(r,a,c){if(!As[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(As[a],c,!1)}function ea(r){xn[r.pointerId]=r}function ta(r){xn[r.pointerId]&&(xn[r.pointerId]=r)}function na(r){delete xn[r.pointerId]}function du(){An||(document.addEventListener(si,ea,!0),document.addEventListener(lu,ta,!0),document.addEventListener(uu,na,!0),document.addEventListener(Vr,na,!0),An=!0)}function Cs(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in xn)a.touches.push(xn[c]);a.changedTouches=[a],r(a)}}function Rs(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&We(a),Cs(r,a)}function fu(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var ia=200;function Fr(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var k=ma(y);if(!(k.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!k.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var U=Date.now();U-c<=ia?(f++,f===2&&a(fu(y))):f=1,c=U}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function oi(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var zr=li(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ur=li(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ra=Ur==="webkitTransition"||Ur==="OTransition"?Ur+"End":"transitionend";function sa(r){return typeof r=="string"?document.getElementById(r):r}function Bi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Pe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ve(r){var a=r.parentNode;a&&a.removeChild(r)}function Br(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ai(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function ji(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function oa(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=dn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ge(r,a){if(r.classList!==void 0)for(var c=F(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!oa(r,a)){var y=dn(r);aa(r,(y?y+" ":"")+a)}}function Be(r,a){r.classList!==void 0?r.classList.remove(a):aa(r,M((" "+dn(r)+" ").replace(" "+a+" "," ")))}function aa(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function dn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Ye(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Ls(r,a)}function Ls(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function li(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Bn(r,a,c){var f=a||new $(0,0);r.style[zr]=(ie.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function he(r,a){r._leaflet_pos=a,ie.any3d?Bn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function fn(r){return r._leaflet_pos||new $(0,0)}var kn,Cn,la;if("onselectstart"in document)kn=function(){oe(window,"selectstart",We)},Cn=function(){Me(window,"selectstart",We)};else{var Hi=li(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kn=function(){if(Hi){var r=document.documentElement.style;la=r[Hi],r[Hi]="none"}},Cn=function(){Hi&&(document.documentElement.style[Hi]=la,la=void 0)}}function ua(){oe(window,"dragstart",We)}function ca(){Me(window,"dragstart",We)}var Ns,ha;function ui(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Jt(),Ns=r,ha=r.style.outlineStyle,r.style.outlineStyle="none",oe(window,"keydown",Jt))}function Jt(){Ns&&(Ns.style.outlineStyle=ha,Ns=void 0,ha=void 0,Me(window,"keydown",Jt))}function da(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function bs(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var pu={__proto__:null,TRANSFORM:zr,TRANSITION:Ur,TRANSITION_END:ra,get:sa,getStyle:Bi,create:Pe,remove:Ve,empty:Br,toFront:ai,toBack:ji,hasClass:oa,addClass:ge,removeClass:Be,setClass:aa,getClass:dn,setOpacity:Ye,testProp:li,setTransform:Bn,setPosition:he,getPosition:fn,get disableTextSelection(){return kn},get enableTextSelection(){return Cn},disableImageDrag:ua,enableImageDrag:ca,preventOutline:ui,restoreOutline:Jt,getSizedParentNode:da,getScale:bs};function oe(r,a,c,f){if(a&&typeof a=="object")for(var g in a)fa(r,g,a[g],c);else{a=F(a);for(var y=0,k=a.length;y<k;y++)fa(r,a[y],c,f)}return this}var pn="_leaflet_events";function Me(r,a,c,f){if(arguments.length===1)mu(r),delete r[pn];else if(a&&typeof a=="object")for(var g in a)pa(r,g,a[g],c);else if(a=F(a),arguments.length===2)mu(r,function(U){return H(a,U)!==-1});else for(var y=0,k=a.length;y<k;y++)pa(r,a[y],c,f);return this}function mu(r,a){for(var c in r[pn]){var f=c.split(/\d/)[0];(!a||a(f))&&pa(r,f,null,null,c)}}var mn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fa(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[pn]&&r[pn][g])return this;var y=function(U){return c.call(f||r,U||window.event)},k=y;!ie.touchNative&&ie.pointer&&a.indexOf("touch")===0?y=cu(r,a,y):ie.touch&&a==="dblclick"?y=Fr(r,y):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(mn[a]||a,y,ie.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(y=function(U){U=U||window.event,ga(r,U)&&k(U)},r.addEventListener(mn[a],y,!1)):r.addEventListener(a,k,!1):r.attachEvent("on"+a,y),r[pn]=r[pn]||{},r[pn][g]=y}function pa(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var y=r[pn]&&r[pn][g];if(!y)return this;!ie.touchNative&&ie.pointer&&a.indexOf("touch")===0?hu(r,a,y):ie.touch&&a==="dblclick"?oi(r,y):"removeEventListener"in r?r.removeEventListener(mn[a]||a,y,!1):r.detachEvent("on"+a,y),r[pn][g]=null}function gn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Wi(r){return fa(r,"wheel",gn),this}function $i(r){return oe(r,"mousedown touchstart dblclick contextmenu",gn),r._leaflet_disable_click=!0,this}function We(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function en(r){return We(r),gn(r),this}function ma(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Os(r,a){if(!a)return new $(r.clientX,r.clientY);var c=bs(a),f=c.boundingClientRect;return new $((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var je=ie.linux&&ie.chrome?window.devicePixelRatio:ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gu(r){return ie.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/je:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ga(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var _u={__proto__:null,on:oe,off:Me,stopPropagation:gn,disableScrollPropagation:Wi,disableClickPropagation:$i,preventDefault:We,stop:en,getPropagationPath:ma,getMousePosition:Os,getWheelDelta:gu,isExternalTarget:ga,addListener:oe,removeListener:Me},_a=Vt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=fn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),he(this._el,c),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ee=Vt.extend({options:{crs:Rr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ur&&ie.any3d&&!ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),oe(this._proxy,ra,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),y=r instanceof $?r:this.latLngToContainerPoint(r),k=y.subtract(g).multiplyBy(1-1/f),U=this.containerPointToLatLng(g.add(k));return this.setView(U,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Le(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var y=f.subtract(c).divideBy(2),k=this.project(r.getSouthWest(),g),U=this.project(r.getNorthEast(),g),B=this.unproject(k.add(U).divideBy(2).add(y),g);return{center:B,zoom:g}},fitBounds:function(r,a){if(r=Le(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _a,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ie.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),y=this.getSize(),k=this._zoom;r=fe(r),a=a===void 0?k:a;var U=Math.max(y.x,y.y),B=U*this.getZoomScale(k,a),Z=g.distanceTo(f)||1,ee=1.42,ae=ee*ee;function we(st){var bu=st?-1:1,ET=st?B:U,TT=B*B-U*U+bu*ae*ae*Z*Z,IT=2*ET*ae*Z,Yh=TT/IT,ag=Math.sqrt(Yh*Yh+1)-Yh,PT=ag<1e-9?-18:Math.log(ag);return PT}function zt(st){return(Math.exp(st)-Math.exp(-st))/2}function gt(st){return(Math.exp(st)+Math.exp(-st))/2}function vn(st){return zt(st)/gt(st)}var $t=we(0);function Zs(st){return U*(gt($t)/gt($t+ee*st))}function _T(st){return U*(gt($t)*vn($t+ee*st)-zt($t))/ae}function vT(st){return 1-Math.pow(1-st,1.5)}var yT=Date.now(),sg=(we(1)-$t)/ee,wT=c.duration?1e3*c.duration:1e3*sg*.8;function og(){var st=(Date.now()-yT)/wT,bu=vT(st)*sg;st<=1?(this._flyToFrame=R(og,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(_T(bu)/Z)),k),this.getScaleZoom(U/Zs(bu),k),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),og.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Le(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Le(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),y=this.project(r),k=this.getPixelBounds(),U=_e([k.min.add(c),k.max.subtract(f)]),B=U.getSize();if(!U.contains(y)){this._enforcingBounds=!0;var Z=y.subtract(U.getCenter()),ee=U.extend(y).getSize().subtract(B);g.x+=Z.x<0?-ee.x:ee.x,g.y+=Z.y<0?-ee.y:ee.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),y=f.subtract(g);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ye(a,c),g=f.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var k=this.getBoundsZoom(g);this.setView(f,y.maxZoom?Math.min(k,y.maxZoom):k)}var U={latlng:f,bounds:g,timestamp:r.timestamp};for(var B in r.coords)typeof r.coords[B]=="number"&&(U[B]=r.coords[B]);this.fire("locationfound",U)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Pe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ie(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Le(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),y=this.getMaxZoom(),k=r.getNorthWest(),U=r.getSouthEast(),B=this.getSize().subtract(c),Z=_e(this.project(U,f),this.project(k,f)).getSize(),ee=ie.any3d?this.options.zoomSnap:1,ae=B.x/Z.x,we=B.y/Z.y,zt=a?Math.max(ae,we):Math.min(ae,we);return f=this.getScaleZoom(zt,f),ee&&(f=Math.round(f/(ee/100))*(ee/100),f=a?Math.ceil(f/ee)*ee:Math.floor(f/ee)*ee),Math.max(g,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ce(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Le(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return Os(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=sa(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");oe(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ie.any3d,ge(r,"leaflet-container"+(ie.touch?" leaflet-touch":"")+(ie.retina?" leaflet-retina":"")+(ie.ielt9?" leaflet-oldie":"")+(ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Bi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),he(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(r.markerPane,"leaflet-zoom-hide"),ge(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){he(this._mapPane,new $(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){he(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Me:oe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ie.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",y=r.target||r.srcElement,k=!1;y;){if(f=this._targets[d(y)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(g&&!ga(y,r)||(c.push(f),g))||y===this._container)break;y=y.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ui(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var y=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&y.push(c[k]);g=y.concat(g)}if(g.length){a==="contextmenu"&&We(r);var U=g[0],B={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Z=U.getLatLng&&(!U._radius||U._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(r),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?U.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,B,!0),B.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return fn(this._mapPane)||new $(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return _e([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),y=new ce(f.subtract(g),f.add(g)),k=this._getBoundsOffset(y,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?r:this.unproject(f.add(k),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ce(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=_e(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),y=f.max.subtract(r.max),k=this._rebound(g.x,-y.x),U=this._rebound(g.y,-y.y);return new $(k,U)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ie.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=zr,f=this._proxy.style[c];Bn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Bn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(R(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ms(r,a){return new Ee(r,a)}var Wt=Qe.extend({options:{position:"topright"},initialize:function(r){V(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return ge(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Ft=function(r){return new Wt(r)};Ee.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Pe("div",a+"control-container",this._container);function f(g,y){var k=a+g+" "+a+y;r[g+y]=Pe("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ve(this._controlCorners[r]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var va=Wt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Wt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Pe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),$i(a),Wi(a);var f=this._section=Pe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),oe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Pe("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),oe(g,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){We(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Pe("div",r+"-base",f),this._separator=Pe("div",r+"-separator",f),this._overlaysList=Pe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Br(this._baseLayersList),Br(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),oe(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var y=document.createElement("span");a.appendChild(y),y.appendChild(f),y.appendChild(g);var k=r.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)a=r[y],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(y=0;y<g.length;y++)this._map.hasLayer(g[y])&&this._map.removeLayer(g[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,oe(r,"click",We),this.expand();var a=this;setTimeout(function(){Me(r,"click",We),a._preventClick=!1})}}),$h=function(r,a,c){return new va(r,a,c)},ci=Wt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Pe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var y=Pe("a",c,f);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),$i(y),oe(y,"click",en),oe(y,"click",g,this),oe(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Be(this._zoomInButton,a),Be(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ge(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ge(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ci,this.addControl(this.zoomControl))});var vu=function(r){return new ci(r)},Ds=Wt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Pe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Pe("div",a,c)),r.imperial&&(this._iScale=Pe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Vs=function(r){return new Ds(r)},yu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qi=Wt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ie.inlineSvg?yu+" ":"")+"Leaflet</a>"},initialize:function(r){V(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),$i(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new qi().addTo(this)});var qh=function(r){return new qi(r)};Wt.Layers=va,Wt.Zoom=ci,Wt.Scale=Ds,Wt.Attribution=qi,Ft.layers=$h,Ft.zoom=vu,Ft.scale=Vs,Ft.attribution=qh;var tn=Qe.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(r,a){return r.addHandler(a,this),this};var jr={Events:lt},ya=ie.touch?"touchstart mousedown":"mousedown",Rn=Vt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){V(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(oe(this._dragStartTarget,ya,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rn._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,ya,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!oa(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Rn._dragging===this&&this.finishDrag();return}if(!(Rn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Rn._dragging=this,this._preventOutline&&ui(this._element),ua(),kn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=da(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=fn(this._element),this._parentScale=bs(c);var f=r.type==="mousedown";oe(document,f?"mousemove":"touchmove",this._onMove,this),oe(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new $(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,We(r),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),he(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Be(document.body,"leaflet-dragging"),this._lastTarget&&(Be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),ca(),Cn();var a=this._moved&&this._moving;this._moving=!1,Rn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Fs(r,a,c){var f,g=[1,4,2,8],y,k,U,B,Z,ee,ae,we;for(y=0,ee=r.length;y<ee;y++)r[y]._code=jn(r[y],a);for(U=0;U<4;U++){for(ae=g[U],f=[],y=0,ee=r.length,k=ee-1;y<ee;k=y++)B=r[y],Z=r[k],B._code&ae?Z._code&ae||(we=mt(Z,B,ae,a,c),we._code=jn(we,a),f.push(we)):(Z._code&ae&&(we=mt(Z,B,ae,a,c),we._code=jn(we,a),f.push(we)),f.push(B));r=f}return r}function zs(r,a){var c,f,g,y,k,U,B,Z,ee;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ae=fe([0,0]),we=Le(r),zt=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());zt<1700&&(ae=Us(r));var gt=r.length,vn=[];for(c=0;c<gt;c++){var $t=fe(r[c]);vn.push(a.project(fe([$t.lat-ae.lat,$t.lng-ae.lng])))}for(U=B=Z=0,c=0,f=gt-1;c<gt;f=c++)g=vn[c],y=vn[f],k=g.y*y.x-y.y*g.x,B+=(g.x+y.x)*k,Z+=(g.y+y.y)*k,U+=k*3;U===0?ee=vn[0]:ee=[B/U,Z/U];var Zs=a.unproject(X(ee));return fe([Zs.lat+ae.lat,Zs.lng+ae.lng])}function Us(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var y=fe(r[g]);a+=y.lat,c+=y.lng,f++}return fe([a/f,c/f])}var Bs={__proto__:null,clipPolygon:Fs,polygonCenter:zs,centroid:Us};function wa(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Eu(r,c),r=wu(r,c),r}function Ea(r,a,c){return Math.sqrt(_n(r,a,c,!0))}function hi(r,a,c){return _n(r,a,c)}function wu(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,js(r,g,a,0,c-1);var y,k=[];for(y=0;y<c;y++)g[y]&&k.push(r[y]);return k}function js(r,a,c,f,g){var y=0,k,U,B;for(U=f+1;U<=g-1;U++)B=_n(r[U],r[f],r[g],!0),B>y&&(k=U,y=B);y>c&&(a[k]=1,js(r,a,c,f,k),js(r,a,c,k,g))}function Eu(r,a){for(var c=[r[0]],f=1,g=0,y=r.length;f<y;f++)Tu(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<y-1&&c.push(r[y-1]),c}var Ta;function Hr(r,a,c,f,g){var y=f?Ta:jn(r,c),k=jn(a,c),U,B,Z;for(Ta=k;;){if(!(y|k))return[r,a];if(y&k)return!1;U=y||k,B=mt(r,a,U,c,g),Z=jn(B,c),U===y?(r=B,y=Z):(a=B,k=Z)}}function mt(r,a,c,f,g){var y=a.x-r.x,k=a.y-r.y,U=f.min,B=f.max,Z,ee;return c&8?(Z=r.x+y*(B.y-r.y)/k,ee=B.y):c&4?(Z=r.x+y*(U.y-r.y)/k,ee=U.y):c&2?(Z=B.x,ee=r.y+k*(B.x-r.x)/y):c&1&&(Z=U.x,ee=r.y+k*(U.x-r.x)/y),new $(Z,ee,g)}function jn(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Tu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function _n(r,a,c,f){var g=a.x,y=a.y,k=c.x-g,U=c.y-y,B=k*k+U*U,Z;return B>0&&(Z=((r.x-g)*k+(r.y-y)*U)/B,Z>1?(g=c.x,y=c.y):Z>0&&(g+=k*Z,y+=U*Z)),k=r.x-g,U=r.y-y,f?k*k+U*U:new $(g,y)}function u(r){return!N(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function _(r,a){var c,f,g,y,k,U,B,Z;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=fe([0,0]),ae=Le(r),we=ae.getNorthWest().distanceTo(ae.getSouthWest())*ae.getNorthEast().distanceTo(ae.getNorthWest());we<1700&&(ee=Us(r));var zt=r.length,gt=[];for(c=0;c<zt;c++){var vn=fe(r[c]);gt.push(a.project(fe([vn.lat-ee.lat,vn.lng-ee.lng])))}for(c=0,f=0;c<zt-1;c++)f+=gt[c].distanceTo(gt[c+1])/2;if(f===0)Z=gt[0];else for(c=0,y=0;c<zt-1;c++)if(k=gt[c],U=gt[c+1],g=k.distanceTo(U),y+=g,y>f){B=(y-f)/g,Z=[U.x-B*(U.x-k.x),U.y-B*(U.y-k.y)];break}var $t=a.unproject(X(Z));return fe([$t.lat+ee.lat,$t.lng+ee.lng])}var E={__proto__:null,simplify:wa,pointToSegmentDistance:Ea,closestPointOnSegment:hi,clipSegment:Hr,_getEdgeIntersection:mt,_getBitCode:jn,_sqClosestPointOnSegment:_n,isFlat:u,_flat:p,polylineCenter:_},z={project:function(r){return new $(r.lng,r.lat)},unproject:function(r){return new ye(r.y,r.x)},bounds:new ce([-180,-90],[180,90])},j={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,y=Math.sqrt(1-g*g),k=y*Math.sin(f),U=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),y/2);return f=-c*Math.log(Math.max(U,1e-10)),new $(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),y=Math.exp(-r.y/c),k=Math.PI/2-2*Math.atan(y),U=0,B=.1,Z;U<15&&Math.abs(B)>1e-7;U++)Z=g*Math.sin(k),Z=Math.pow((1-Z)/(1+Z),g/2),B=Math.PI/2-2*Math.atan(y*Z)-k,k+=B;return new ye(k*a,r.x*a/c)}},J={__proto__:null,LonLat:z,Mercator:j,SphericalMercator:Fi},Ne=s({},Un,{code:"EPSG:3395",projection:j,transformation:function(){var r=.5/(Math.PI*j.R);return ii(r,.5,-r,.5)}()}),rt=s({},Un,{code:"EPSG:4326",projection:z,transformation:ii(1/180,1,-1/180,.5)}),Ae=s({},ut,{projection:z,transformation:ii(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ut.Earth=Un,ut.EPSG3395=Ne,ut.EPSG3857=Rr,ut.EPSG900913=$o,ut.EPSG4326=rt,ut.Simple=Ae;var De=Vt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?N(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $e=De.extend({initialize:function(r,a){V(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Zi=function(r,a){return new $e(r,a)},et=$e.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),$e.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),$e.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ie;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Hs=function(r,a){return new et(r,a)},Hn=Qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){V(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),y=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ie.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function XE(r){return new Hn(r)}var Ia=Hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ia.imagePath!="string"&&(Ia.imagePath=this._detectIconPath()),(this.options.imagePath||Ia.imagePath)+Hn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var y=f.exec(c);return y&&y[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),a=Bi(r,"background-image")||Bi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Um=tn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Rn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,y=fn(a._icon),k=c.getPixelBounds(),U=c.getPixelOrigin(),B=_e(k.min._subtract(U).add(g),k.max._subtract(U).subtract(g));if(!B.contains(y)){var Z=X((Math.max(B.max.x,y.x)-B.max.x)/(k.max.x-B.max.x)-(Math.min(B.min.x,y.x)-B.min.x)/(k.min.x-B.min.x),(Math.max(B.max.y,y.y)-B.max.y)/(k.max.y-B.max.y)-(Math.min(B.min.y,y.y)-B.min.y)/(k.min.y-B.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),he(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=R(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=fn(a._icon),g=a._map.layerPointToLatLng(f);c&&he(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Iu=De.extend({options:{icon:new Ia,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){V(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ge(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),y=!1;g!==this._shadow&&(this._removeShadow(),y=!0),g&&(ge(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&he(this._icon,r),this._shadow&&he(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Um)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Um(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Ye(this._icon,r),this._shadow&&Ye(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function JE(r,a){return new Iu(r,a)}var Gi=De.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return V(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pu=Gi.extend({options:{fill:!0,radius:10},initialize:function(r,a){V(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Gi.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ce(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function eT(r,a){return new Pu(r,a)}var Zh=Pu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),V(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Gi.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Un.distance){var g=Math.PI/180,y=this._mRadius/Un.R/g,k=c.project([a+y,r]),U=c.project([a-y,r]),B=k.add(U).divideBy(2),Z=c.unproject(B).lat,ee=Math.acos((Math.cos(y*g)-Math.sin(a*g)*Math.sin(Z*g))/(Math.cos(a*g)*Math.cos(Z*g)))/g;(isNaN(ee)||ee===0)&&(ee=y/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:B.x-c.project([Z,r-ee]).x,this._radiusY=B.y-k.y}else{var ae=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ae).x}this._updateBounds()}});function tT(r,a,c){return new Zh(r,a,c)}var di=Gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){V(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=_n,g,y,k=0,U=this._parts.length;k<U;k++)for(var B=this._parts[k],Z=1,ee=B.length;Z<ee;Z++){g=B[Z-1],y=B[Z];var ae=f(r,g,y,!0);ae<a&&(a=ae,c=f(r,g,y))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ie,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,g=r.length;f<g;f++)c?(a[f]=fe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new $(r,r);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ye,g=r.length,y,k;if(f){for(k=[],y=0;y<g;y++)k[y]=this._map.latLngToLayerPoint(r[y]),c.extend(k[y]);a.push(k)}else for(y=0;y<g;y++)this._projectLatlngs(r[y],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,y,k,U,B;for(c=0,g=0,y=this._rings.length;c<y;c++)for(B=this._rings[c],f=0,k=B.length;f<k-1;f++)U=Hr(B[f],B[f+1],r,f,!0),U&&(a[g]=a[g]||[],a[g].push(U[0]),(U[1]!==B[f+1]||f===k-2)&&(a[g].push(U[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=wa(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,y,k,U,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(U=this._parts[c],f=0,k=U.length,g=k-1;f<k;g=f++)if(!(!a&&f===0)&&Ea(r,U[g],U[f])<=B)return!0;return!1}});function nT(r,a){return new di(r,a)}di._flat=p;var Ws=di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=di.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ye&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){di.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new $(a,a);if(r=new ce(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,y;f<g;f++)y=Fs(this._rings[f],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,y,k,U,B,Z;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,B=this._parts.length;y<B;y++)for(c=this._parts[y],k=0,Z=c.length,U=Z-1;k<Z;U=k++)f=c[k],g=c[U],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||di.prototype._containsPoint.call(this,r,!0)}});function iT(r,a){return new Ws(r,a)}var fi=et.extend({initialize:function(r,a){V(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=N(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var k=Su(r,y);return k?(k.feature=ku(r),k.defaultOptions=k.options,this.resetStyle(k),y.onEachFeature&&y.onEachFeature(r,k),this.addLayer(k)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Su(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],y=a&&a.pointToLayer,k=a&&a.coordsToLatLng||Gh,U,B,Z,ee;if(!f&&!c)return null;switch(c.type){case"Point":return U=k(f),Bm(y,r,U,a);case"MultiPoint":for(Z=0,ee=f.length;Z<ee;Z++)U=k(f[Z]),g.push(Bm(y,r,U,a));return new et(g);case"LineString":case"MultiLineString":return B=xu(f,c.type==="LineString"?0:1,k),new di(B,a);case"Polygon":case"MultiPolygon":return B=xu(f,c.type==="Polygon"?1:2,k),new Ws(B,a);case"GeometryCollection":for(Z=0,ee=c.geometries.length;Z<ee;Z++){var ae=Su({geometry:c.geometries[Z],type:"Feature",properties:r.properties},a);ae&&g.push(ae)}return new et(g);case"FeatureCollection":for(Z=0,ee=c.features.length;Z<ee;Z++){var we=Su(c.features[Z],a);we&&g.push(we)}return new et(g);default:throw new Error("Invalid GeoJSON object.")}}function Bm(r,a,c,f){return r?r(a,c):new Iu(c,f&&f.markersInheritOptions&&f)}function Gh(r){return new ye(r[1],r[0],r[2])}function xu(r,a,c){for(var f=[],g=0,y=r.length,k;g<y;g++)k=a?xu(r[g],a-1,c):(c||Gh)(r[g]),f.push(k);return f}function Kh(r,a){return r=fe(r),r.alt!==void 0?[I(r.lng,a),I(r.lat,a),I(r.alt,a)]:[I(r.lng,a),I(r.lat,a)]}function Au(r,a,c,f){for(var g=[],y=0,k=r.length;y<k;y++)g.push(a?Au(r[y],u(r[y])?0:a-1,c,f):Kh(r[y],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function $s(r,a){return r.feature?s({},r.feature,{geometry:a}):ku(a)}function ku(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Qh={toGeoJSON:function(r){return $s(this,{type:"Point",coordinates:Kh(this.getLatLng(),r)})}};Iu.include(Qh),Zh.include(Qh),Pu.include(Qh),di.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=Au(this._latlngs,a?1:0,!1,r);return $s(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Ws.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Au(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),$s(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),$e.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),$s(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var y=g.toGeoJSON(r);if(c)f.push(y.geometry);else{var k=ku(y);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?$s(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function jm(r,a){return new fi(r,a)}var rT=jm,Cu=De.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Le(a),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&ai(this._image),this},bringToBack:function(){return this._map&&ji(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Le(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Pe("img");if(ge(a,"leaflet-image-layer"),this._zoomAnimated&&ge(a,"leaflet-zoom-animated"),this.options.className&&ge(a,this.options.className),a.onselectstart=T,a.onmousemove=T,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Bn(this._image,c,a)},_reset:function(){var r=this._image,a=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();he(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Ye(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),sT=function(r,a,c){return new Cu(r,a,c)},Hm=Cu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Pe("video");if(ge(a,"leaflet-image-layer"),this._zoomAnimated&&ge(a,"leaflet-zoom-animated"),this.options.className&&ge(a,this.options.className),a.onselectstart=T,a.onmousemove=T,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var k=Pe("source");k.src=this._url[y],a.appendChild(k)}}});function oT(r,a,c){return new Hm(r,a,c)}var Wm=Cu.extend({_initImage:function(){var r=this._image=this._url;ge(r,"leaflet-image-layer"),this._zoomAnimated&&ge(r,"leaflet-zoom-animated"),this.options.className&&ge(r,this.options.className),r.onselectstart=T,r.onmousemove=T}});function aT(r,a,c){return new Wm(r,a,c)}var Wn=De.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ye||N(r))?(this._latlng=fe(r),V(this,a)):(V(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Ye(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Ye(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Ye(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ai(this._container),this},bringToBack:function(){return this._map&&ji(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof et){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?he(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),De.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(V(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Ru=Wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Wn.prototype.openOn.call(this,r)},onAdd:function(r){Wn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gi||this._source.on("preclick",gn))},onRemove:function(r){Wn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gi||this._source.off("preclick",gn))},getEvents:function(){var r=Wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Pe("div",r+"-content-wrapper",a);if(this._contentNode=Pe("div",r+"-content",c),$i(a),Wi(this._contentNode),oe(a,"contextmenu",gn),this._tipContainer=Pe("div",r+"-tip-container",a),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',oe(f,"click",function(g){We(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,y="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ge(r,y)):Be(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();he(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Bi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new $(this._containerLeft,-c-this._containerBottom);g._add(fn(this._container));var y=r.layerPointToContainerPoint(g),k=X(this.options.autoPanPadding),U=X(this.options.autoPanPaddingTopLeft||k),B=X(this.options.autoPanPaddingBottomRight||k),Z=r.getSize(),ee=0,ae=0;y.x+f+B.x>Z.x&&(ee=y.x+f-Z.x+B.x),y.x-ee-U.x<0&&(ee=y.x-U.x),y.y+c+B.y>Z.y&&(ae=y.y+c-Z.y+B.y),y.y-ae-U.y<0&&(ae=y.y-U.y),(ee||ae)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,ae]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lT=function(r,a){return new Ru(r,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(r,a,c){return this._initOverlay(Ru,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),De.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Ru,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof et||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){en(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Gi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Lu=Wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Wn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Wn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Wn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,y=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(r),U=this.options.direction,B=g.offsetWidth,Z=g.offsetHeight,ee=X(this.options.offset),ae=this._getAnchor();U==="top"?(a=B/2,c=Z):U==="bottom"?(a=B/2,c=0):U==="center"?(a=B/2,c=Z/2):U==="right"?(a=0,c=Z/2):U==="left"?(a=B,c=Z/2):k.x<y.x?(U="right",a=0,c=Z/2):(U="left",a=B+(ee.x+ae.x)*2,c=Z/2),r=r.subtract(X(a,c,!0)).add(ee).add(ae),Be(g,"leaflet-tooltip-right"),Be(g,"leaflet-tooltip-left"),Be(g,"leaflet-tooltip-top"),Be(g,"leaflet-tooltip-bottom"),ge(g,"leaflet-tooltip-"+U),he(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Ye(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),uT=function(r,a){return new Lu(r,a)};Ee.include({openTooltip:function(r,a,c){return this._initOverlay(Lu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),De.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Lu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof et||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(oe(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),oe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var $m=Hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Br(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function cT(r){return new $m(r)}Hn.Default=Ia;var Pa=De.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){V(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ai(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ji(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof $?r:new $(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,y;f<g;f++)y=a[f].style.zIndex,a[f]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ie.ielt9){Ye(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var y=Math.min(1,(r-g.loaded)/200);Ye(g.el,y),y<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(D(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),T(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),y=Math.floor(a/2),k=c-1,U=new $(+g,+y);U.z=+k;var B=this._tileCoordsToKey(U),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),k>f?this._retainParent(g,y,k,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var y=2*a;y<2*a+2;y++){var k=new $(g,y);k.z=c+1;var U=this._tileCoordsToKey(k),B=this._tiles[U];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,y,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var y=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||y)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ie.any3d?Bn(r.el,g,f):he(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(f*2);return new ce(g.subtract(y),g.add(y))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),y=g.getCenter(),k=[],U=this.options.keepBuffer,B=new ce(g.getBottomLeft().subtract([U,-U]),g.getTopRight().add([U,-U]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var ee=this._tiles[Z].coords;(ee.z!==this._tileZoom||!B.contains(new $(ee.x,ee.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var ae=g.min.y;ae<=g.max.y;ae++)for(var we=g.min.x;we<=g.max.x;we++){var zt=new $(we,ae);if(zt.z=this._tileZoom,!!this._isValidTile(zt)){var gt=this._tiles[this._tileCoordsToKey(zt)];gt?gt.current=!0:k.push(zt)}}if(k.sort(function($t,Zs){return $t.distanceTo(y)-Zs.distanceTo(y)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var vn=document.createDocumentFragment();for(we=0;we<k.length;we++)this._addTile(k[we],vn);this._level.el.appendChild(vn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Le(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),y=a.unproject(f,r.z),k=a.unproject(g,r.z);return[y,k]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ie(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new $(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ve(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ge(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=T,r.onmousemove=T,ie.ielt9&&this.options.opacity<1&&Ye(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&R(l(this._tileReady,this,r,null,g)),he(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Ye(c.el,0),D(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ge(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ie.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new $(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ce(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function hT(r){return new Pa(r)}var qs=Pa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=V(this,a),a.detectRetina&&ie.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return oe(c,"load",l(this._tileOnLoad,this,a,c)),oe(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ie.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return A(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ie.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=T,a.onerror=T,!a.complete)){a.src=Y;var c=this._tiles[r].coords;Ve(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Y),Pa.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Pa.prototype._tileReady.call(this,r,a,c)}});function qm(r,a){return new qs(r,a)}var Zm=qs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=V(this,a);var g=a.detectRetina&&ie.retina?2:1,y=this.getTileSize();c.width=y.x*g,c.height=y.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,qs.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=_e(c.project(a[0]),c.project(a[1])),g=f.min,y=f.max,k=(this._wmsVersion>=1.3&&this._crs===rt?[g.y,g.x,y.y,y.x]:[g.x,g.y,y.x,y.y]).join(","),U=qs.prototype.getTileUrl.call(this,r);return U+W(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function dT(r,a){return new Zm(r,a)}qs.WMS=Zm,qm.wms=dT;var pi=De.extend({options:{padding:.1},initialize:function(r){V(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),y=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));ie.any3d?Bn(this._container,y,c):he(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ce(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gm=pi.extend({options:{tolerance:0},getEvents:function(){var r=pi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");oe(r,"mousemove",this._onMouseMove,this),oe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),oe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,Ve(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ie.retina?2:1;he(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,y,k=r._parts,U=k.length,B=this._ctx;if(U){for(B.beginPath(),c=0;c<U;c++){for(f=0,g=k[c].length;f<g;f++)y=k[c][f],B[f?"lineTo":"moveTo"](y.x,y.y);a&&B.closePath()}this._fillStroke(B,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Be(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(ge(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Km(r){return ie.canvas?new Gm(r):null}var Sa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),fT={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Sa("shape");ge(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Sa("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ve(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Sa("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Sa("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){ai(r._container)},_bringToBack:function(r){ji(r._container)}},Nu=ie.vml?Sa:_s,xa=pi.extend({_initContainer:function(){this._container=Nu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Nu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),he(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Nu("path");r.options.className&&ge(a,r.options.className),r.options.interactive&&ge(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,qo(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){ai(r._path)},_bringToBack:function(r){ji(r._path)}});ie.vml&&xa.include(fT);function Qm(r){return ie.svg||ie.vml?new xa(r):null}Ee.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Km(r)||Qm(r)}});var Ym=Ws.extend({initialize:function(r,a){Ws.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Le(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function pT(r,a){return new Ym(r,a)}xa.create=Nu,xa.pointsToPath=qo,fi.geometryToLayer=Su,fi.coordsToLatLng=Gh,fi.coordsToLatLngs=xu,fi.latLngToCoords=Kh,fi.latLngsToCoords=Au,fi.getFeature=$s,fi.asFeature=ku,Ee.mergeOptions({boxZoom:!0});var Xm=tn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kn(),ua(),this._startPoint=this._map.mouseEventToContainerPoint(r),oe(document,{contextmenu:en,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ce(this._point,this._startPoint),c=a.getSize();he(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),Be(this._container,"leaflet-crosshair")),Cn(),ca(),Me(document,{contextmenu:en,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",Xm),Ee.mergeOptions({doubleClickZoom:!0});var Jm=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",Jm),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eg=tn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Rn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Be(this._map._container,"leaflet-grab"),Be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Le(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,y=(f+a+c)%r-a-c,k=Math.abs(g+c)<Math.abs(y+c)?g:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,U=g.multiplyBy(k/y),B=U.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),ee=U.multiplyBy(Z/B),ae=Z/(c.inertiaDeceleration*k),we=ee.multiplyBy(-ae/2).round();!we.x&&!we.y?a.fire("moveend"):(we=a._limitOffset(we,a.options.maxBounds),R(function(){a.panBy(we,{duration:ae,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",eg),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tg=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),oe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;en(r)}}});Ee.addInitHook("addHandler","keyboard",tg),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ng=tn.extend({addHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=gu(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),en(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=c?Math.ceil(g/c)*c:g,k=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,k&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+k):r.setZoomAround(this._lastMousePos,a+k))}});Ee.addInitHook("addHandler","scrollWheelZoom",ng);var mT=600;Ee.mergeOptions({tapHold:ie.touchNative&&ie.safari&&ie.mobile,tapTolerance:15});var ig=tn.extend({addHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(oe(document,"touchend",We),oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),mT),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Me(document,"touchend",We),Me(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",ig),Ee.mergeOptions({touchZoom:ie.touch,bounceAtZoomLimits:!0});var rg=tn.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),We(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var y=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&y.x===0&&y.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(k,this,!0),We(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",rg),Ee.BoxZoom=Xm,Ee.DoubleClickZoom=Jm,Ee.Drag=eg,Ee.Keyboard=tg,Ee.ScrollWheelZoom=ng,Ee.TapHold=ig,Ee.TouchZoom=rg,n.Bounds=ce,n.Browser=ie,n.CRS=ut,n.Canvas=Gm,n.Circle=Zh,n.CircleMarker=Pu,n.Class=Qe,n.Control=Wt,n.DivIcon=$m,n.DivOverlay=Wn,n.DomEvent=_u,n.DomUtil=pu,n.Draggable=Rn,n.Evented=Vt,n.FeatureGroup=et,n.GeoJSON=fi,n.GridLayer=Pa,n.Handler=tn,n.Icon=Hn,n.ImageOverlay=Cu,n.LatLng=ye,n.LatLngBounds=Ie,n.Layer=De,n.LayerGroup=$e,n.LineUtil=E,n.Map=Ee,n.Marker=Iu,n.Mixin=jr,n.Path=Gi,n.Point=$,n.PolyUtil=Bs,n.Polygon=Ws,n.Polyline=di,n.Popup=Ru,n.PosAnimation=_a,n.Projection=J,n.Rectangle=Ym,n.Renderer=pi,n.SVG=xa,n.SVGOverlay=Wm,n.TileLayer=qs,n.Tooltip=Lu,n.Transformation=zi,n.Util=C,n.VideoOverlay=Hm,n.bind=l,n.bounds=_e,n.canvas=Km,n.circle=tT,n.circleMarker=eT,n.control=Ft,n.divIcon=cT,n.extend=s,n.featureGroup=Hs,n.geoJSON=jm,n.geoJson=rT,n.gridLayer=hT,n.icon=XE,n.imageOverlay=sT,n.latLng=fe,n.latLngBounds=Le,n.layerGroup=Zi,n.map=Ms,n.marker=JE,n.point=X,n.polygon=iT,n.polyline=nT,n.popup=lT,n.rectangle=pT,n.setOptions=V,n.stamp=d,n.svg=Qm,n.svgOverlay=aT,n.tileLayer=qm,n.tooltip=uT,n.transformation=ii,n.version=i,n.videoOverlay=oT;var gT=window.L;n.noConflict=function(){return window.L=gT,this},window.L=n})})(Jf,Jf.exports);var oL=Jf.exports;const Fa=Cv(oL),aL=({noiseLevel:t,userSensitivity:e})=>{const[n,i]=ve.useState(""),[s,o]=ve.useState(!1),l=ve.useRef(null),h=ve.useRef(null),[d,m]=ve.useState(!1);return ve.useEffect(()=>{if(!l.current||h.current)return;const v=Fa.map(l.current).setView([40.7128,-74.006],14);h.current=v,Fa.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(v);const T=Fa.divIcon({className:"custom-div-icon",html:'<div style="background-color: #3b82f6; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 10px rgba(59,130,246,0.5);"></div>',iconSize:[12,12],iconAnchor:[6,6]});return Fa.marker([40.7128,-74.006],{icon:T}).addTo(v).bindPopup("You are here").openPopup(),[{lat:40.715,lng:-74.008,rad:300},{lat:40.711,lng:-74.002,rad:200}].forEach(M=>{Fa.circle([M.lat,M.lng],{color:"red",fillColor:"#f03",fillOpacity:.2,radius:M.rad,stroke:!1}).addTo(v).bindPopup("High Noise Area (>80dB)")}),v.on("click",()=>{m(!0)}),setTimeout(()=>{v.invalidateSize()},100),()=>{v.remove(),h.current=null}},[]),O.jsxs("div",{className:"relative w-full h-full bg-gray-200 overflow-hidden",children:[O.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 z-[400] pt-4 md:pt-4 bg-gradient-to-b from-white/90 to-transparent pointer-events-none",children:[O.jsxs("div",{className:"relative shadow-lg rounded-xl pointer-events-auto max-w-md mx-auto",children:[O.jsx(xi,{placeholder:"Search destination...",value:n,onChange:v=>i(v.target.value),className:"pl-12 py-3 border-none shadow-sm",onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),200)}),O.jsx("svg",{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),s&&O.jsxs("div",{className:"mt-2 bg-white rounded-xl shadow-xl p-2 animate-fade-in pointer-events-auto max-w-md mx-auto",children:[O.jsxs("div",{className:"p-3 hover:bg-emerald-50 rounded-lg cursor-pointer flex items-center gap-3",children:[O.jsx("span",{className:"p-2 bg-gray-100 rounded-full",children:""}),O.jsxs("div",{children:[O.jsx("p",{className:"font-medium text-gray-800",children:"Central Park"}),O.jsx("p",{className:"text-xs text-gray-500",children:"New York, NY"})]})]}),O.jsxs("div",{className:"p-3 hover:bg-emerald-50 rounded-lg cursor-pointer flex items-center gap-3",children:[O.jsx("span",{className:"p-2 bg-gray-100 rounded-full",children:""}),O.jsxs("div",{children:[O.jsx("p",{className:"font-medium text-gray-800",children:"Quiet Cafe"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Main St, Brooklyn"})]})]})]})]}),O.jsx("div",{ref:l,className:"w-full h-full z-0"}),d&&O.jsxs("div",{className:"absolute bottom-24 md:bottom-8 left-4 right-4 md:left-auto md:right-4 md:w-80 bg-[var(--bg-card)] p-4 rounded-2xl shadow-xl z-[400] border border-[var(--primary)]/20 animate-slide-up",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[O.jsxs("div",{className:"flex-1",children:[O.jsx("h3",{className:"font-bold text-[var(--text-main)] text-lg",children:"Recommended Route"}),O.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[O.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded",children:"QUIET"}),O.jsx("span",{className:"text-sm text-[var(--text-sub)]",children:"15 min  1.2 km"})]})]}),O.jsx("div",{className:"text-right",children:O.jsx("button",{onClick:()=>m(!1),className:"block px-4 py-2 bg-[var(--primary)] text-white rounded-lg font-bold shadow-md hover:bg-[var(--primary-hover)]",children:"Go"})})]}),O.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:O.jsx("div",{className:"bg-emerald-500 w-2/3 h-full"})}),O.jsx("p",{className:"text-xs text-[var(--text-sub)] mt-2 text-center",children:"Avoids construction on 5th Ave"})]}),O.jsxs("div",{className:"absolute right-4 bottom-32 md:bottom-48 z-[400] flex flex-col gap-3",children:[O.jsx("button",{className:"p-3 bg-white rounded-full shadow-lg text-gray-600 hover:text-emerald-600",children:O.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),O.jsx("button",{className:"p-3 bg-white rounded-full shadow-lg text-gray-600 hover:text-emerald-600",children:O.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),O.jsxs("div",{className:"absolute top-24 right-4 z-[400] bg-white/90 backdrop-blur px-3 py-1 rounded-full shadow-sm border border-gray-200 text-xs font-bold flex items-center gap-2",children:[O.jsx("div",{className:`w-2 h-2 rounded-full ${t>e?"bg-red-500 animate-pulse":"bg-green-500"}`}),O.jsxs("span",{children:["Live: ",t," dB"]})]})]})},lL=({favorites:t,onAddFavorite:e,onUpdateFavorite:n})=>{const[i,s]=ve.useState(!1),[o,l]=ve.useState(null),[h,d]=ve.useState(""),[m,v]=ve.useState(""),[T,I]=ve.useState(""),[M,F]=ve.useState(!1),V=async()=>{!h||!m||(F(!0),await e({name:h,address:m,type:"other"}),d(""),v(""),s(!1),F(!1))},W=q=>{l(q.id),I(q.address)},b=async q=>{F(!0),await n(q,{address:T}),l(null),F(!1)},A=t.find(q=>q.type==="home"),N=t.find(q=>q.type==="work"),H=t.filter(q=>q.type!=="home"&&q.type!=="work"),Y=q=>{const P=o===q.id;return O.jsxs("div",{className:"bg-[var(--bg-card)] p-4 rounded-2xl shadow-sm border border-[var(--primary)]/20 flex flex-col gap-2 transition-colors duration-200 hover:border-[var(--primary)]/50",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[O.jsx("div",{className:"p-3 rounded-full bg-[var(--bg-input)] text-[var(--text-main)]",children:q.type==="home"?"":q.type==="work"?"":""}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("h3",{className:"font-semibold text-[var(--text-main)]",children:q.name}),!P&&O.jsx("p",{className:"text-sm text-[var(--text-sub)] truncate",children:q.address})]})]}),!P&&O.jsx("button",{onClick:()=>W(q),className:"text-[var(--text-sub)] hover:text-[var(--primary)] p-2 transition-colors",children:O.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),P&&O.jsxs("div",{className:"mt-2 flex gap-2 animate-fade-in",children:[O.jsx(xi,{value:T,onChange:w=>I(w.target.value),placeholder:"Enter address",autoFocus:!0}),O.jsx("button",{onClick:()=>b(q.id),disabled:M,className:"px-4 bg-[var(--primary)] text-[var(--text-inverse)] rounded-xl hover:opacity-90 transition-opacity",children:""})]})]},q.id)};return O.jsx("div",{className:"p-6 pt-12 pb-24 h-full min-h-screen transition-colors duration-300 w-full overflow-y-auto",children:O.jsxs("div",{className:"max-w-4xl mx-auto",children:[O.jsxs("div",{className:"flex justify-between items-center mb-8",children:[O.jsx("h1",{className:"text-3xl font-bold text-[var(--text-main)]",children:"Saved Places "}),O.jsx("button",{onClick:()=>s(!i),className:"p-2 bg-[var(--primary)] text-[var(--text-inverse)] rounded-full hover:bg-[var(--primary-hover)] transition-colors shadow-lg",children:O.jsx("svg",{className:`w-6 h-6 transition-transform ${i?"rotate-45":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),i&&O.jsxs("div",{className:"bg-[var(--bg-card)] p-4 rounded-2xl shadow-lg mb-6 animate-fade-in border border-[var(--primary)]/20",children:[O.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-3",children:"Add New Place"}),O.jsxs("div",{className:"space-y-3",children:[O.jsx(xi,{placeholder:"Name (e.g., Gym)",value:h,onChange:q=>d(q.target.value)}),O.jsx(xi,{placeholder:"Address",value:m,onChange:q=>v(q.target.value)}),O.jsxs("div",{className:"flex gap-2 pt-2",children:[O.jsx(Si,{onClick:V,isLoading:M,className:"py-2 text-sm",children:"Save Place"}),O.jsx(Si,{variant:"secondary",onClick:()=>s(!1),className:"py-2 text-sm",children:"Cancel"})]})]})]}),O.jsxs("div",{className:"space-y-4",children:[A&&Y(A),N&&Y(N),O.jsx("div",{className:"h-px bg-[var(--text-sub)] opacity-20 my-4"}),H.length===0&&!i&&O.jsx("div",{className:"text-center py-8 opacity-50 text-[var(--text-sub)]",children:O.jsx("p",{children:"Add more favorite spots!"})}),H.map(Y)]})]})})},uL=({user:t,onUpdateProfile:e,isDarkMode:n,onToggleTheme:i})=>{const[s,o]=ve.useState(!1),[l,h]=ve.useState(t.displayName),[d,m]=ve.useState(t.age||""),[v,T]=ve.useState(t.noiseSensitivity),[I,M]=ve.useState(!1),[F,V]=ve.useState(!1);ve.useEffect(()=>{h(t.displayName),m(t.age||""),T(t.noiseSensitivity)},[t]),ve.useEffect(()=>{Notification.permission!=="granted"&&Notification.permission!=="denied"&&V(!0)},[]);const W=()=>{Notification.requestPermission().then(()=>V(!1))},b=async()=>{M(!0),await e(l,v,d),M(!1),o(!1)},A=()=>{V1(ll)};return O.jsx("div",{className:"p-6 pt-12 pb-24 space-y-8 animate-fade-in transition-colors duration-300 h-full overflow-y-auto w-full",children:O.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("h1",{className:"text-3xl font-bold text-[var(--text-main)]",children:"Settings "}),O.jsxs("span",{className:"text-xs text-[var(--text-sub)] bg-[var(--bg-input)] px-2 py-1 rounded-md",children:["ID: ",t.uid.slice(0,6),"..."]})]}),O.jsxs("section",{className:"bg-[var(--bg-card)] p-6 rounded-3xl shadow-sm border border-[var(--primary)]/20 space-y-4",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("h2",{className:"text-lg font-semibold text-[var(--text-main)]",children:"Profile"}),!s&&O.jsx("button",{onClick:()=>o(!0),className:"text-sm text-[var(--primary)] hover:underline font-medium",children:"Edit"})]}),O.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[O.jsxs("div",{className:"col-span-2 relative",children:[O.jsx("label",{className:"text-xs font-bold text-[var(--text-sub)] uppercase tracking-wider block mb-1",children:"Display Name"}),s?O.jsx(xi,{value:l,onChange:N=>h(N.target.value),placeholder:"Your name"}):O.jsx("p",{className:"text-lg font-medium text-[var(--text-main)] py-2 border-b border-[var(--primary)]/10",children:l})]}),O.jsxs("div",{className:"col-span-1 relative",children:[O.jsx("label",{className:"text-xs font-bold text-[var(--text-sub)] uppercase tracking-wider block mb-1",children:"Age"}),s?O.jsx(xi,{value:d,onChange:N=>m(N.target.value),placeholder:"Age",type:"number",min:"0",max:"120"}):O.jsx("p",{className:"text-lg font-medium text-[var(--text-main)] py-2 border-b border-[var(--primary)]/10",children:d||"--"})]})]}),s&&O.jsxs("div",{className:"flex gap-3 pt-2",children:[O.jsx(Si,{onClick:b,isLoading:I,className:"py-2 text-sm",children:"Save Changes"}),O.jsx(Si,{variant:"secondary",onClick:()=>o(!1),className:"py-2 text-sm",children:"Cancel"})]})]}),O.jsxs("section",{className:"bg-[var(--bg-card)] p-6 rounded-3xl shadow-sm border border-[var(--primary)]/20 space-y-6",children:[O.jsxs("div",{className:"flex justify-between items-start",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"text-lg font-semibold text-[var(--text-main)] mb-1",children:"Noise Sensitivity"}),O.jsx("p",{className:"text-sm text-[var(--text-sub)]",children:"Set your tolerance for city noise."})]}),F&&O.jsx("button",{onClick:W,className:"text-xs text-[var(--primary)] underline",children:"Enable Alerts"})]}),O.jsxs("div",{className:"bg-[var(--bg-input)] rounded-2xl p-6 flex flex-col items-center",children:[O.jsxs("span",{className:"text-4xl font-bold text-[var(--text-main)] mb-2",children:[v," dB"]}),O.jsx("span",{className:"text-xs font-bold text-[var(--text-sub)] uppercase tracking-widest mb-6",children:"Threshold"}),O.jsx("input",{type:"range",min:"30",max:"100",value:v,onChange:N=>T(Number(N.target.value)),onMouseUp:b,onTouchEnd:b,className:"w-full h-2 bg-[var(--bg-main)] rounded-lg appearance-none cursor-pointer accent-[var(--primary)]"}),O.jsxs("div",{className:"flex justify-between w-full mt-2 text-xs text-[var(--text-sub)] font-medium",children:[O.jsx("span",{children:"Quiet (30dB)"}),O.jsx("span",{children:"Loud (100dB)"})]})]}),O.jsx("p",{className:"text-xs text-center text-[var(--text-sub)] italic",children:"Mimo will avoid routes louder than this level."})]}),O.jsxs("section",{className:"bg-[var(--bg-card)] p-6 rounded-3xl shadow-sm border border-[var(--primary)]/20 flex justify-between items-center",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"text-lg font-semibold text-[var(--text-main)]",children:"Dark Mode"}),O.jsx("p",{className:"text-sm text-[var(--text-sub)]",children:"Switch between Day and Night"})]}),O.jsx("button",{onClick:i,className:`w-14 h-8 rounded-full p-1 transition-colors duration-300 ease-in-out ${n?"bg-[var(--primary)]":"bg-gray-300"}`,children:O.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ${n?"translate-x-6":"translate-x-0"}`})})]}),O.jsxs("section",{children:[O.jsx(Si,{variant:"danger",onClick:A,className:"mt-8",children:"Sign Out"}),O.jsx("p",{className:"text-center text-xs text-[var(--text-sub)] mt-4",children:"Version 2.0.0  Mimo Inc."})]})]})})},cL=({currentTab:t,onTabChange:e})=>{const n=[{id:Gt.HOME,icon:O.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),label:"Home"},{id:Gt.MAP,icon:O.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0121 18.382V7.618a1 1 0 01-.553-.894L15 4m0 13V4m0 0L9 7"})}),label:"Map"},{id:Gt.FAVORITES,icon:O.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),label:"Saved"},{id:Gt.SETTINGS,icon:O.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Settings"}];return O.jsxs("nav",{className:`
      /* Mobile Styles (Fixed Bottom) */
      fixed bottom-0 left-0 w-full z-50 
      bg-[var(--nav-bg)] backdrop-blur-md 
      shadow-[0_-5px_20px_-5px_rgba(0,0,0,0.1)]
      pb-safe pt-2 px-6 rounded-t-3xl 
      transition-colors duration-300

      /* Desktop Styles (Fixed Sidebar) */
      md:static md:w-64 md:h-full md:flex-col md:justify-start md:items-start 
      md:rounded-none md:shadow-none md:border-r md:border-[var(--primary)]/10
      md:p-6 md:bg-[var(--bg-card)] md:z-10
    `,children:[O.jsxs("div",{className:"hidden md:flex items-center gap-2 mb-10 w-full",children:[O.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--primary)] flex items-center justify-center text-white font-bold text-xl",children:"M"}),O.jsx("h1",{className:"text-2xl font-bold text-[var(--text-main)] tracking-tight",children:"Mimo"})]}),O.jsx("div",{className:"flex justify-between items-center max-w-lg mx-auto md:mx-0 md:flex-col md:w-full md:gap-4 md:items-start",children:n.map(i=>{const s=t===i.id;return O.jsxs("button",{onClick:()=>e(i.id),className:`
                flex flex-col items-center gap-1 p-2 rounded-xl transition-all duration-300
                md:flex-row md:w-full md:px-4 md:py-3 md:gap-3
                ${s?"text-[var(--nav-active)] md:bg-[var(--primary)] md:text-[var(--text-inverse)] md:shadow-lg md:shadow-[var(--primary)]/30":"text-[var(--nav-inactive)] hover:text-[var(--nav-active)] md:hover:bg-[var(--bg-input)] md:hover:text-[var(--text-main)]"}
              `,children:[O.jsx("div",{className:`p-2 rounded-full transition-colors md:p-0 ${s&&"bg-white/20 md:bg-transparent"}`,children:i.icon}),O.jsx("span",{className:`
                text-[10px] font-medium transition-all duration-300
                md:text-sm md:opacity-100 md:h-auto
                ${s?"opacity-100":"opacity-0 h-0 overflow-hidden md:opacity-100 md:h-auto"}
              `,children:i.label})]},i.id)})})]})},hL=()=>{const[t,e]=ve.useState(null),[n,i]=ve.useState(null),[s,o]=ve.useState(!0),[l,h]=ve.useState(Gt.HOME),[d,m]=ve.useState("light"),[v,T]=ve.useState(45),[I,M]=ve.useState(0);ve.useEffect(()=>{document.documentElement.setAttribute("data-theme",d)},[d]),ve.useEffect(()=>{if(!n)return;const P=setInterval(()=>{const w=Math.floor(Math.random()*10)-4;let S=v+w;if(S<30&&(S=30),S>100&&(S=100),T(S),S>n.noiseSensitivity){const x=Date.now();x-I>6e4&&(F(S),M(x))}},3e3);return()=>clearInterval(P)},[n,v,I]);const F=P=>{console.log(` High Noise Alert: ${P}dB detected!`),Notification.permission==="granted"&&new Notification("Mimo Noise Alert ",{body:`Current noise level (${P}dB) exceeds your threshold. Re-routing suggested.`})};ve.useEffect(()=>{const P=D1(ll,async w=>{try{e(w),w?await b(w):(i(null),m("light"))}catch(S){console.error("Auth state change error:",S)}finally{o(!1)}});return()=>P()},[]);const V=(P,w)=>{try{localStorage.setItem(`mimo_user_${P}`,JSON.stringify(w))}catch(S){console.error("Local storage save failed",S)}},W=P=>{try{const w=localStorage.getItem(`mimo_user_${P}`);return w?JSON.parse(w):null}catch{return null}},b=async P=>{const w={uid:P.uid,email:P.email,displayName:P.displayName||"Traveler",noiseSensitivity:70,age:"",theme:"light",favorites:[{id:"1",name:"Home",type:"home",address:"Set your home address"},{id:"2",name:"Work",type:"work",address:"Set your work address"}]};try{const S=Da(Va,"users",P.uid),x=await eL(S);if(x.exists()){const R=x.data(),D={...w,...R,favorites:R.favorites||w.favorites};i(D),D.theme&&m(D.theme),V(P.uid,D)}else await nL(S,w),i(w),V(P.uid,w)}catch{console.warn(" FIRESTORE PERMISSION ERROR: Using Local Storage Fallback.");const x=W(P.uid);x?(console.log("Loaded profile from Local Storage"),i(x),x.theme&&m(x.theme)):(console.log("No local data found, using defaults"),i(w),V(P.uid,w))}},A=async()=>{if(!t||!n)return;const P=d==="light"?"dark":"light";m(P);const w={...n,theme:P};i(w),V(t.uid,w);try{const S=Da(Va,"users",t.uid);await nc(S,{theme:P})}catch{}},N=async(P,w,S)=>{if(!t||!n)return;const x={...n,displayName:P,noiseSensitivity:w,age:S};i(x),V(t.uid,x);try{const R=Da(Va,"users",t.uid);await nc(R,{displayName:P,noiseSensitivity:w,age:S})}catch{console.error("Firestore sync failed (Permissions). Data saved locally.")}},H=async P=>{if(!t||!n)return;const w={...P,id:Date.now().toString()},S=[...n.favorites,w],x={...n,favorites:S};i(x),V(t.uid,x);try{const R=Da(Va,"users",t.uid);await nc(R,{favorites:S})}catch{console.warn("Firestore sync failed (Permissions). Data saved locally.")}},Y=async(P,w)=>{if(!t||!n)return;const S=n.favorites.map(R=>R.id===P?{...R,...w}:R),x={...n,favorites:S};i(x),V(t.uid,x);try{const R=Da(Va,"users",t.uid);await nc(R,{favorites:S})}catch{console.warn("Firestore sync failed (Permissions). Data saved locally.")}};if(s)return O.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-[var(--bg-main)]",children:O.jsx("div",{className:"animate-pulse flex flex-col items-center",children:O.jsx("div",{className:"w-12 h-12 bg-[var(--primary)] rounded-full mb-4"})})});if(!t||!n)return O.jsx(sL,{});const q=()=>{switch(l){case Gt.HOME:return O.jsx(kv,{user:n,onNavigate:h,currentNoiseLevel:v});case Gt.MAP:return O.jsx(aL,{noiseLevel:v,userSensitivity:n.noiseSensitivity});case Gt.FAVORITES:return O.jsx(lL,{favorites:n.favorites,onAddFavorite:H,onUpdateFavorite:Y});case Gt.SETTINGS:return O.jsx(uL,{user:n,onUpdateProfile:N,isDarkMode:d==="dark",onToggleTheme:A});default:return O.jsx(kv,{user:n,onNavigate:h,currentNoiseLevel:v})}};return O.jsxs("div",{className:"flex h-screen w-screen bg-[var(--bg-main)] font-sans transition-colors duration-300 overflow-hidden text-[var(--text-main)]",children:[O.jsx(cL,{currentTab:l,onTabChange:h}),O.jsx("main",{className:"flex-1 relative h-full overflow-y-auto overflow-x-hidden md:p-0 pb-20",children:q()})]})},YE=document.getElementById("root");if(!YE)throw new Error("Could not find root element to mount to");const dL=Md.createRoot(YE);dL.render(O.jsx(BT.StrictMode,{children:O.jsx(hL,{})}));
